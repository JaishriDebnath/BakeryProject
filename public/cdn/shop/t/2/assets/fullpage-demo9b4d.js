{class Slide{constructor(el,settings){this.DOM={el},this.settings={detailsEl:null,onHideDetails:()=>!1},Object.assign(this.settings,settings),this.DOM.wrap=this.DOM.el.querySelector(".slide__wrap"),this.DOM.img=this.DOM.wrap.querySelector(".slide__img"),this.DOM.titleWrap=this.DOM.wrap.querySelector(".slide__title-wrap"),this.DOM.detailsItems=Array.from(this.settings.detailsEl.querySelectorAll(".details__item")),this.totalDetailItems=this.DOM.detailsItems.length,this.DOM.hideDetailsCtrl=this.DOM.detailsItems.filter(item=>item.classList.contains("details__item--close"))[0],this.DOM.hideDetailsCtrl.addEventListener("click",()=>this.settings.onHideDetails()),this.config={animation:{duration:1.2,ease:Expo.easeInOut}}}setCurrent(isCurrent=!0){this.DOM.el.classList[isCurrent?"add":"remove"]("slide--current")}hide(direction){return this.toggle("hide",direction)}show(direction){return this.DOM.el.style.zIndex=1e3,this.toggle("show",direction)}toggle(action,direction){return new Promise((resolve,reject)=>{action==="show"&&(TweenMax.to(this.DOM.wrap,this.config.animation.duration,{ease:this.config.animation.ease,startAt:{x:direction==="right"?"100%":"-100%"},x:"0%"}),TweenMax.to(this.DOM.titleWrap,this.config.animation.duration,{ease:this.config.animation.ease,startAt:{x:direction==="right"?"-100%":"100%"},x:"0%"})),TweenMax.to(this.DOM.img,this.config.animation.duration,{ease:this.config.animation.ease,startAt:action==="hide"?{}:{x:direction==="right"?"-100%":"100%",scale:1.1},x:"0%",scale:action==="hide"?1.1:1,onStart:()=>{this.DOM.img.style.transformOrigin=action==="hide"?direction==="right"?"100% 50%":"0% 50%":direction==="right"?"0% 50%":"100% 50%",this.DOM.el.style.opacity=1},onComplete:()=>{this.DOM.el.style.zIndex=999,this.DOM.el.style.opacity=action==="hide"?0:1,resolve()}})})}showDetails(){return new Promise((resolve,reject)=>{if(this.isDetailsOpen)return resolve(),!1;const processItem=(item,pos)=>new Promise((resolve2,reject2)=>{const duration=pos>=this.totalDetailItems-3?.7:.2,ease=pos>=this.totalDetailItems-3?"Expo.easeOut":"Power2.easeInOut",delay=pos*.08,direction=item.dataset.direction||"rtl";let itemAnimOpts={ease,delay,x:"0%",y:"0%"},innerAnimOpts={ease,delay,x:"0%",y:"0%",onComplete:resolve2};direction==="rtl"||direction==="ltr"?(itemAnimOpts.startAt=direction==="rtl"?{x:"100%",y:"0%"}:{x:"-100%",y:"0%"},innerAnimOpts.startAt=direction==="rtl"?{x:"-100%",y:"0%"}:{x:"100%",y:"0%"}):(itemAnimOpts.startAt=direction==="btt"?{x:"0%",y:"100%"}:{x:"0%",y:"-100%"},innerAnimOpts.startAt=direction==="btt"?{x:"0%",y:"-100%"}:{x:"0%",y:"100%"}),TweenMax.to(item,duration,itemAnimOpts),TweenMax.to(item.querySelector(".details__inner"),duration,innerAnimOpts)});let processing=[];this.DOM.detailsItems.forEach((item,pos)=>processing.push(processItem(item,pos))),Promise.all(processing).then(()=>{this.isDetailsOpen=!0,resolve()})})}hideDetails(){return new Promise((resolve,reject)=>{if(!this.isDetailsOpen)return resolve(),!1;const processItem=(item,pos)=>new Promise((resolve2,reject2)=>{const duration=pos===0?.7:.2,ease=pos===0?"Expo.easeOut":"Power2.easeInOut",delay=(this.totalDetailItems-pos-1)*.08,direction=item.dataset.direction||"rtl";let itemAnimOpts={ease,delay},innerAnimOpts={ease,delay,onComplete:resolve2};direction==="rtl"||direction==="ltr"?(itemAnimOpts.x=direction==="rtl"?"100%":"-100%",itemAnimOpts.y="0%",innerAnimOpts.x=direction==="rtl"?"-100%":"100%",innerAnimOpts.y="0%"):(itemAnimOpts.y=direction==="btt"?"100%":"-100%",itemAnimOpts.x="0%",innerAnimOpts.y=direction==="btt"?"-100%":"100%",innerAnimOpts.x="0%"),TweenMax.to(item,duration,itemAnimOpts),TweenMax.to(item.querySelector(".details__inner"),duration,innerAnimOpts)});let processing=[];this.DOM.detailsItems.forEach((item,pos)=>processing.push(processItem(item,pos))),Promise.all(processing).then(()=>{this.isDetailsOpen=!1,resolve()})})}}class Navigation{constructor(el,settings){this.DOM={el},this.settings={next:()=>!1,prev:()=>!1},Object.assign(this.settings,settings),this.DOM.prevCtrl=this.DOM.el.querySelector(".boxnav__item--prev"),this.DOM.nextCtrl=this.DOM.el.querySelector(".boxnav__item--next"),this.DOM.pagination={current:this.DOM.el.querySelector(".boxnav__label--current"),total:this.DOM.el.querySelector(".boxnav__label--total")},this.initEvents()}setCurrent(val,direction){TweenMax.to(this.DOM.pagination.current,.4,{ease:"Back.easeIn",y:direction==="right"?"-100%":"100%",opacity:0,onComplete:()=>{this.DOM.pagination.current.innerHTML=val,TweenMax.to(this.DOM.pagination.current,.8,{ease:"Expo.easeOut",startAt:{y:direction==="right"?"50%":"-50%",opacity:0},y:"0%",opacity:1})}})}setTotal(val){this.DOM.pagination.total.innerHTML=val}initEvents(){this.DOM.prevCtrl.addEventListener("click",()=>this.settings.prev()),this.DOM.nextCtrl.addEventListener("click",()=>this.settings.next())}}class Slideshow{constructor(el){if(this.DOM={el},this.navigation=new Navigation(document.querySelector(".boxnav"),{next:()=>this.navigate("right"),prev:()=>this.navigate("left")}),this.DOM.detailsCtrl=document.querySelector(".action--details"),this.DOM.detailsWrap=document.querySelector(".details-wrap"),this.DOM.details=Array.from(this.DOM.detailsWrap.querySelectorAll(".details")),this.slides=[],Array.from(this.DOM.el.querySelectorAll(".slide")).forEach((slideEl,pos)=>this.slides.push(new Slide(slideEl,{detailsEl:this.DOM.details[pos],onHideDetails:()=>{this.isAnimating||(this.isAnimating=!0,this.closeDetailsBoxes().then(()=>this.isAnimating=!1))}}))),this.slidesTotal=this.slides.length,this.navigation.setTotal(this.slidesTotal),this.slidesTotal<2)return!1;this.current=0,this.init()}init(){this.slides[this.current].setCurrent(),this.initEvents()}initEvents(){this.DOM.detailsCtrl.addEventListener("click",()=>this.openDetailsBoxes())}openDetailsBoxes(){this.isAnimating||(this.isAnimating=!0,this.DOM.el.classList.add("slideshow--details"),this.DOM.detailsWrap.classList.add("details-wrap--open"),this.DOM.details[this.current].classList.add("details--current"),this.slides[this.current].showDetails().then(()=>this.isAnimating=!1))}closeDetailsBoxes(){return new Promise((resolve,reject)=>{this.DOM.el.classList.remove("slideshow--details"),this.slides[this.current].hideDetails().then(()=>{this.DOM.details[this.current].classList.remove("details--current"),this.DOM.detailsWrap.classList.remove("details-wrap--open"),resolve()})})}navigate(direction){if(this.isAnimating)return;this.isAnimating=!0;const nextSlidePos=direction==="right"?this.current<this.slidesTotal-1?this.current+1:0:this.current>0?this.current-1:this.slidesTotal-1;this.closeDetailsBoxes().then(()=>{this.navigation.setCurrent(nextSlidePos+1,direction),Promise.all([this.slides[this.current].hide(direction),this.slides[nextSlidePos].show(direction)]).then(()=>{this.slides[this.current].setCurrent(!1),this.current=nextSlidePos,this.slides[this.current].setCurrent(),this.isAnimating=!1})})}}const slideshow=new Slideshow(document.querySelector(".slideshow"));imagesLoaded(document.querySelectorAll(".slide__img"),{background:!0},()=>document.body.classList.remove("loading"))}
//# sourceMappingURL=/cdn/shop/t/2/assets/fullpage-demo.js.map?v=72954957846221258711580122578

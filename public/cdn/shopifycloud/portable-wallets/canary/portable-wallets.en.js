import.meta;var En=Object.defineProperty,vn=Object.defineProperties,In=Object.getOwnPropertyDescriptors,We=Object.getOwnPropertySymbols,Pn=Object.prototype.hasOwnProperty,Dn=Object.prototype.propertyIsEnumerable,oe=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),se=(e,t,n)=>t in e?En(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,C=(e,t)=>{for(var n in t||(t={}))Pn.call(t,n)&&se(e,n,t[n]);if(We)for(var n of We(t))Dn.call(t,n)&&se(e,n,t[n]);return e},P=(e,t)=>vn(e,In(t)),c=(e,t,n)=>(se(e,typeof t!="symbol"?t+"":t,n),n),Ke=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},le=(e,t,n)=>(Ke(e,t,"read from private field"),n?n.call(e):t.get(e)),Ye=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Je=(e,t,n,r)=>(Ke(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),V=function(e,t){this[0]=e,this[1]=t},pt=(e,t,n)=>{var r=(o,s,d,l)=>{try{var u=n[o](s),p=(s=u.value)instanceof V,m=u.done;Promise.resolve(p?s[0]:s).then(y=>p?r(o==="return"?o:"next",s[1]?{done:y.done,value:y.value}:y,d,l):d({value:y,done:m})).catch(y=>r("throw",y,d,l))}catch(y){l(y)}},a=o=>i[o]=s=>new Promise((d,l)=>r(o,s,d,l)),i={};return n=n.apply(e,t),i[oe("asyncIterator")]=()=>i,a("next"),a("throw"),a("return"),i},q=(e,t,n)=>(t=e[oe("asyncIterator")])?t.call(e):(e=e[oe("iterator")](),t={},n=(r,a)=>(a=e[r])&&(t[r]=i=>new Promise((o,s,d)=>(i=a.call(e,i),d=i.done,Promise.resolve(i.value).then(l=>o({value:l,done:d}),s)))),n("next"),n("return"),t);const Nn=":host{display:flex;align-items:center;justify-content:center}";class Tn extends HTMLElement{constructor(){var t,n;super(),c(this,"size"),c(this,"color"),this.size=(t=this.getAttribute("size"))!=null?t:"1.5rem",this.color=(n=this.getAttribute("color"))!=null?n:"gray",this.attachShadow({mode:"open"})}connectedCallback(){this.render();const t=document.createElement("style");t.textContent=Nn,this.shadowRoot.appendChild(t)}render(){const t=this.shadowRoot,n='\n      width="'.concat(this.size,'"\n      height="').concat(this.size,'"\n      xmlns="http://www.w3.org/2000/svg"\n      aria-hidden="true"\n    ');switch(this.getAttribute("name")){case"warning":t.innerHTML="\n          <svg ".concat(n,' viewBox="0 0 16 14" fill="').concat(this.color,'">\n            <path d="M5.925 2.344c1.146-1.889 3.002-1.893 4.149 0l4.994 8.235c1.146 1.889.288 3.421-1.916 3.421h-10.305c-2.204 0-3.063-1.529-1.916-3.421l4.994-8.235zm1.075 1.656v5h2v-5h-2zm0 6v2h2v-2h-2z"/>\n          </svg>\n        ');break;case"close":t.innerHTML="\n          <svg ".concat(n,' viewBox="0 0 20 20" fill="').concat(this.color,'">\n            <path d="M17.1 4.3l-1.4-1.4-5.7 5.7-5.7-5.7-1.4 1.4 5.7 5.7-5.7 5.7 1.4 1.4 5.7-5.7 5.7 5.7 1.4-1.4-5.7-5.7z"/>\n          </svg>\n        ');break;default:t.innerHTML="";break}}}const Rn="#overlay{position:fixed;width:100%;height:100%;background:#0006;top:0;left:0;z-index:2147483647;animation:modalPop .3s ease-out}#modal{position:fixed;top:1em;left:50%;width:100%;max-width:460px;transform:translate(-50%,-100%);background:#fff;color:#000;border:1px solid #d0d0d0;border-radius:4px;animation:modalSlideInFromTop .3s forwards}@keyframes modalPop{0%{opacity:0}to{opacity:1}}@keyframes modalSlideInFromTop{0%{transform:translate(-50%,-100%)}to{transform:translate(-50%)}}@keyframes modalSlideInFromBottom{0%{transform:translate(-50%,100%)}to{transform:translate(-50%)}}@media only screen and (max-width: 640px){#modal{top:auto;bottom:0;animation:modalSlideInFromBottom .3s forwards}}#modal header,#modal footer{padding:1em}#modal header{display:flex;margin-bottom:2em;text-align:center;border-bottom:1px solid #d0d0d0}#title{flex-grow:2;display:flex;justify-content:center;font-size:1.6rem;margin:0}#title svg-icon{margin-right:.25em}#content{text-align:left;padding:0 1em 1em;overflow:auto;max-height:84vh}#modal #content p{margin:0}#close-icon,#close-button{cursor:pointer}#close-icon{min-width:24px;background:transparent;padding:0;border:none}#close-button{width:100%;padding:1em;color:#fff;background-color:#1773b0;border:none;border-radius:4px}#close-button:hover,#close-button:active{background:#136f99}#close-button:active,#close-button:focus{box-shadow:0 0 0 4px #1990c640}";var Er=/^\s*at .*(\S+:\d+|\(native\))/m,kn=/^(eval@)?(\[native code])?$/;function Ln(e){return e.stack?e.stack.match(Er)?On(e):xn(e):[]}function vr(e){if(e.indexOf(":")===-1)return[e];let t=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(e.replace(/[()]/g,""));return[t[1],t[2]?Number(t[2]):void 0,t[3]?Number(t[3]):void 0]}function On(e){return e.stack.split("\n").filter(t=>!!t.match(Er)).map(t=>{let n=t.replace(/^\s+/,"").replace(/^.*?\s+/,""),r=n.match(/ (\(.+\)$)/);n=r?n.replace(r[0],""):n;let a=vr(r?r[1]:n),i=r&&n||void 0,o=["eval","<anonymous>"].indexOf(a[0])>-1?void 0:a[0];return{method:i,file:o,lineNumber:a[1],columnNumber:a[2]}})}function xn(e){return e.stack.split("\n").filter(t=>!t.match(kn)).map(t=>{if(t.indexOf("@")===-1&&t.indexOf(":")===-1)return{method:t};let n=/((.*".+"[^@]*)?[^@]*)(?:@)/,r=t.match(n),a=r&&r[1]?r[1]:void 0,i=vr(t.replace(n,""));return{method:a,file:i[0],lineNumber:i[1],columnNumber:i[2]}})}var Qe="5",Fn=class{constructor(e){c(this,"breadcrumbs",[]),c(this,"apiKey"),c(this,"plugins"),c(this,"appId"),c(this,"appType"),c(this,"appVersion"),c(this,"releaseStage"),c(this,"locale"),c(this,"userAgent"),c(this,"metadata"),c(this,"persistedMetadata"),c(this,"onError"),c(this,"onPostErrorListeners",[]);var t;this.apiKey=e.apiKey,this.appType=e.appType,this.appId=e.appId,this.appVersion=e.appVersion,this.releaseStage=e.releaseStage,this.locale=e.locale,this.userAgent=e.userAgent,this.metadata=e.metadata,this.onError=e.onError,this.persistedMetadata={},this.plugins=(t=e.plugins)!=null?t:[],this.plugins.forEach(n=>n.load(this)),this.leaveBreadcrumb("Bugsnag started",void 0,"state")}addMetadata(e){for(let t of Object.keys(e))this.persistedMetadata[t]=e[t]}leaveBreadcrumb(e,t,n="manual"){this.breadcrumbs.push({name:e,metaData:t,type:n,timestamp:new Date().toISOString()})}notify(e,{errorClass:t,severity:n,severityType:r,handled:a=!0,metadata:i,context:o}={}){var s,d;let l=C(C(C({},this.metadata),this.persistedMetadata),i),u=this.buildBugsnagEvent({error:e,errorClass:t,severityType:r,handled:a,severity:n,metadata:l,context:o});if(((d=(s=this.onError)==null?void 0:s.call(this,u,e))==null||d)&&this.releaseStage!=="development"){let p=this.sendToBugsnag(u);return this.onPostErrorListeners.forEach(m=>m(u)),p}return Promise.resolve()}addOnPostError(e){this.onPostErrorListeners.push(e)}buildBugsnagEvent({error:e,errorClass:t,severity:n="error",severityType:r="handledException",handled:a,metadata:i={},context:o}){let s=new Date().toISOString(),{breadcrumbs:d,appId:l,appType:u,appVersion:p,releaseStage:m,locale:y,userAgent:g}=this;return{payloadVersion:Qe,exceptions:[{errorClass:t!=null?t:e.name,stacktrace:Ir(l,e),message:e.message}],severity:n,severityReason:{type:r},unhandled:!a,app:{id:l,type:u,version:p,releaseStage:m},device:{time:s,locale:y,userAgent:g},breadcrumbs:d,context:o,metaData:i}}async sendToBugsnag(e){let{apiKey:t}=this,n={apiKey:t,notifier:{name:"Bugsnag JavaScript",version:"7.22.2",url:"https://github.com/bugsnag/bugsnag-js"},events:[e]};try{await fetch("https://notify.bugsnag.com/",{method:"POST",headers:{"Content-Type":"application/json","Bugsnag-Api-Key":t,"Bugsnag-Payload-Version":Qe,"Bugsnag-Sent-At":e.device.time},body:JSON.stringify(n)})}catch(r){console.warn("[bugsnag-light] failed to send an event"),console.warn(r)}}};function Ir(e,t){return Ln(t).map(n=>{var r,a,i,o;let s=(r=n.file)==null?void 0:r.includes(e);return{method:(a=n.method)!=null?a:"",file:(i=n.file)!=null?i:"",lineNumber:(o=n.lineNumber)!=null?o:0,columnNumber:n.columnNumber,inProject:s}})}function Mn(e){let t=window.onerror;window.onerror=(n,r,a,i,o)=>{o&&e.notify(o,{severityType:"unhandledException",handled:!1}),typeof t=="function"&&t.apply(window.onerror,[n,r,a,i,o])}}function Un(e){window.addEventListener("unhandledrejection",({reason:t})=>{t&&e.notify(t,{severityType:"unhandledPromiseRejection",handled:!1})})}function Q(e){try{const t=new RegExp("(^| )".concat(e,"=([^;]+)")).exec(document.cookie);if(t){const n=t[2];try{return decodeURIComponent(n)}catch(r){return n}}return null}catch(t){return null}}const fe={BRANDED_BUTTON:"shopify-payment-button__button shopify-payment-button__button--branded",UNBRANDED_BUTTON:"shopify-payment-button__button shopify-payment-button__button--unbranded",MORE_PAYMENT_OPTION_BUTTON:"shopify-payment-button__more-options",HIDDEN:"shopify-payment-button__button--hidden"},$n={DARK:"apple-pay--dark",LIGHT:"apple-pay--light"},Bn=44,Hn="_shopify_y",Pr=6,Gn="discount_code",ke="https://static-na.payments-amazon.com/checkout.js",zn={CURRENCY_CHANGE:"wallet_currency_change"},Bt="{{ICON}}",Ht="VALIDATION_CUSTOM",Dr="portable-wallets",x={BUTTON:"portable-wallet",CONTAINER:"portable-wallet-container"};class Lt extends Error{constructor({code:t,message:n}){const r="An unexpected error happened likely because of customizations made to HTML/JavaScript on this site ".concat(n);super("[".concat(t,"]: ").concat(r)),c(this,"name","DeveloperError"),c(this,"code","unknown"),this.code=t}}class Nr extends Error{constructor({message:t}){super(t),c(this,"name","SilencedError")}}class Vn extends Error{constructor(){super(...arguments),c(this,"name","MissingConfigError")}}const qn=["Load failed","Failed to fetch","when attempting to fetch resource"],jn=["Chrome-Lighthouse"],be={};function Wn(e,t){if(!e.exceptions[0])return!1;Kn(e);try{return Yn(e,t)}catch(n){const r=n;console.error(r);const a={errorClass:"UnfilterableError",message:"Could not properly filter error with message: ".concat(r.message),stacktrace:Ir(Dr,r)};return e.exceptions.unshift(a),!0}}function Kn(e){var t,n;e.context=window.location.pathname,e.request||(e.request={}),e.request.url=window.location.href,e.device.orientation=(n=(t=window.screen)==null?void 0:t.orientation)==null?void 0:n.type,e.metaData=C(C({},be),e.metaData);const r=e.exceptions[0].stacktrace[0];r&&!r.inProject&&e.unhandled&&(e.severity="warning")}function Yn(e,t){var n,r,a,i;if(jn.some(s=>navigator.userAgent.includes(s)))return!1;const o=e.exceptions[0];return qn.some(s=>{var d,l;return(l=(d=o.message)==null?void 0:d.includes(s))!=null?l:!1})?!1:t instanceof Lt?(console.error(t),!1):o.errorClass===Nr.name||(n=o.message)!=null&&n.includes("Component closed")||o.stacktrace.some(s=>{var d;return(d=s.file)==null?void 0:d.includes("spin.dev")})||o.errorClass==="OpenTelemetryClientError"&&((r=o.message)!=null&&r.match(/Server responded with ([45]\d\d|undefined)/)||(a=o.message)!=null&&a.includes("error found in #10 byte"))||(i=o.message)!=null&&i.includes("GraphQL mutation failed with status 404")?!1:o.stacktrace.some(s=>!!(s!=null&&s.inProject))}var Ar;const Jn={apiKey:"cb577dc231be1c7494db8a63441ef66b",appId:Dr,appVersion:"0.0.0-604cafa5297afcc8e85992742978114288687d42",releaseStage:"canary",locale:"en",userAgent:navigator.userAgent,metadata:{user:{id:(Ar=Q(Hn))!=null?Ar:"unknown"}},onError:Wn},f=new Fn(Jn);function Le(e){for(const[t,n]of Object.entries(e))be[t]=C(C({},be[t]),n)}var Qn={en:{instruments_copy:{checkout:{buy_now:"Buy it now"}},error_dialogs:{checkout:{title:"Transaction failed",generic_error:"Checkout is currently unavailable due to technical problems. Please try again in a few minutes.",button_text:"Return to store"},product:{out_of_stock:"This item is no longer available."},wallet:{title:"%{wallet} unavailable",generic_error:"There was an issue with %{wallet}. Try again or use a different payment method.",buy_with_prime:{empty_line_items:{title:"Buy with Prime no longer available",content:"Items that were eligible for Buy with Prime are no longer in your cart."}}}},more_payment_options:"More payment options",subscriptions:{buyer_consent:"One or more of the items in your cart is a recurring or deferred purchase. By continuing, I agree to the %{subscriptionPolicyLink} and authorize you to charge my payment method at the prices, frequency and dates listed on this page until my order is fulfilled or I cancel, if permitted.",cancellation_policy:"cancellation policy",subscription_policy:"Subscription policy",policy_not_found:"The subscription policy could not be found. Refresh the page or contact us for more information."},shipping_methods:{connect_shipping_methods:"%{methodOne} and %{methodTwo}",choose_delivery_strategy:"Choose a delivery method"},order_summary:{total:"Total",subtotal:"Subtotal",duties:"Duties",taxes:"Taxes",shipping:"Shipping",shipping_one_time_purchase:"Shipping (One-time purchase)",shipping_subscription:"Shipping (Subscription)",discount:"Discount",subscriptions:{recurring_total_tooltip_line:"Does not include shipping, tax, duties, or any applicable discounts",recurring_totals:"%{fixedPrice} every %{interval}",recurring_totals_with_policies:{one:"First payment %{fixedPrice}, then %{recurringPrice} every %{interval}",other:"First %{count} payments %{fixedPrice} each, then %{recurringPrice} every %{interval}"},recurring_total_intervals:{day:{one:"day",other:"%{count} days"},month:{one:"month",other:"%{count} months"},week:{one:"week",other:"%{count} weeks"},year:{one:"year",other:"%{count} years"}}}},brand:{amazon_pay:"Amazon Pay",apple_pay:"Apple Pay",buy_with_prime:"Buy with Prime",paypal:"PayPal",google_pay:"Google Pay",shop_pay:"Shop Pay"},buy_with_button_content:"Buy with {{ICON}}",shop_promise_delivery:{same_day:"Same-day delivery",next_day:"Next-day delivery",two_day:"2-day delivery"},errors:{missing:{email:"Enter an email address",first_name:"Enter a first name",last_name:"Enter a last name",address1:"Enter an address",address2:"Enter an apartment, suite, etc.",city:"Enter a city",zone:"Select a state / province",phone:"Enter a phone number",postal_code:"Enter a ZIP / postal code"},invalid:{email:"Enter a valid email",first_name:"Enter a valid first name",last_name:"Enter a valid last name",address1:"Enter a valid address",address2:"Enter a valid apartment, suite, etc.",city:"Enter a valid city",zone:"Select a valid state / province",country:"Select a country / region",phone:"Enter a valid phone number",postal_code:"Enter a valid zip / postal code",billing_address:"Invalid billing address",shipping_address:"Invalid shipping address"},emojis:{first_name:"First name cannot contain emojis",last_name:"Last name cannot contain emojis",city:"City cannot contain emojis",address1:"Address line cannot contain emojis",address2:"Second address line cannot contain emojis",postal_code:"Postal code/zip cannot contain emojis"},too_long:{address1:"Address line is too long",address2:"Second address line is too long",first_name:"First name is too long",last_name:"Last name is too long",city:"City is too long"},url:{first_name:"First name cannot contain a URL",last_name:"Last name cannot contain a URL"},html_tags:{first_name:"First name cannot contain HTML tags",last_name:"Last name cannot contain HTML tags",city:"City cannot contain HTML tags",address1:"Address line cannot contain HTML tags",address2:"Second address line cannot contain HTML tags"}}}};let ce;class Xe extends Error{constructor(t,n){const r="i18n: Missing or invalid translation '".concat(t,"' in '").concat(n,"'");super(r)}}class Xn extends Error{constructor(t,n,r){const a="i18n: Missing translation template key '".concat(t,"' for '").concat(n,"' in '").concat(r,"'");super(a)}}class Zn extends Error{constructor(t,n,r){const a="i18n: Invalid pluralization for '".concat(t,"':'").concat(n,"' in '").concat(r,"'");super(a)}}function Qt(){return ce==null&&(ce=ta(Qn)),ce}function ta(e){const t=(i,o)=>typeof i!="string"&&o.count!=="undefined",n=(i,o)=>{let s=o===1?"one":"other";return o===0&&typeof i!="string"&&i.zero!=="undefined"&&(s="zero"),s},r=(i,o={})=>{const s=i.match(/%\{.+?\}/g);return s?s.reduce((d,l)=>{const u=l.replace(/%\{(.*)\}/,"$1");return o[u]?d.replace(l,o[u]):(f.notify(new Xn(u,i,a)),d)},i):i},a=ea();return{locale:a,translate(i,o={}){var s;const d=i.split(".");let l=e[a];try{for(const u of d)switch(typeof l){case"object":l=l[u];break;case"string":case"undefined":throw new Xe(i,a)}if(t(l,o)){if(typeof l=="string")throw new Zn(i,l,a);l=l[n(l,o.count)]}if(typeof l!="string")throw new Xe(i,a);return r(l,o)}catch(u){return f.notify(u),(s=o.defaultValue)!=null?s:i}}}}function ea(){return"en"}var w=(e=>(e.BuyItNow="BuyItNow",e.MoreOptions="MoreOptions",e.ApplePay="ApplePay",e.PayPal="PayPal",e.Venmo="Venmo",e.GooglePay="GooglePay",e.ShopPay="ShopPay",e.MetaPay="FacebookPay",e.BuyWithPrime="BuyWithPrime",e.AmazonPay="AmazonPay",e.Unknown="Unknown",e))(w||{}),A=(e=>(e.CartPage="cart_page",e.CartAjax="cart_ajax",e.ProductPage="product",e.Checkout="checkout",e.Unknown="unknown",e))(A||{}),Pt=(e=>(e.CartChange="/cart/change",e.CartUpdate="/cart/update",e.CartAdd="/cart/add",e.CartClear="/cart/clear",e))(Pt||{}),Rt=(e=>(e.OneTimePurchase="ONE_TIME_PURCHASE",e.Subscription="SUBSCRIPTION",e))(Rt||{});function ra(e){const t=document.querySelectorAll("accelerated-checkout .shopify-payment-button__skeleton, accelerated-checkout-cart .wallet-cart-button__skeleton");for(let n=0;n<t.length;n++)t[n].remove()}function Tr(e){!e.message.includes("import.meta")||!e.filename.includes("portable-wallets")||(window.removeEventListener("error",Tr),window.Shopify.PaymentButton.failedToLoad=e,document.readyState==="loading"?document.addEventListener("DOMContentLoaded",window.Shopify.PaymentButton.init):window.Shopify.PaymentButton.init())}window.addEventListener("error",Tr);function E(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var na=0;function dt(e){return"__private_"+na+++"_"+e}function Xt(e){return Object.entries(e).map(([t,n])=>({key:t,value:{stringValue:String(n)}}))}function aa(e){return Object.entries(e).map(([t,n])=>({key:t,value:ia(n)}))}function ia(e){switch(typeof e){case"boolean":return{boolValue:!!e};case"number":return Number.isInteger(e)?{intValue:Number(e)}:{doubleValue:Number(e)};case"string":default:return{stringValue:String(e)}}}const Oe=1,oa=sa(5,2,12);function sa(e,t,n){const r=[0];for(let a=0;a<n;a++){const i=Math.floor(e*t**a);r.push(i)}return r}var at=dt("exporter"),H=dt("attributes"),O=dt("metrics"),it=dt("logs");class la{constructor({exporter:t,attributes:n}){Object.defineProperty(this,at,{writable:!0,value:void 0}),Object.defineProperty(this,H,{writable:!0,value:void 0}),Object.defineProperty(this,O,{writable:!0,value:[]}),Object.defineProperty(this,it,{writable:!0,value:[]}),E(this,at)[at]=t,E(this,H)[H]=n!=null?n:{}}addAttributes(t){E(this,H)[H]=C(C({},E(this,H)[H]),t)}histogram({name:t,value:n,unit:r,bounds:a,attributes:i,scale:o}){const s=Date.now()*1e6;a?E(this,O)[O].push({name:t,type:"histogram",value:n,unit:r,timeUnixNano:s,attributes:i,bounds:a}):E(this,O)[O].push({name:t,type:"exponential_histogram",value:n,unit:r,timeUnixNano:s,attributes:i,scale:o})}counter({name:t,value:n,unit:r,attributes:a}){const i=Date.now()*1e6;E(this,O)[O].push({name:t,type:"counter",value:n,unit:r,timeUnixNano:i,attributes:a})}gauge({name:t,value:n,unit:r,attributes:a}){const i=Date.now()*1e6;E(this,O)[O].push({name:t,type:"gauge",value:n,unit:r,timeUnixNano:i,attributes:a})}log({body:t,attributes:n}){const r=Date.now()*1e6;E(this,it)[it].push({timeUnixNano:r,body:t,attributes:n})}async exportMetrics(){const t={};E(this,O)[O].forEach(r=>{switch(r.attributes=C(C({},E(this,H)[H]),r.attributes),r.type){case"histogram":ca(t,r);break;case"exponential_histogram":da(t,r);break;case"counter":ua(t,r);break;case"gauge":ha(t,r);break}});const n=Object.values(t);n.length!==0&&(E(this,O)[O]=[],await E(this,at)[at].exportMetrics(n))}async exportLogs(){const t=E(this,it)[it].map(n=>{const r={timeUnixNano:n.timeUnixNano,observedTimeUnixNano:n.timeUnixNano,attributes:aa(C(C({},E(this,H)[H]),n.attributes))};return n.body&&(r.body={stringValue:n.body}),r});t.length!==0&&(E(this,it)[it]=[],await E(this,at)[at].exportLogs(t))}}function ca(e,t){var n;const{name:r,value:a,unit:i,timeUnixNano:o,attributes:s}=t,d=(n=t.bounds)!==null&&n!==void 0?n:oa,l=new Array(d.length+1).fill(0);e[r]||(e[r]={name:r,unit:i||"1",histogram:{aggregationTemporality:Oe,dataPoints:[]}});for(let u=0;u<l.length;u++){const p=d[u];if(p===void 0)l[u]=1;else if(a<=p){l[u]=1;break}}e[r].histogram.dataPoints.push({startTimeUnixNano:o,timeUnixNano:o,count:1,sum:a,min:a,max:a,bucketCounts:l,explicitBounds:d,attributes:Xt(s!=null?s:{})})}function da(e,t){const{name:n,value:r,unit:a,timeUnixNano:i,attributes:o,scale:s}=t;e[n]||(e[n]={name:n,unit:a||"1",exponentialHistogram:{aggregationTemporality:Oe,dataPoints:[]}});const d=r<=0?0:r,l=s||3,u=2**l/Math.log(2),p=Math.ceil(Math.log(r)*u)-1,m=r<=0?1:0,y={offset:0,bucketCounts:[]},g={offset:r>0?p:0,bucketCounts:r>0?[1]:[]};e[n].exponentialHistogram.dataPoints.push({attributes:Xt(o!=null?o:{}),startTimeUnixNano:i,timeUnixNano:i,count:1,sum:d,scale:l,zeroCount:m,positive:g,negative:y,min:d,max:d,zeroThreshold:0})}function ua(e,t){const{name:n,value:r,unit:a,timeUnixNano:i,attributes:o}=t;e[n]||(e[n]={name:n,unit:a||"1",sum:{aggregationTemporality:Oe,isMonotonic:!0,dataPoints:[]}}),e[n].sum.dataPoints.push({startTimeUnixNano:i,timeUnixNano:i,asDouble:r,attributes:Xt(o!=null?o:{})})}function ha(e,t){const{name:n,value:r,unit:a,timeUnixNano:i,attributes:o}=t;e[n]||(e[n]={name:n,unit:a||"1",gauge:{dataPoints:[]}}),e[n].gauge.dataPoints.push({startTimeUnixNano:i,timeUnixNano:i,asDouble:r,attributes:Xt(o!=null?o:{})})}var Et=dt("url"),ot=dt("serviceName"),vt=dt("logger");class pa{constructor(t,n,r){Object.defineProperty(this,Et,{writable:!0,value:void 0}),Object.defineProperty(this,ot,{writable:!0,value:void 0}),Object.defineProperty(this,vt,{writable:!0,value:void 0}),E(this,Et)[Et]=t.replace(/\/v1\/(logs|metrics|traces)\/?$/,""),E(this,ot)[ot]=n,E(this,vt)[vt]=r==null?void 0:r.logger}async exportMetrics(t){const n={resourceMetrics:[{resource:{attributes:[{key:"service.name",value:{stringValue:E(this,ot)[ot]}}]},scopeMetrics:[{scope:{name:"open-telemetry-mini-client",version:"1.1.0",attributes:[]},metrics:t}]}]};await this.exportTo(n,"/v1/metrics")}async exportLogs(t){const n={resourceLogs:[{resource:{attributes:[{key:"service.name",value:{stringValue:E(this,ot)[ot]}}]},scopeLogs:[{scope:{name:"open-telemetry-mini-client",version:"1.1.0",attributes:[]},logRecords:t}]}]};await this.exportTo(n,"/v1/logs")}async exportTo(t,n){var r;const a=await fetch("".concat(E(this,Et)[Et]).concat(n),{method:"POST",keepalive:!0,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if((r=E(this,vt)[vt])===null||r===void 0||r.log({status:a.status}),!a.ok){if(a.status===400){const i=await a.text();throw new Ut("Invalid OpenTelemetry Data: ".concat(i))}if(a.status===429||a.status===503){const i=await a.json(),o=a.headers.get("Retry-After"),s=o?{seconds:Number(o)}:void 0;throw new Ut("Server did not accept data",{errorData:i,retryAfter:s,body:t})}throw new Ut("Server responded with ".concat(a.status))}}}class Ut extends Error{constructor(t,n){super(t),this.metadata=void 0,this.name="OpenTelemetryClientError",this.metadata=n}}const ma="https://otlp-http-production.shopifysvc.com/v1/metrics",ya="portable_wallets";class ga{constructor(t){this.exporter=t}async exportMetrics(t){var n;try{await this.exporter.exportMetrics(t)}catch(r){if(r instanceof Ut){const a=(n=r.metadata)==null?void 0:n.retryAfter;if(a){await new Promise(i=>{setTimeout(()=>{this.exportMetrics(t),i()},a.seconds*1e3)});return}}throw r}}async exportLogs(){}}const fa=new pa(ma,ya),ba=new ga(fa),I=new la({exporter:ba}),Dt=[];function F(e,t,n){if(window.customElements!=null)try{const r=t;window.customElements.get(e)||(window.customElements.define(e,r),n!=null&&n.isChildCustomElement&&Dt.push(e))}catch(r){f.notify(r),ra()}}function Gt(){const e=new URLSearchParams(window.location.search);return function(t){return!!e.get(t)}}function wa(){var e;const t=(e=window.Shopify)==null?void 0:e.CartType;let n=A.ProductPage;return window.Shopify?t===A.CartAjax?n=A.CartAjax:t===A.CartPage&&(n=A.CartPage):n=A.Unknown,n}function lt(e){return Number(e).toFixed(2)}function Zt(e){if(!(!e||!e.id||!e.id.includes("gid://shopify/Cart/")))return e.id.replace("gid://shopify/Cart/","").split("?")[0]}function G(){let e;return[new Promise(t=>e=t),e]}const _a={force_shop_pay_product:"direct_checkout_product",force_shop_pay_cart:"direct_checkout_cart"};function Z(e,t="no_redirect_for_checkout"){I.exportMetrics();const n=new URL(e);switch(t){case"skip_shop_pay":n.searchParams.set("skip_shop_pay","true");break;case"no_redirect_for_checkout":n.searchParams.set("storefront_wallet","true");break;case"force_shop_pay_cart":case"force_shop_pay_product":case"force_shop_pay":{n.searchParams.set("payment","shop_pay");const r=_a[t];r&&n.searchParams.set("redirect_source",r);break}}window.location.assign(n.toString())}function Rr(){return!!document.querySelector('[data-source-attribution="shopify.shop-promise-pdp"]')}class Ca extends HTMLElement{constructor(){super(),c(this,"overflow"),c(this,"formerFocus"),this.attachShadow({mode:"open"}),this.overflow="",this.formerFocus=document.activeElement}connectedCallback(){const t=Qt();this.render(t);const n=this.shadowRoot,r=n.getElementById("modal");n.querySelectorAll("button").forEach(o=>o.addEventListener("click",this.closeModal.bind(this)));const a=n.getElementById("overlay");a==null||a.addEventListener("click",o=>this.handleOutsideClick(o,r)),document.addEventListener("keydown",this.handleEscapeKey.bind(this));const i=document.createElement("style");i.textContent=Rn,n.appendChild(i),this.overflow=document.body.style.overflow,document.body.style.overflow="hidden",this.trapFocus(r,n),F("svg-icon",Tn)}trapFocus(t,n){if(!t)return;const r=t.querySelectorAll("a[href], button"),a=Array.from(r),i=a[0],o=a[a.length-1];t.addEventListener("keydown",s=>{s.key==="Tab"&&!s.shiftKey&&n.activeElement===o&&(s.preventDefault(),i.focus()),s.key==="Tab"&&s.shiftKey&&n.activeElement===i&&(s.preventDefault(),o.focus())}),i.focus()}handleOutsideClick(t,n){n&&(n.contains(t.target)||this.closeModal())}handleEscapeKey(t){t.key==="Escape"&&this.closeModal()}closeModal(){var t;document.body.style.overflow=this.overflow,this.remove(),this.formerFocus&&"focus"in(this==null?void 0:this.formerFocus)&&typeof this.formerFocus.focus=="function"&&((t=this.formerFocus)==null||t.focus())}render(t){const n=this.getAttribute("title"),r=this.getAttribute("has-close-button"),a=t.translate("error_dialogs.checkout.button_text"),i='\n      <footer>\n        <button type="button" id="close-button" tabindex="0">'.concat(a,"</button>\n      </footer>\n    ");this.shadowRoot.innerHTML='\n      <div id="overlay">\n        <div id="modal" role="dialog" aria-modal="true" aria-labelledby="title">\n          <header>\n            <h2 id="title">\n              '.concat(n,'\n            </h2>\n            <button type="button" id="close-icon" aria-label=').concat(a,' tabindex="0">\n              <svg-icon name="close" color="gray"></svg-icon>\n            </button>\n          </header>\n          <div id="content">\n            <p><slot></slot></p>\n          </div>\n          ').concat(r?i:"","\n        </div>\n      </div>\n    ")}}function Ot({type:e="button",label:t=void 0}={}){const n=document.createElement("button");return n.type=e,t&&n.setAttribute("aria-label",t),n}function te(e,t){for(const[n,r]of Object.entries(t))e.setAttribute(n,r)}function Ze(e,t){for(const[n,r]of Object.entries(t))e.style.setProperty(n,r)}function ut(e,t){const n=document.createElement("top-level-modal");n.textContent=t,te(n,{"data-testid":"top-level-modal","has-close-button":"true",title:'<svg-icon name="warning" color="red"></svg-icon> '.concat(e)}),document.body.appendChild(n)}function xe(e,t){const n=document.createElement("top-level-modal");n.innerHTML=t,te(n,{"data-testid":"top-level-modal",title:e}),document.body.appendChild(n)}function Y(e){ut(e.translate("error_dialogs.checkout.title"),e.translate("error_dialogs.product.out_of_stock"))}function W(e,t){ut(t.translate("error_dialogs.wallet.title",{wallet:e}),t.translate("error_dialogs.wallet.generic_error",{wallet:e}))}F("top-level-modal",Ca);class ee extends HTMLElement{get buyerCountry(){return this.getAttribute("buyer-country")}get recommendedInstrument(){return this.getAttribute("recommended-instrument")}get buyerCurrency(){const t=this.getAttribute("buyer-currency");if(t==null)throw new Error("WalletElement buyer-currency is null");return t}get accessToken(){return this.getAttribute("access-token")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){this.toggleAttribute("disabled",t)}get hasSellingPlan(){const t=this.getAttribute("has-selling-plan");return t==="true"||t===""}set hasSellingPlan(t){t?this.setAttribute("has-selling-plan",""):this.removeAttribute("has-selling-plan")}get isShippingRequired(){const t=this.getAttribute("requires-shipping");return t==="true"||t===""}set isShippingRequired(t){t?this.setAttribute("requires-shipping",""):this.removeAttribute("requires-shipping")}}const Sa="#more-payment-options-link{cursor:pointer}",Aa="https://monorail-edge.shopifysvc.com",Ea="/v1/produce";function va(){if(typeof crypto<"u"&&crypto&&typeof crypto.randomUUID=="function")return crypto.randomUUID();const e=new Array(36);for(let t=0;t<36;t++)e[t]=Math.floor(Math.random()*16);return e[14]=4,e[19]=e[19]&=-5,e[19]=e[19]|=8,e[8]=e[13]=e[18]=e[23]="-",e.map(t=>t.toString(16)).join("")}function Ia(e){const t={"Content-Type":"application/json; charset=utf-8","X-Monorail-Edge-Event-Created-At-Ms":(e&&e.eventCreatedAtMs||Date.now()).toString(),"X-Monorail-Edge-Event-Sent-At-Ms":Date.now().toString(),"X-Monorail-Edge-Client-Message-Id":(e&&e.clientMessageId||va()).toString()};return e&&e.userAgent&&(t["User-Agent"]=e.userAgent),e&&e.remoteIp&&(t["X-Forwarded-For"]=e.remoteIp),t}async function Pa({endpoint:e,event:t,keepalive:n}){return fetch(e!=null?e:Aa+Ea,{method:"post",headers:Ia(t.metadata),body:JSON.stringify({schema_id:t.schemaId,payload:t.payload}),keepalive:n})}var R=(e=>(e.Decelerated="portable_wallets_decelerated",e.InitCompleted="portable_wallets_init_completed",e.InstrumentLoadTime="portable_wallets_instrument_load_time",e.InstrumentLoadTimeFromPageLoad="portable_wallets_instrument_load_time_from_page_load",e.InstrumentLoadNotEligible="portable_wallets_instrument_load_not_eligible",e.MonorailProduceError="portable_wallets_monorail_produce_error",e.SheetClicked="portable_wallets_sheet_clicked",e.SheetCancelled="portable_wallets_sheet_cancelled",e.SheetFailed="portable_wallets_sheet_failed",e.AuthorizationAttempt="portable_wallets_authorization_attempt",e.AuthorizationComplete="portable_wallets_authorization_complete",e.CartTokenMissing="portable_wallets_cart_token_missing",e.GooglePayNotEligibleWebview="portable_wallets_google_pay_not_eligible_webview",e.WalletConfigDeveloperError="portable_wallets_wallet_config_developer_error",e.LegacyCartCookie="portable_wallets_legacy_cart_cookie",e))(R||{}),ct=(e=>(e.InstrumentSdkLoaded="portable_wallets_instrument_sdk_loaded",e.InstrumentSdkFailed="portable_wallets_instrument_sdk_failed",e.InstrumentSdkEligible="portable_wallets_instrument_sdk_eligible",e.InstrumentSdkNotEligible="portable_wallets_instrument_sdk_not_eligible",e))(ct||{});const Da=["Chrome-Lighthouse"];function Na(){const e=navigator.userAgent;return Da.some(t=>e.includes(t))}async function Ta(e){if(Na())return;f.leaveBreadcrumb("monorail event produced to ".concat(e.schemaId),e);let t;try{t=await Pa({event:e})}catch(n){}if(!(t!=null&&t.ok))try{I.counter({name:R.MonorailProduceError,value:1,attributes:{schemaId:e.schemaId}})}catch(n){}}const tr="shopify_wallet_checkout_track/6.2";async function $(e){var t,n,r,a,i,o,s;let d=null;try{const l=await Ra();if(d={schemaId:tr,payload:{app_name:"storefront",page_type:wa(),checkout_one:!0,event:e.event,event_subtype:e.eventSubtype,checkout_token:e.checkoutToken,instrument_id:e.instrumentId,ttl:e.ttl,error_reason:e.errorReason,uniq_token:(t=l==null?void 0:l.uniqToken)!=null?t:"",visit_token:(n=l==null?void 0:l.visitToken)!=null?n:"",micro_session_id:(r=l==null?void 0:l.microSessionId)!=null?r:"",micro_session_count:(a=l==null?void 0:l.microSessionCount)!=null?a:0,shop_id:(i=l==null?void 0:l.shopId)!=null?i:0,theme_id:l==null?void 0:l.themeId,theme_city_hash:(o=l==null?void 0:l.themeCityHash)!=null?o:"",content_language:(s=l==null?void 0:l.contentLanguage)!=null?s:"",referer:l==null?void 0:l.referer}},!(e!=null&&e.event)){f.notify(new Error("Event is required"),{metadata:{request:{monorail:{schemaId:tr,payload:JSON.stringify(d)}}}});return}await Ta(d)}catch(l){f.notify(new Error("Failed to send monorail event: ".concat(l)),{metadata:{request:{monorail:{payload:JSON.stringify(d!=null?d:e)}}}})}}async function Ra(){var e,t,n,r,a;return(t=(e=window==null?void 0:window.ShopifyAnalytics)==null?void 0:e.lib)!=null&&t.trekkie||await new Promise(i=>{const o=setInterval(()=>{var d,l;(l=(d=window==null?void 0:window.ShopifyAnalytics)==null?void 0:d.lib)!=null&&l.trekkie&&(clearInterval(o),i())},100),s=setTimeout(()=>{clearInterval(o),clearTimeout(s),i()},7e3)}),(a=(r=(n=window.ShopifyAnalytics)==null?void 0:n.lib)==null?void 0:r.trekkie)==null?void 0:a.defaultAttributes}var L=(e=>(e.CartInitCalled="portable_wallets_cart_init_called",e.ClickSheetCancelled="portable_wallets_instrument_click_sheet_cancelled",e.ClickSheetFailed="portable_wallets_instrument_click_sheet_failure",e.ClickSheetSuccess="portable_wallets_instrument_click_sheet_success",e.SheetFailed="portable_wallets_instrument_sheet_failed",e.AuthorizationAttempt="portable_wallets_authorization_attempt",e.AuthorizationComplete="portable_wallets_authorization_complete",e.InitCalled="portable_wallets_init_called",e.InitFailed="portable_wallets_init_failed",e.InitSuccess="portable_wallets_init_success",e.UpdateFailed="portable_wallets_instrument_update_failed",e.InstrumentLoaded="portable_wallets_instrument_loaded",e.InstrumentLoadFailed="portable_wallets_instrument_load_failed",e))(L||{});const ka={[A.Checkout]:"bwp_checkout_widget_click",[A.CartAjax]:"bwp_cart_widget_click",[A.CartPage]:"bwp_cart_widget_click",[A.ProductPage]:"bwp_widget_click",[A.Unknown]:"bwp_widget_click"};function La({apiClientId:e,skus:t,pageType:n}){var r;if(!((r=window.Shopify)!=null&&r.analytics))return;const a=n&&ka[n]||"bwp_widget_click";window.Shopify.analytics.publish(a,{skus:t},{sendTo:e})}function Oa(){$({event:L.InitCalled})}function xa(e){var t,n;const r="error"in e?"failed":e.result,a="error"in e&&Qa(e.error)?"[".concat(e.error.name,"]: ").concat(e.error.code):"eventType"in e&&e.eventType||void 0;$({event:r==="success"?L.InitSuccess:L.InitFailed,eventSubtype:a}),I.counter({name:R.InitCompleted,value:1,attributes:{result:r,eventType:a,recoveredFailure:!!((n=(t=window.Shopify)==null?void 0:t.PaymentButton)!=null&&n.failedToLoad)}})}function Fa({instrumentOrComponentName:e,result:t,measurement:n}){$({event:t==="success"?L.InstrumentLoaded:L.InstrumentLoadFailed,instrumentId:e,ttl:n}),n!=null&&(I.histogram({name:R.InstrumentLoadTime,value:n,attributes:{instrument:e},unit:"ms"}),I.histogram({name:R.InstrumentLoadTimeFromPageLoad,value:window.performance.now(),attributes:{instrument:e},unit:"ms"}))}function Ma({instrument:e,measurement:t,result:n}){const r=n==="success"?ct.InstrumentSdkLoaded:ct.InstrumentSdkFailed;$({event:r,instrumentId:e,ttl:t,errorReason:n==="success"?void 0:n}),t!=null&&I.histogram({name:ct.InstrumentSdkLoaded,value:t,attributes:{instrument:e,result:n},unit:"ms"})}function Ua({instrument:e,result:t,reason:n}){const r=t==="success"?ct.InstrumentSdkEligible:ct.InstrumentSdkNotEligible;$({event:r,instrumentId:e}),I.counter({name:ct.InstrumentSdkEligible,value:1,attributes:{instrument:e,reason:n,result:t}})}function $a({instrument:e,reason:t}){I.counter({name:R.InstrumentLoadNotEligible,value:1,attributes:{instrument:e,reason:t}})}function Ba({instrument:e,result:t,checkoutToken:n,webPixelMetaData:r}){$({event:t==="success"?L.ClickSheetSuccess:L.ClickSheetFailed,checkoutToken:n,instrumentId:e}),I.counter({name:R.SheetClicked,value:1,attributes:{instrument:e,result:t}}),e===w.BuyWithPrime&&r&&La(r)}function Ha(e,t){$({event:"".concat(L.UpdateFailed,"-").concat(t),instrumentId:e})}function Ga(e){$({event:L.ClickSheetCancelled,instrumentId:e}),I.counter({name:R.SheetCancelled,value:1,attributes:{instrument:e}})}function za(e,t){$({event:L.SheetFailed,instrumentId:e,errorReason:t==null?void 0:t.message}),I.counter({name:R.SheetFailed,value:1,attributes:{instrument:e}})}function Va(e){$({event:L.AuthorizationAttempt,instrumentId:e}),I.counter({name:R.AuthorizationAttempt,value:1,attributes:{instrument:e}})}function qa({instrument:e,measurement:t,result:n}){$({event:L.AuthorizationComplete,eventSubtype:n,ttl:t,instrumentId:e}),t!=null&&I.histogram({name:R.AuthorizationComplete,value:t,attributes:{instrument:e,result:n},unit:"ms"})}function ja({instrument:e,reason:t}){I.counter({name:R.Decelerated,value:1,attributes:{instrument:e,reason:t}}),I.exportMetrics()}function Wa({reason:e}){I.counter({name:R.CartTokenMissing,value:1,attributes:{reason:e}})}function Ka(){I.counter({name:R.WalletConfigDeveloperError,value:1})}function Ya(){I.counter({name:R.LegacyCartCookie,value:1})}function Ja(){window.setInterval(()=>{I.exportMetrics()},1e3)}function Qa(e){return(e==null?void 0:e.name)===Lt.name}const b={initStarted:D(Oa),initCompleted:D(xa),instrumentLoaded:D(Fa),instrumentLoadNotEligible:D($a),instrumentSDKLoaded:D(Ma),instrumentSDKEligible:D(Ua),sheetClicked:D(Ba),sheetCancelled:D(Ga),sheetFailed:D(za),updateFailed:D(Ha),authorizationAttempt:D(Va),authorizationComplete:D(qa),startExporter:D(Ja),decelerated:D(ja),cartTokenMissing:D(Wa),walletConfigDeveloperError:D(Ka),legacyCartCookie:D(Ya)};function D(e){return(...t)=>{try{e(...t)}catch(n){f.notify(n)}}}function tt(e){const t=e===w.MetaPay?"MetaPay":e,n=new CustomEvent("acceleratedCheckoutStarted",{detail:{acceleratedCheckoutName:t}});document.dispatchEvent(n)}function Xa(e){const t=n=>{n.persisted&&(e(),window.removeEventListener("pageshow",t))};window.addEventListener("pageshow",t)}var h=(e=>(e.InvalidLanguage="Variable $language of type LanguageCode was provided invalid value",e.InvalidCountry="Variable $country of type CountryCode was provided invalid value",e.MissingCartId="Variable $cartId of type ID! was provided invalid value",e.BuyerIdentityInvalidCountry="Variable $buyerIdentity of type CartBuyerIdentityInput! was provided invalid value for countryCode",e.BuyerIdentityInvalidPhone="INVALID: buyerIdentity.phone",e.BuyerIdentityEmailRequired="BUYER_IDENTITY_EMAIL_REQUIRED",e.BuyerIdentityEmailDomainInvalid="BUYER_IDENTITY_EMAIL_DOMAIN_IS_INVALID",e.BuyerIdentityEmailNotExpectedPattern="BUYER_IDENTITY_EMAIL_DOES_NOT_MATCH_EXPECTED_PATTERN",e.BuyerIdentityEmailInvalid="INVALID: buyerIdentity.email",e.DeliveryFirstNameInvalid="DELIVERY_FIRST_NAME_INVALID",e.DeliveryFirstNameRequired="DELIVERY_FIRST_NAME_REQUIRED",e.DeliveryFirstNameContainsEmojis="ADDRESS_FIELD_CONTAINS_EMOJIS: buyerIdentity.deliveryAddressPreferences.0.deliveryAddress.firstName",e.DeliveryFirstNameTooLong="ADDRESS_FIELD_IS_TOO_LONG: buyerIdentity.deliveryAddressPreferences.0.deliveryAddress.firstName",e.DeliveryFirstNameContainsUrl="ADDRESS_FIELD_CONTAINS_URL: buyerIdentity.deliveryAddressPreferences.0.deliveryAddress.firstName",e.DeliveryFirstNameContainsHtmlTags="ADDRESS_FIELD_CONTAINS_HTML_TAGS: buyerIdentity.deliveryAddressPreferences.0.deliveryAddress.firstName",e.DeliveryLastNameInvalid="DELIVERY_LAST_NAME_INVALID",e.DeliveryLastNameRequired="DELIVERY_LAST_NAME_REQUIRED",e.DeliveryLastNameContainsEmojis="ADDRESS_FIELD_CONTAINS_EMOJIS: buyerIdentity.deliveryAddressPreferences.0.deliveryAddress.lastName",e.DeliveryLastNameTooLong="ADDRESS_FIELD_IS_TOO_LONG: buyerIdentity.deliveryAddressPreferences.0.deliveryAddress.lastName",e.DeliveryLastNameContainsUrl="ADDRESS_FIELD_CONTAINS_URL: buyerIdentity.deliveryAddressPreferences.0.deliveryAddress.lastName",e.DeliveryLastNameContainsHtmlTags="ADDRESS_FIELD_CONTAINS_HTML_TAGS: buyerIdentity.deliveryAddressPreferences.0.deliveryAddress.lastName",e.DeliveryAddress1Required="DELIVERY_ADDRESS1_REQUIRED",e.DeliveryAddress1Invalid="DELIVERY_ADDRESS1_INVALID",e.DeliveryAddress1TooLong="ADDRESS_FIELD_IS_TOO_LONG: buyerIdentity.deliveryAddressPreferences.0.deliveryAddress.address1",e.DeliveryAddress1ContainsHtmlTags="ADDRESS_FIELD_CONTAINS_HTML_TAGS: buyerIdentity.deliveryAddressPreferences.0.deliveryAddress.address1",e.DeliveryAddress1ContainsEmojis="ADDRESS_FIELD_CONTAINS_EMOJIS: buyerIdentity.deliveryAddressPreferences.0.deliveryAddress.address1",e.DeliveryAddress2Required="DELIVERY_ADDRESS2_REQUIRED",e.DeliveryAddress2Invalid="DELIVERY_ADDRESS2_INVALID",e.DeliveryAddress2TooLong="ADDRESS_FIELD_IS_TOO_LONG: buyerIdentity.deliveryAddressPreferences.0.deliveryAddress.address2",e.DeliveryAddress2ContainsHtmlTags="ADDRESS_FIELD_CONTAINS_HTML_TAGS: buyerIdentity.deliveryAddressPreferences.0.deliveryAddress.address2",e.DeliveryAddress2ContainsEmojis="ADDRESS_FIELD_CONTAINS_EMOJIS: buyerIdentity.deliveryAddressPreferences.0.deliveryAddress.address2",e.DeliveryAddress2AddressFieldRequired="ADDRESS_FIELD_IS_REQUIRED: buyerIdentity.deliveryAddressPreferences.0.deliveryAddress.address2",e.DeliveryCityRequired="DELIVERY_CITY_REQUIRED",e.DeliveryCityInvalid="DELIVERY_CITY_INVALID",e.DeliveryCityTooLong="ADDRESS_FIELD_IS_TOO_LONG: buyerIdentity.deliveryAddressPreferences.0.deliveryAddress.city",e.DeliveryCityContainsHtmlTags="ADDRESS_FIELD_CONTAINS_HTML_TAGS: buyerIdentity.deliveryAddressPreferences.0.deliveryAddress.city",e.DeliveryCityContainsEmojis="ADDRESS_FIELD_CONTAINS_EMOJIS: buyerIdentity.deliveryAddressPreferences.0.deliveryAddress.city",e.DeliveryCityAddressFieldRequired="ADDRESS_FIELD_IS_REQUIRED: buyerIdentity.deliveryAddressPreferences.0.deliveryAddress.city",e.DeliveryZoneNotFound="DELIVERY_ZONE_NOT_FOUND",e.DeliveryZoneRequiredForCountry="DELIVERY_ZONE_REQUIRED_FOR_COUNTRY",e.DeliveryPostalCodeInvalid="DELIVERY_POSTAL_CODE_INVALID",e.DeliveryInvalidPostalCodeForZone="DELIVERY_INVALID_POSTAL_CODE_FOR_ZONE",e.DeliveryInvalidPostalCodeForCountry="DELIVERY_INVALID_POSTAL_CODE_FOR_COUNTRY",e.DeliveryPostalCodeRequired="DELIVERY_POSTAL_CODE_REQUIRED",e.DeliveryZipInvalidForCountry="INVALID_ZIP_CODE_FOR_COUNTRY: buyerIdentity.deliveryAddressPreferences.0.deliveryAddress.zip",e.DeliveryPostalCodeContainsEmojis="ADDRESS_FIELD_CONTAINS_EMOJIS: buyerIdentity.deliveryAddressPreferences.0.deliveryAddress.zip",e.DeliveryPostalCodeAddressFieldRequired="ADDRESS_FIELD_IS_REQUIRED: buyerIdentity.deliveryAddressPreferences.0.deliveryAddress.zip",e.DeliveryCountryInvalid="INVALID: buyerIdentity.deliveryAddressPreferences.0.deliveryAddress.country",e.DeliveryPhoneNumberRequired="DELIVERY_PHONE_NUMBER_REQUIRED",e.DeliveryOptionsPhoneNumberRequired="DELIVERY_OPTIONS_PHONE_NUMBER_REQUIRED",e.DeliveryPhoneNumberInvalid="DELIVERY_PHONE_NUMBER_INVALID",e.DeliveryPhoneDoesNotMatchExpectedPattern="ADDRESS_FIELD_DOES_NOT_MATCH_EXPECTED_PATTERN: buyerIdentity.deliveryAddressPreferences.0.deliveryAddress.phone",e.MerchandiseOutOfStock="MERCHANDISE_OUT_OF_STOCK",e.InvalidQuantity="INVALID: input.lines.0.quantity",e.DeliveryOutOfStockAtOrigin="DELIVERY_OUT_OF_STOCK_AT_ORIGIN_LOCATION",e.DeliveryExternalPromiseUnfulfillable="DELIVERY_EXTERNAL_PROMISE_UNFULFILLABLE",e.MerchandiseVariantNotFound="MERCHANDISE_PRODUCT_VARIANT_NOT_FOUND",e.MerchandiseNotFound="MERCHANDISE_NOT_FOUND",e.MerchandiseNotPublished="MERCHANDISE_PRODUCT_NOT_PUBLISHED",e.MerchandiseNotSupportedForB2B="MERCHANDISE_SELLING_PLANS_NOT_SUPPORTED_FOR_B2B",e.MerchandiseBundleRequiresComponents="MERCHANDISE_BUNDLE_REQUIRES_COMPONENTS",e.MerchandiseGiftCardsNotSupported="MERCHANDISE_GIFT_CARDS_COMPONENTS_NOT_SUPPORTED",e.MerchandiseGiftCardGreaterThanZero="MERCHANDISE_GIFT_CARD_PRICE_MUST_BE_GREATER_THAN_ZERO",e.MerchandiseGiftCardCannotExceedLimit="MERCHANDISE_GIFT_CARD_PRICE_MUST_NOT_EXCEED_LIMIT",e.UnacceptablePaymentsAmount="PAYMENTS_UNACCEPTABLE_PAYMENT_AMOUNT",e.DeliveryNotAvailable="DELIVERY_NO_DELIVERY_AVAILABLE",e.DeliveryNoStrategyAvailable="DELIVERY_NO_DELIVERY_STRATEGY_AVAILABLE",e.DeliveryNoLocalPickupStrategyAvailable="DELIVERY_LOCAL_PICKUP_NO_DELIVERY_STRATEGY_AVAILABLE",e.DeliveryLineChanged="DELIVERY_DELIVERY_LINE_DETAIL_CHANGED",e.DeliveryLocalPickupLineChanged="DELIVERY_LOCAL_PICKUP_DELIVERY_LINE_DETAIL_CHANGED",e.DeliveryNoDeliveryAvailableForMerchandise="DELIVERY_NO_DELIVERY_STRATEGY_AVAILABLE_FOR_MERCHANDISE_LINE",e.DeliveryFulfillmentConstraintNotSatisfied="DELIVERY_MUST_FULFILL_FROM_CONSTRAINT_NOT_SATISFIED",e.DeliveryFulfillmentLocationConstraint="DELIVERY_MUST_FULFILL_FROM_SAME_LOCATION_CONSTRAINT_NOT_SATISFIED",e.PendingDeliveryGroups="PENDING_DELIVERY_GROUPS",e.InvalidPaymentAmount="INVALID_PAYMENT: payment.amount",e.NewTaxMustBeAccepted="TAX_NEW_TAX_MUST_BE_ACCEPTED",e.MerchandiseExpectedPriceMismatch="MERCHANDISE_EXPECTED_PRICE_MISMATCH",e.InvalidPaymentApplePayBillingAddress="INVALID_PAYMENT: payment.walletPaymentMethod.applePayWalletContent.billingAddress",e))(h||{});const Za=["DELIVERY_NO_DELIVERY_STRATEGY_AVAILABLE_FOR_MERCHANDISE_LINE","DELIVERY_OUT_OF_STOCK_AT_ORIGIN_LOCATION","DELIVERY_MUST_FULFILL_FROM_CONSTRAINT_NOT_SATISFIED","DELIVERY_MUST_FULFILL_FROM_SAME_LOCATION_CONSTRAINT_NOT_SATISFIED","DELIVERY_EXTERNAL_PROMISE_UNFULFILLABLE","MERCHANDISE_OUT_OF_STOCK","MERCHANDISE_PRODUCT_VARIANT_NOT_FOUND","MERCHANDISE_NOT_FOUND","MERCHANDISE_PRODUCT_NOT_PUBLISHED","MERCHANDISE_SELLING_PLANS_NOT_SUPPORTED_FOR_B2B","MERCHANDISE_BUNDLE_REQUIRES_COMPONENTS","MERCHANDISE_GIFT_CARDS_COMPONENTS_NOT_SUPPORTED","MERCHANDISE_GIFT_CARD_PRICE_MUST_BE_GREATER_THAN_ZERO","MERCHANDISE_GIFT_CARD_PRICE_MUST_NOT_EXCEED_LIMIT"];class ti extends Error{constructor(t){super("[".concat(t.name,"] ").concat(t.message)),this.stack=t.stack,this.name="HandleCreateCartError"}}async function et({element:e,instrumentName:t,dataSource:n}){try{const r=await n.getInitialCart(t),{cart:a,errors:i}=r;if(Xa(()=>{e&&(e.disabled=!1)}),!a||!a.id)throw new Error("[".concat(t,"] received invalid cart"));if(!a.checkoutUrl)throw new Error("[".concat(t,"] Created cart with no checkout URL"));const o=i.length===1&&i[0]===h.InvalidQuantity;if(i.length>0&&!o)throw new Error("Failed to create cart: ".concat(JSON.stringify(i)));const s=o&&a.lineItems.every(d=>d.quantity===0);return P(C({},r),{outOfStock:s})}catch(r){throw new ti(r)}finally{e.disabled=!1}}class ei extends ee{constructor(){super(),c(this,"anchor"),c(this,"i18n"),c(this,"dataSource"),c(this,"classNames"),c(this,"setI18n"),c(this,"setDataSource"),c(this,"setClassNames"),[this.i18n,this.setI18n]=G(),[this.dataSource,this.setDataSource]=G(),[this.classNames,this.setClassNames]=G()}static get observedAttributes(){return["disabled"]}connectedCallback(){this.anchor||this.render()}attributeChangedCallback(t,n,r){n!==r&&t==="disabled"&&this.anchor&&(r===""?this.anchor.setAttribute("aria-disabled","true"):this.anchor.removeAttribute("aria-disabled"),this.setAccessibilityAttributes())}async handleClick(t){if(t.preventDefault(),this.disabled||!this.anchor)return;this.disabled=!0;const[n,r]=await Promise.all([this.i18n,this.dataSource]);try{const{outOfStock:a,cart:i}=await et({element:this,instrumentName:w.MoreOptions,dataSource:r});if(a){Y(n);return}const o=this.recommendedInstrument===w.ShopPay?"skip_shop_pay":"allow_redirect";b.sheetClicked({instrument:w.MoreOptions,result:"success"}),tt(w.MoreOptions),Z(i.checkoutUrl,o)}catch(a){b.sheetClicked({instrument:w.MoreOptions,result:"failed"}),f.notify(a),ut(n.translate("error_dialogs.checkout.title"),n.translate("error_dialogs.checkout.generic_error"))}}async render(){const t=await this.i18n,n=await this.classNames;this.anchor=document.createElement("a"),this.anchor.textContent=t.translate("more_payment_options"),this.anchor.className=n,this.anchor.setAttribute("id","more-payment-options-link"),this.anchor.onclick=a=>this.handleClick(a),this.setAccessibilityAttributes(),this.appendChild(this.anchor);const r=document.createElement("style");r.textContent=Sa,this.appendChild(r)}setAccessibilityAttributes(){this.anchor&&(this.disabled?(this.anchor.removeAttribute("href"),this.anchor.role="link"):(this.anchor.removeAttribute("role"),this.anchor.href="#"))}}class kr extends HTMLElement{constructor(){super(),c(this,"i18n"),c(this,"apiClient"),c(this,"setI18n"),c(this,"setApiClient"),[this.i18n,this.setI18n]=G(),[this.apiClient,this.setApiClient]=G()}}const ri="#buyer-consent{margin-top:1em}#buyer-consent-button{background:none;border:none;padding:0;text-decoration:underline;font-size:inherit;cursor:pointer}#buyer-consent-button:before{box-shadow:none}";class Lr extends kr{connectedCallback(){this.innerHTML="",this.render()}async render(){const t=await this.i18n,n=await this.apiClient,r=document.createElement("p");r.setAttribute("id","buyer-consent");const a=document.createElement("buyer-consent-button");a.setI18n(t),a.setApiClient(n),r.innerHTML=t.translate("subscriptions.buyer_consent",{subscriptionPolicyLink:'<span id="subscription-policy-button"></span>'}),r.querySelector("#subscription-policy-button").appendChild(a);const i=document.createElement("style");i.textContent=ri;const o=new DocumentFragment;o.appendChild(i),o.appendChild(r),this.appendChild(o)}}class ni extends kr{constructor(){super(...arguments),c(this,"isFetchingPolicy",!1),c(this,"policy")}connectedCallback(){this.render()}async render(){const t=await this.i18n,n=Ot();n.setAttribute("id","buyer-consent-button"),n.textContent=t.translate("subscriptions.cancellation_policy"),n.onclick=this.onClick.bind(this),this.appendChild(n)}async onClick(t){t.preventDefault();const n=await this.i18n,r=await this.apiClient;if(!this.isFetchingPolicy){if(this.policy){this.showPolicy(this.policy,n);return}try{await this.fetchSubscriptionPolicy(r);const a=this.policy&&this.policy!==""?this.policy:n.translate("subscriptions.policy_not_found");this.showPolicy(a,n)}catch(a){f.notify(a),this.showPolicy(n.translate("subscriptions.policy_not_found"),n)}}}async fetchSubscriptionPolicy(t){this.isFetchingPolicy=!0,this.policy=await t.fetchSubscriptionPolicy(),this.isFetchingPolicy=!1}showPolicy(t,n){xe(n.translate("subscriptions.subscription_policy"),t)}}F("buyer-consent-button",ni,{isChildCustomElement:!0}),F("buyer-consent",Lr);var N=(e=>(e.ButtonDisplay="buttonDisplay",e.LoadInstrument="loadInstrument",e.LoadSdk="loadSDK",e.AuthorizationLatency="authorizationLatency",e))(N||{});function Or(){var e,t;return!!((e=window.performance)!=null&&e.mark)&&!!((t=window.performance)!=null&&t.measure)}function re(e,t){return xt(e,t),()=>K(e,t)}function xt(e,t){Or()&&window.performance.mark("".concat(e,"-").concat(t,"-start"))}function K(e,t){var n,r;if(Or())try{const a="".concat(e,"-").concat(t,"-start"),i="".concat(e,"-").concat(t,"-end"),o="".concat(e,"-").concat(t,"-duration");window.performance.mark(i);const s=(r=window.performance.measure(o,a,i))!=null?r:(n=window.performance.getEntriesByName(o,"measure"))==null?void 0:n[0],d=s==null?void 0:s.duration;if(d==null){f.notify(new er("Could not measure performance of ".concat(e," ").concat(t)),{severity:"warning"});return}return d}catch(a){a instanceof SyntaxError||f.notify(new er("An error occurred when attempting to measure benchmark duration ".concat(e," with context ").concat(t,": ").concat(a)));return}}class er extends Error{constructor(){super(...arguments),c(this,"name","BenchmarkError")}}function Fe(e,t,n){if(Dt!=null&&Dt.length){const r=Dt.join(",");e.querySelectorAll(r).forEach(a=>{n===null?a.removeAttribute(t):a.setAttribute(t,n)})}}function ai(e,t){try{const n=JSON.parse(e!=null?e:"[]");if(!(n instanceof Array))throw new Error("[".concat(t,"] invalid walletConfigs found"));return n}catch(n){throw new Error("[".concat(t,"] Error while parsing walletConfigs JSON: ").concat(n))}}function ii(e,t){try{return e?JSON.parse(e):null}catch(n){throw new Error("[".concat(t,"] Error while parsing walletConfig JSON: ").concat(n))}}function Me(e){var t;const n=e==null?void 0:e.getLoadEligibility();return n!=null&&n.eligible||b.instrumentLoadNotEligible({instrument:e==null?void 0:e.getInstrumentName(),reason:n==null?void 0:n.reason}),(t=n==null?void 0:n.eligible)!=null?t:!1}function oi(e){return e.filter(Me)}async function we({walletInstrument:e,instanceNumber:t}){const n=e.getInstrumentName(),r=re(N.LoadSdk,"".concat(n,":").concat(t));try{await e.loadWalletSDK(),b.instrumentSDKLoaded({instrument:n,measurement:r(),result:"success"})}catch(i){return f.notify(i),b.instrumentSDKLoaded({instrument:n,measurement:r(),result:"failed"}),null}let a;try{a=e.getPartnerSDKEligibility()}catch(i){f.notify(i),a={eligible:!1,reason:"uncaught exception"}}return a.eligible?(b.instrumentSDKEligible({instrument:n,result:"success"}),e):(b.instrumentSDKEligible({instrument:n,reason:a.reason,result:"failed"}),null)}class Ue extends ee{constructor(){super(...arguments),c(this,"name",null),c(this,"apiClient"),c(this,"i18n")}get shopId(){return this.getAttribute("shop-id")}get cartId(){return this.getAttribute("cart-id")}get walletConfigs(){return this.getAttribute("wallet-configs")}get recommendedWallet(){return this.getAttribute("recommended")}get fallbackWallet(){return this.getAttribute("fallback")}get variantParams(){var t;try{return JSON.parse((t=this.getAttribute("variant-params"))!=null?t:"[]")}catch(n){throw new Lt({code:"invalid-variant-params",message:"variant-params must be a valid JSON string. Received variant-params: ".concat(this.getAttribute("variant-params"),", received error: ").concat(n)})}}get styleExtractorDisabled(){return this.hasAttribute("disable-compat")}triggerLoadedEvent(){document.dispatchEvent(new Event("shopify:payment_button:loaded",{bubbles:!0,cancelable:!0}))}async attributeChangedCallback(t,n,r){n!==r&&Fe(this,t,r)}toggleBuyerConsent(t,n,r,a){if(this.hasSellingPlan){const o=document.createElement("buyer-consent");o.setI18n(r),o.setApiClient(n),a&&(o.slot=a),t.appendChild(o);return}const i=document.querySelector("buyer-consent");i&&t.contains(i)&&i.remove()}clearUI(){this.innerHTML=""}}F("buyer-consent",Lr,{isChildCustomElement:!0});const It=Element.prototype;function $e(e){const t=Be(e);return xr(t)}function xr(e){var t;const n=e==null?void 0:e.elements;if(!n)return null;const r=$t(n,"id");if(!r||isNaN(Number(r)))return null;const a=Number((t=$t(n,"quantity"))!=null?t:"1"),i="gid://shopify/ProductVariant/".concat(r),o=$t(n,"selling_plan"),s=o?"gid://shopify/SellingPlan/".concat(o):void 0,d=li(e);return{variantId:r,quantity:a,merchandiseId:i,sellingPlanId:s,lineItemProperties:d}}function Be(e){const t=rr(e,"[data-shopify='payment-button']")||document.querySelector("[data-shopify='payment-button']");return rr(t,"form")}function si(e){const t=e==null?void 0:e.elements;return t?!!$t(t,"selling_plan"):!1}function li(e){if(!e)return{};const t=document.querySelectorAll('[name^="properties"][form^="'.concat(CSS.escape(e.getAttribute("id")||""),'"]')),n=e.querySelectorAll('[name^="properties"]'),r=[...t,...n],a={};return r.forEach(i=>{const o=ci(i),s=di(i);o&&typeof s<"u"&&(a[o]=s)}),a}function ci(e){const t=e.getAttribute("name");if(t===null)return null;const n=t.indexOf("["),r=t.lastIndexOf("]");return n===-1||r===-1?null:t.substring(n+1,r)}function di(e){if(!(["radio","checkbox"].includes(e.type)&&!e.checked)&&!(e.value===""||typeof e.value>"u"))return e.value}function $t(e,t){var n;const r=e.namedItem(t);return r&&"value"in r&&(n=r.value)!=null?n:null}function rr(e,t){if(It.matches=It.matches||It.webkitMatchesSelector||It.msMatchesSelector||It.mozMatchesSelector,!e||e.matches(t))return e;let n=e;for(;n&&n!==document.body;)if(n=n.parentElement,n&&n.matches(t))return n;return null}class Fr{constructor(t,n){c(this,"addToCartMutationObserver"),c(this,"addToCartForm"),c(this,"addToCartButtons"),this.element=t,this.onFormChanged=n,this.addToCartMutationObserver=null,this.addToCartForm=null,this.addToCartButtons=[]}setupMutationObservers(){if(this.findAndSetAddToCartButtons(),!this.addToCartForm)return;this.syncComponentStateWithForm();const t=new MutationObserver(()=>this.reobserveOnFormChanges());this.addToCartMutationObserver=new MutationObserver(()=>this.syncComponentStateWithForm()),t.observe(this.addToCartForm,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),this.observeAddToCartButtons()}syncComponentStateWithForm(){if(!this.addToCartForm){this.onFormChanged({disabled:!0,hasSellingPlan:!1});return}const t=xr(this.addToCartForm),n=!!(this.addToCartButtons.length>0&&this.addToCartButtons.every(r=>r.hasAttribute("disabled")||r.getAttribute("aria-disabled")==="true"));this.onFormChanged({disabled:n||t===null,hasSellingPlan:si(this.addToCartForm),variantId:t==null?void 0:t.variantId,sellingPlanId:t==null?void 0:t.sellingPlanId})}observeAddToCartButtons(){this.addToCartButtons.forEach(t=>{this.addToCartMutationObserver.observe(t,{attributes:!0})})}reobserveOnFormChanges(){var t;(t=this.addToCartMutationObserver)==null||t.disconnect(),this.findAndSetAddToCartButtons(),this.observeAddToCartButtons(),this.syncComponentStateWithForm()}findAndSetAddToCartButtons(){this.addToCartForm=Be(this.element),this.addToCartForm&&(this.addToCartButtons=[...this.addToCartForm.querySelectorAll("[type=submit]")])}}function ui(e,t,n){try{const r=JSON.parse(e!=null?e:"{}"),a=JSON.parse(t!=null?t:JSON.stringify({name:"buy_it_now",wallet_params:{}}));if(r===null||Object.keys(r).length===0){if(!(a instanceof Object))throw new Error("[".concat(n,"] Invalid fallback wallet configs JSON"));return{recommendedWallet:null,fallbackWallet:a}}return{recommendedWallet:r,fallbackWallet:a}}catch(r){throw r instanceof SyntaxError?(b.walletConfigDeveloperError(),new Lt({code:"invalid-recommended-fallback-json",message:"recommended / fallback must be valid JSON"})):new Error("[".concat(n,"] Error while parsing recommended/fallback JSON: ").concat(r))}}const hi=".shopify-payment-button__button--hidden{visibility:hidden}.shopify-payment-button__button{height:var(--shopify-accelerated-checkout-button-block-size, 44px);min-height:var(--shopify-accelerated-checkout-button-block-size, 44px);border-radius:var(--shopify-accelerated-checkout-button-border-radius, 4px);width:100%;border:none;box-shadow:0 0 0 0 transparent;color:#fff;cursor:pointer;display:block;font-size:1em;font-weight:500;line-height:1;text-align:center;transition:background .2s ease-in-out}.shopify-payment-button__button[disabled]{opacity:.6;cursor:default}.shopify-payment-button__button--unbranded{background-color:#1990c6;padding:1em 2em}.shopify-payment-button__button--unbranded:hover:not([disabled]){background-color:#136f99}.shopify-payment-button__more-options{background:transparent;border:0 none;cursor:pointer;display:block;font-size:1em;margin-top:1em;text-align:center;text-decoration:underline;width:100%}.shopify-payment-button__more-options.shopify-payment-button__skeleton{height:auto!important;min-height:0!important;border-radius:4px!important;width:50%;margin-left:25%;margin-right:25%}.shopify-payment-button__more-options[disabled]{opacity:.6;cursor:default!important}.shopify-payment-button__button.shopify-payment-button__button--branded{display:flex;flex-direction:column;position:relative;z-index:1}.shopify-payment-button__button.shopify-payment-button__button--branded .shopify-cleanslate{flex:1!important;display:flex!important;flex-direction:column!important}.shopify-payment-button__button.button.loading{position:relative;color:transparent}.shopify-payment-button__button.button.loading>.loading-overlay__spinner{top:50%;left:50%;transform:translate(-50%,-50%);position:absolute;height:100%;display:flex;align-items:center}.shopify-payment-button__button.button.loading>.loading-overlay__spinner .spinner{width:-moz-fit-content;width:-webkit-fit-content;width:fit-content}.button.loading>.loading-overlay__spinner .path{stroke:#fff}.shopify-payment-button__button .loading-overlay__spinner{width:1.8rem;display:inline-block}.shopify-payment-button__button .spinner{animation:shopify-rotator 1.4s linear infinite}@keyframes shopify-rotator{0%{transform:rotate(0)}to{transform:rotate(270deg)}}.shopify-payment-button__button .path{stroke-dasharray:280;stroke-dashoffset:0;transform-origin:center;stroke:#121212;animation:shopify-dash 1.4s ease-in-out infinite}@media screen and (forced-colors: active){.shopify-payment-button__button .path{stroke:CanvasText}}@keyframes shopify-dash{0%{stroke-dashoffset:280}50%{stroke-dashoffset:75;transform:rotate(135deg)}to{stroke-dashoffset:280;transform:rotate(450deg)}}@keyframes acceleratedCheckoutLoadingSkeleton{50%{opacity:var(--shopify-accelerated-checkout-skeleton-animation-opacity-start, 1)}75%{opacity:var(--shopify-accelerated-checkout-skeleton-animation-opacity-end, .5)}to{opacity:var(--shopify-accelerated-checkout-skeleton-animation-opacity-start, 1)}}.shopify-payment-button__skeleton{animation:acceleratedCheckoutLoadingSkeleton var(--shopify-accelerated-checkout-skeleton-animation-duration, 4s) var(--shopify-accelerated-checkout-skeleton-animation-timing-function, ease) infinite;animation-delay:-.168s;background-color:var(--shopify-accelerated-checkout-skeleton-background-color, #dedede);box-sizing:border-box;text-decoration:none!important;height:var(--shopify-accelerated-checkout-button-block-size, inherit);min-height:var(--shopify-accelerated-checkout-button-block-size, inherit);border-radius:var(--shopify-accelerated-checkout-button-border-radius, inherit)}.shopify-payment-button__button{border-radius:0}",pi=".portable-wallet{height:var(--shopify-accelerated-checkout-button-block-size, 44px);min-height:var(--shopify-accelerated-checkout-button-block-size, 44px);border-radius:var(--shopify-accelerated-checkout-button-border-radius, 0px)}",mi=".portable-wallet{--gravity-button-height: var( --shopify-accelerated-checkout-button-block-size, 44px );--gravity-button-min-height: var( --shopify-accelerated-checkout-button-block-size, 44px );--gravity-button-border-radius: var( --shopify-accelerated-checkout-button-border-radius, 0px );--gravity-button-width: 100%}",yi=70;class Tt{constructor(t,n,r,a){c(this,"red"),c(this,"green"),c(this,"blue"),c(this,"opacity"),this.red=t||0,this.green=n||0,this.blue=r||0,this.opacity=typeof a>"u"?1:a}getLuminance(){const t=this.red&255,n=this.green&255,r=this.blue&255;return t*.2126+n*.7152+r*.0722}isDark(){return this.opacity===0?!1:this.getLuminance()/this.opacity<yi}blendWith(t,n){this.opacity=1-(1-t.opacity)*(1-n.opacity),this.red=this.blend(t.red,n.red,t,n),this.green=this.blend(t.green,n.green,t,n),this.blue=this.blend(t.blue,n.blue,t,n)}blend(t,n,r,a){return Math.round(t*r.opacity/this.opacity+n*a.opacity*(1-r.opacity)/this.opacity)}}function gi(e){const t=[...e];let n=new Tt(0,0,0,0),r=new Tt(255,255,255,1),a=t.shift();for(;a;)n.opacity>0&&a.opacity>0?(r=new Tt(0,0,0,0),r.blendWith(a,n)):a.opacity>0?r=a:r=n,n=r,a=t.shift();return r}const _e=new Tt(255,255,255,1);function fi(e){const t=[];let n=e;for(;n.parentElement;){n=n.parentElement;const r=window.getComputedStyle(n).backgroundColor,a=bi(r);if(r&&t.push(a),a.opacity===1)break}try{return gi(t.reverse())}catch(r){return f.notify(new Error("[BackgroundDetection] Failed to blend colors for element ".concat(e.outerHTML))),_e}}function bi(e){if(!e)return _e;try{const t=e.split("(")[1].split(")")[0].replace(" ","").split(",");return new Tt(Number(t[0]),Number(t[1]),Number(t[2]),typeof t[3]>"u"?1:Number(t[3]))}catch(t){f.notify(new Error("[BackgroundDetection] Failed to convert rgbString to array ".concat(e)))}return _e}class ht extends ee{constructor(){super(),c(this,"name",null),c(this,"i18n"),c(this,"dataSource"),c(this,"apiClient"),c(this,"classNames"),c(this,"extractedStyle"),c(this,"containerInstanceNumber"),c(this,"onRendered"),c(this,"setI18n"),c(this,"setDataSource"),c(this,"setApiClient"),c(this,"setClassNames"),c(this,"setExtractedStyle"),c(this,"setContainerInstanceNumber"),c(this,"parsedWalletParams"),this.onRendered=()=>{},[this.i18n,this.setI18n]=G(),[this.dataSource,this.setDataSource]=G(),[this.apiClient,this.setApiClient]=G(),[this.classNames,this.setClassNames]=G(),[this.extractedStyle,this.setExtractedStyle]=G(),[this.containerInstanceNumber,this.setContainerInstanceNumber]=G()}async cleanupOnFailure(t,n){var r;try{await t()}catch(a){f.notify(new wi("An error occurred requiring cleanup when attempting to a render the ".concat(n," instrument : ").concat(a)));const i=await this.containerInstanceNumber;b.instrumentLoaded({instrumentOrComponentName:n,result:"failed",measurement:K(N.ButtonDisplay,"".concat(n,":").concat(i))}),(r=this.parentElement)==null||r.remove()}}attributeChangedCallback(t,n,r,a){n!==r&&t==="disabled"&&a&&(r===""?(a.setAttribute("aria-disabled","true"),a.setAttribute("disabled","")):(a.removeAttribute("aria-disabled"),a.removeAttribute("disabled")))}get pageType(){return this.getAttribute("page-type")||A.Unknown}get buttonTheme(){return fi(this).isDark()?"LIGHT":"DARK"}get isCTA(){return this.hasAttribute("call-to-action")}get walletParams(){var t;if(this.parsedWalletParams===void 0)try{this.parsedWalletParams=JSON.parse((t=this.getAttribute("wallet-params"))!=null?t:"{}")}catch(n){throw new Error("Error while parsing wallet-params JSON: ".concat(n))}return this.parsedWalletParams}}class wi extends Error{constructor(){super(...arguments),c(this,"name","CleanupOnFailureError")}}class _i extends ht{constructor(){super(...arguments),c(this,"name",w.BuyItNow),c(this,"button",null)}static get observedAttributes(){return["disabled"]}connectedCallback(){this.cleanupOnFailure(this.render.bind(this),this.name)}attributeChangedCallback(t,n,r){super.attributeChangedCallback(t,n,r,this.button)}async handleClick(){if(this.disabled||!this.button||this.button.getAttribute("aria-disabled"))return;this.disabled=!0;const[t,n]=await Promise.all([this.i18n,this.dataSource]);try{const{outOfStock:r,cart:a}=await et({element:this,instrumentName:this.name,dataSource:n});if(b.sheetClicked({instrument:this.name,checkoutToken:Zt(a),result:"success"}),r){Y(t);return}tt(this.name),Z(a.checkoutUrl,"allow_redirect")}catch(r){f.notify(r),b.sheetClicked({instrument:this.name,result:"failed"}),ut(t.translate("error_dialogs.checkout.title"),t.translate("error_dialogs.checkout.generic_error"))}}async render(){var t;this.button||(this.button=Ot());const n=await this.classNames;this.button.textContent=(await this.i18n).translate("instruments_copy.checkout.buy_now"),this.button.className=n,this.disabled&&this.button.setAttribute("aria-disabled","true"),this.button.onclick=()=>this.handleClick(),this.appendChild(this.button),(t=this.onRendered)==null||t.call(this)}}function Ci(){const e=navigator.userAgent,t=e.indexOf("Android")>-1,n=e.indexOf("Chrome/")>-1,r=parseInt((/Chrome\/([0-9]+)/.exec(e)||["0","0"])[1],10);return t&&n&&r===114}class rt{constructor(t){c(this,"walletParams"),this.walletParams=t.wallet_params}static walletName(){throw new Error("Must define walletName for WalletInstrument subclass")}createWebComponent({walletContainer:t,dataSource:n,i18n:r,apiClient:a,containerInstanceNumber:i,classNames:o="",callToAction:s,pageType:d=A.ProductPage,extractedStyle:l="",slot:u="button",onRendered:p=()=>{}}){var m,y,g;const v=this.getWebComponentName();F(v,this.getWebComponentClass(),{isChildCustomElement:!0});const S=document.createElement(v),J={"access-token":(m=t.accessToken)!=null?m:"","buyer-country":(y=t.buyerCountry)!=null?y:"","buyer-currency":t.buyerCurrency,"wallet-params":JSON.stringify((g=this.walletParams)!=null?g:{}),"page-type":d,slot:u};try{t.disabled&&S.setAttribute("disabled",""),te(S,J),t.isShippingRequired&&S.setAttribute("requires-shipping",""),t.hasSellingPlan&&S.setAttribute("has-selling-plan","")}catch(nt){const At=nt;throw At.message.includes("setAttribute is not a function")&&Ci()?new Nr({message:At.message}):At}return s&&S.setAttribute("call-to-action",""),S.setDataSource(n),S.setApiClient(a),S.setI18n(r),S.setClassNames(o),S.setExtractedStyle(l),S.setContainerInstanceNumber(i),S.onRendered=p,S}loadWalletSDK(){return Promise.resolve()}getLoadEligibility(){return{eligible:!0}}getPartnerSDKEligibility(){return{eligible:!0}}}class Si extends rt{static walletName(){return"buy_it_now"}getWebComponentName(){return"shopify-buy-it-now-button"}getInstrumentName(){return w.BuyItNow}getWebComponentClass(){return _i}}const Ai="shopify-paypal-button[disabled]{opacity:.5;cursor:not-allowed}shopify-paypal-button div.paypal-buttons>iframe{z-index:auto!important;box-shadow:none}",Ei="::slotted(div){height:100%}";async function wt(e){const{cartClient:t,instrumentName:n}=e;try{if(!e.cartId)throw new Error("[".concat(n,"] provided no cart ID when updating buyer identity"));if(!t)throw new Error("[".concat(n,"] provided invalid cart client when updating buyer identity"));return await t.updateCartBuyerIdentity(e)}catch(r){throw b.updateFailed(n,"updateBuyerIdentity"),r}}async function He({cartId:e,totalAmount:t,paymentMethod:n,billingAddress:r,cartClient:a,instrumentName:i,abortSignal:o,hasSellingPlan:s,canUsePaymentMethodForFreeOrder:d}){try{if(!e)throw new Error("[".concat(i,"] provided no cart ID when updating payment"));if(!t)throw new Error("[".concat(i,"] provided no total amount when updating payment"));if(!n)throw new Error("[".concat(i,"] provided no apple pay wallet content when updating payment"));if(!a)throw new Error("[".concat(i,"] provided invalid cart client when updating payment"));const l={freePaymentMethod:{billingAddress:r}};return await a.updateCartPayment(e,C({amount:{amount:t.amount,currencyCode:t.currencyCode}},Number(t.amount)<=0&&!d&&!s?l:n),i,o)}catch(l){throw b.updateFailed(i,"updatePayment"),l}}function Mr({cart:e,buyerCurrency:t,instrumentName:n}){if(!e)return!1;const r=e.totalAmount.amount;if(!r||Number(r)===0||t.toUpperCase()===e.totalAmount.currencyCode.toUpperCase())return!1;const a=new URL(e.checkoutUrl);return a.searchParams.set(zn.CURRENCY_CHANGE,"true"),b.decelerated({instrument:n,reason:"currency_changed"}),Z(a.toString()),!0}function Ur(e){return window[$r(e)]}function $r(e){return"paypal-".concat(e.replace(/[^a-zA-Z0-9]/g,""))}function nr(e){if(!e)return null;const t=getComputedStyle(e).borderRadius;return t.includes("px")?parseInt(t,10):null}function Ce(e){if(!e)return null;const t=getComputedStyle(e).height;return t.includes("px")?parseInt(t,10):null}const de=25,ar=55;class vi extends ht{constructor(){super(),c(this,"name",w.PayPal),c(this,"abortController"),c(this,"cartId"),c(this,"sdkButtonsComponent"),c(this,"container",null),c(this,"resizeObserver",null),c(this,"buttonHeight"),c(this,"rendering",!1),c(this,"prevBorderRadius",0),c(this,"prevHeight",0),c(this,"_shadowRoot"),this._shadowRoot=this.attachShadow({mode:"closed"}),this.abortController=typeof AbortController=="function"&&new AbortController||null,this.resizeObserver=typeof ResizeObserver=="function"&&new ResizeObserver(()=>this.onResize())||null}connectedCallback(){this.cleanupOnFailure(this.render.bind(this),this.name)}async disconnectedCallback(){this.innerHTML="",this._shadowRoot.innerHTML="",await this.teardownPayPalButton(),this.resizeObserver&&this.resizeObserver.disconnect()}async teardownPayPalButton(){var t;try{await((t=this.sdkButtonsComponent)==null?void 0:t.close().catch(()=>{}))}catch(n){}finally{this.sdkButtonsComponent=void 0}}async onResize(){const t=nr(this.container),n=Ce(this.container),r=t!==null&&this.prevBorderRadius!==t||n!==null&&this.prevHeight!==n;!this.rendering&&r&&(await this.teardownPayPalButton(),this.container.innerHTML="",await this.cleanupOnFailure(()=>this.renderFromPayPalSDK(),this.name))}async render(){var t;const n=await this.extractedStyle,r=document.createElement("div");r.className=x.BUTTON;const a=document.createElement("style");a.innerHTML=Ai,this.appendChild(a);const i=document.createElement("style");i.innerHTML=[Ei,n].join("\n"),this._shadowRoot.appendChild(i),this._shadowRoot.appendChild(r),this.container=r,this.renderFromPayPalSDK(),(t=this.resizeObserver)==null||t.observe(this.container)}getHeight(){const t=Ce(this.container);return t?t>=de&&t<=ar?t:t<de?(console.debug("[PayPalButton] Container height is less than the minimum height of the PayPal button. Using the minimum height of 25px."),de):(console.debug("[PayPalButton] Container height is greater than the maximum height of the PayPal button. Using the maximum height of 55px."),ar):Bn}async renderFromPayPalSDK(){var t,n,r;if(!this.container)throw new Error("button container not set when attempting to render");this.rendering=!0;const a=this.walletParams.paymentIntent==="TOKENIZE",i=()=>this.createToken(this.apiClient);let o,s;a?s=i:o=i;const d=nr(this.container),l=this.getHeight();this.prevHeight=l;const u=await this.i18n,p={color:"gold",label:this.isCTA?"pay":"paypal",disableMaxWidth:!0,height:l,shape:"sharp"};d&&d>0&&(p.borderRadius=d,this.prevBorderRadius=d),this.sdkButtonsComponent=(n=(t=Ur(this.walletParams.sdkUrl))==null?void 0:t.Buttons)==null?void 0:n.call(t,{fundingSource:"paypal",style:p,createOrder:o,createBillingAgreement:s,onApprove:async m=>{await this.onApprove(m)},onCancel:()=>{var m;b.sheetCancelled(this.name),(m=this.abortController)==null||m.abort()},onClick:this.onClick.bind(this),onError:m=>{var y;if(m.message==="Window is closed, can not determine type"){b.sheetCancelled(this.name),(y=this.abortController)==null||y.abort();return}f.notify(m);const g=u.translate("brand.paypal");W(g,u)}}),await((r=this.sdkButtonsComponent)==null?void 0:r.render(this.container)),this.rendering=!1,this.onRendered()}async onClick(t,n){if(this.disabled)return n.reject();const r=this.getBoundingClientRect(),a=r.left+r.width/2,i=r.top+r.height/2,o=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1,clientX:a,clientY:i,screenX:window.screenX+a,screenY:window.screenY+i});this.dispatchEvent(o);const[s,d]=await Promise.all([this.dataSource,this.i18n]);try{const{outOfStock:l,cart:u}=await et({element:this,instrumentName:this.name,dataSource:s});return l?(Y(d),n.reject()):(tt(this.name),this.cartId=u.id,n.resolve())}catch(l){return l instanceof Error&&(b.sheetClicked({instrument:this.name,result:"failed"}),f.notify(l),ut(d.translate("error_dialogs.checkout.title"),d.translate("error_dialogs.checkout.generic_error"))),n.reject()}}async createToken(t){const n=await t;try{if(!this.cartId)throw new Error("cartId not found when creating token");const r=await n.paypalTokenCreate(this.cartId);return b.sheetClicked({instrument:this.name,result:"success"}),r}catch(r){throw b.sheetClicked({instrument:this.name,result:"failed"}),r}}async onApprove({orderID:t,payerID:n}){var r,a,i;try{if(b.authorizationAttempt(this.name),xt(N.AuthorizationLatency,this.name),!this.cartId)throw new Error("Cart not found");const o=await this.apiClient,s=await o.paypalBuyerDetailsFetch(t,this.cartId),{data:d}=await wt({cartId:this.cartId,cartClient:o,instrumentName:this.name,emailAddress:s.email,streetAddress:s.destinationAddress});if(!d)throw new Error("Cart not found");if(await He({abortSignal:(r=this.abortController)==null?void 0:r.signal,cartClient:o,cartId:d.id,instrumentName:w.PayPal,billingAddress:(a=s.billingAddress)!=null?a:s.destinationAddress,paymentMethod:{walletPaymentMethod:{paypalWalletContent:{billingAddress:(i=s.billingAddress)!=null?i:s.destinationAddress,email:s.email,expiresAt:s.expiresAt,payerId:n,token:t,acceptedSubscriptionTerms:!1,vaultingAgreement:!1,merchantId:this.walletParams.merchantId}}},canUsePaymentMethodForFreeOrder:!0,totalAmount:d.totalAmount}),Mr({cart:d,buyerCurrency:this.buyerCurrency,instrumentName:this.name}))return;b.authorizationComplete({instrument:this.name,result:"success",measurement:K(N.AuthorizationLatency,this.name)}),Z(d.checkoutUrl)}catch(o){throw b.authorizationComplete({instrument:this.name,result:"failure",measurement:K(N.AuthorizationLatency,this.name)}),o}}}const gt=class Ms extends rt{static walletName(){return"paypal"}constructor(t){super(t)}getWebComponentName(){return"shopify-paypal-button"}getInstrumentName(){return w.PayPal}getWebComponentClass(){return vi}loadWalletSDK(){let t=Ms.paypalSDKPromiseByUrl.get(this.walletParams.sdkUrl);if(t)return t;const n=document.createElement("script");return n.setAttribute("src",this.walletParams.sdkUrl),t=new Promise((r,a)=>{n.setAttribute("data-namespace",$r(this.walletParams.sdkUrl)),n.onload=()=>r(),n.onerror=i=>{Ms.paypalSDKPromiseByUrl.delete(this.walletParams.sdkUrl),document.body.removeChild(n),a(i)},document.body.appendChild(n)}),Ms.paypalSDKPromiseByUrl.set(this.walletParams.sdkUrl,t),t}getLoadEligibility(){return{eligible:!0}}getPartnerSDKEligibility(){var t,n;try{return(n=(t=Ur(this.walletParams.sdkUrl))==null?void 0:t.Buttons)!=null&&n.call(t).isEligible()?{eligible:!0}:{eligible:!1,reason:"PayPal SDK not eligible"}}catch(r){throw new Lt({code:"paypal-sdk-eligibility-check-failed",message:"PayPal SDK 'isEligible' method failed unexpectedly: ".concat(r)})}}};c(gt,"paypalSDKPromiseByUrl",new Map);let Se=gt;const Ii=".apple-pay-button{display:flex;align-items:center;justify-content:center;width:100%;padding:0!important;cursor:pointer;border:none}.apple-pay-button:hover:not(:disabled){filter:brightness(92%)}.apple-pay-button:disabled{opacity:.5;cursor:not-allowed}.apple-pay-button svg{height:100%;flex-shrink:0}.apple-pay--content{font-size:16px;font-family:San Francisco,sans-serif;width:100%;height:100%;flex-grow:1;display:flex;align-items:center;justify-content:center;white-space:pre}.apple-pay--light{background:#fff;color:#000}.apple-pay--light svg{fill:#000}.apple-pay--dark{background:#000;color:#fff}.apple-pay--dark svg{fill:#fff}",Ae={UK:"GB",JA:"JP"},Br=["AS","GU","MP","PR","VI"];Br.forEach(e=>{Ae[e]="US"});function Mt(e){var t,n;const r=e.countryCode,a={firstName:e.givenName||void 0,lastName:e.familyName||void 0,address1:(t=e==null?void 0:e.addressLines)==null?void 0:t[0],address2:((n=e==null?void 0:e.addressLines)==null?void 0:n[1])||void 0,city:e.locality||void 0,zip:e.postalCode||void 0,province:e.administrativeArea||e.subLocality||void 0,country:Pi(e.countryCode),phone:e.phoneNumber||void 0};return a.country==="HK"&&(a.zip=void 0,a.province=e.postalCode),r&&Br.includes(r)&&(a.province=r),a.lastName||(a.lastName=a.firstName),a}function Pi(e){if(!e)return"ZZ";const t=e.toUpperCase();return Object.keys(Ae).includes(t)?Ae[t]:t}function Hr(e,t){return e.map(n=>{var r;return{title:Ni(n,t),estimatedCost:{amount:Di(n),currencyCode:n[0].estimatedCost.currencyCode},handle:Ti(n),description:(r=n[0].description)!=null?r:""}})}function Gr(e){return e.map(t=>t.deliveryOptions.map(n=>P(C({},n),{groupType:t.groupType}))).reduce((t,n)=>t.flatMap(r=>n.map(a=>[...r,a])),[[]])}function Di(e){return e.reduce((t,n)=>t+Number(n.estimatedCost.amount),0).toFixed(2)}function Ni(e,t){var n,r;const a=(n=e.find(s=>s.groupType===Rt.OneTimePurchase))==null?void 0:n.title,i=(r=e.find(s=>s.groupType===Rt.Subscription))==null?void 0:r.title,o=[...new Set([a,i])].filter(Boolean);return o.length===2?t.translate("shipping_methods.connect_shipping_methods",{methodOne:o[0],methodTwo:o[1]}):o[0]}function Ti(e){return e.map(t=>t.handle).join(",")}function zr({deliveryGroups:e,i18n:t}){const n=e.some(r=>r.groupType===Rt.Subscription);return e.map(r=>{var a;let i=t.translate("order_summary.shipping");return n&&(i=r.groupType===Rt.Subscription?t.translate("order_summary.shipping_subscription"):t.translate("order_summary.shipping_one_time_purchase")),{label:i,amount:lt(((a=r.selectedDeliveryOption)==null?void 0:a.estimatedCost.amount)||0)}})}function Ri(e,t){return Nt({label:e,possibleLines:[t]})[0]}function ki({subtotal:e,deliveryGroups:t,duties:n,taxes:r,discountAllocations:a,i18n:i,formattedRecurringTotals:o}){var s;const d=Nt({label:i.translate("order_summary.subtotal"),possibleLines:[e]}),l=zr({deliveryGroups:t,i18n:i}),u=Nt({label:i.translate("order_summary.duties"),possibleLines:[n]}),p=Nt({label:i.translate("order_summary.taxes"),possibleLines:[r]}),m=o.map(v=>({label:v,amount:"0.00",type:"pending"})),y=m.length?[{label:i.translate("order_summary.subscriptions.recurring_total_tooltip_line"),amount:"0.00",type:"pending"}]:[],g=(s=a==null?void 0:a.flatMap(v=>{var S;const J=(S=v.title)!=null?S:v.code;return Nt({label:J!=null?J:i.translate("order_summary.discount"),possibleLines:[v.discountedAmount],isDiscount:!0})}))!=null?s:[];return[...d,...l,...u,...p,...g,...m,...y]}function Nt({label:e,possibleLines:t,isDiscount:n=!1}){return t.filter(r=>(r==null?void 0:r.amount)!==void 0).map(r=>({label:e,amount:n?"-".concat(lt(r.amount)):lt(r.amount)}))}function Li(e,t){if(!e.length)return[];const n=Gr(e);return Hr(n,t).map(r=>{var a;return{label:r.title||"",amount:r.estimatedCost.amount,identifier:r.handle,detail:(a=r.description)!=null?a:""}})}const ue=async({paymentSheetAction:e,onProceed:t,terminateSession:n})=>{switch(e.action){case"abort":n();break;case"show_error":await t(e.errors);break;case"update":await t(e.errors);break;default:throw new Error('Missing handler for payment sheet action "'.concat(e.action,'"'))}},Oi=["abort","show_error","complete","update"];class Vr extends Error{constructor(){super(...arguments),c(this,"name","UnhandledActionError")}}class qr{constructor(){c(this,"generatePrioritizedPaymentSheetAction",(t,n)=>{let r;const a=[],i=[],o=[],s=n.filter(l=>l!==h.UnacceptablePaymentsAmount).some(l=>t[l]!==void 0);for(const l of Object.keys(t))if(!(l===h.UnacceptablePaymentsAmount&&s)){const u=t[l]();u.effects&&i.push(...u.effects),u.action!=="complete"&&u.errors&&o.push(...u.errors),a.push(u)}const d=(l=>Oi.map(u=>l.find(p=>p.action===u)).find(u=>!!u))(a);return d&&(r=d,r.effects=i,r.action!=="complete"&&(r.errors=o)),r})}getMergedPaymentSheetAction({result:t,errorActions:n}){const r={};n.forEach(i=>{i.errors.forEach(o=>{t.errors.includes(o)&&(r[o]=i.generateAction)})});let a;for(const i of t.errors){const o=r[i];if(o){a=o();break}}return{firstPaymentSheetAction:a,prioritizedPaymentSheetAction:this.generatePrioritizedPaymentSheetAction(r,t.errors)}}getUnhandledErrors(t,n){const r=n.flatMap(a=>a.errors);return t.filter(a=>!r.includes(a))}}class xi extends qr{constructor(t){super(),this.i18n=t}mapMutationResultToPaymentSheetAction(t,n){var r;const a=this.mapCustomValidationFunctionErrorToAction(t.errors);if(a)return a;const i=this.getErrorActions(),o=t.errors,s=this.getUnhandledErrors(o,i);if(s.forEach(l=>{f.notify(new Vr("[".concat(w.ApplePay,"] mutation result error not handled: ").concat(l)))}),((r=t.data)==null?void 0:r.deliveryGroups.length)===0&&n!=null&&n.shippingRequired)return{action:"show_error",errors:[new ApplePayError("addressUnserviceable")]};const{firstPaymentSheetAction:d}=this.getMergedPaymentSheetAction({result:t,errorActions:i});return d||(s.length>0?{action:"abort"}:{action:"update",errors:[]})}mapCompletionResultToPaymentSheetAction(t){if(!t.data)throw new Error("[".concat(w.ApplePay,"] completion returned null result"));switch(t.data.__typename){case"SubmitSuccess":return{action:"complete",redirectUrl:t.data.redirectUrl};case"SubmitAlreadyAccepted":case"SubmitThrottled":case"SubmitFailed":{const n=this.mapCustomValidationFunctionErrorToAction(t.errors);if(n)return n;const r=this.getErrorActions(),a=t.errors;this.getUnhandledErrors(a,r).forEach(o=>{f.notify(new Error("[".concat(w.ApplePay,"] completion result error not handled: ").concat(o)))});const{prioritizedPaymentSheetAction:i}=this.getMergedPaymentSheetAction({result:t,errorActions:r});return i||{action:"abort"}}default:throw new Error("[".concat(w.ApplePay,"] unknown completion result type: ").concat(t.data.__typename))}}getErrorActions(){return[{errors:[h.InvalidLanguage],generateAction:()=>({action:"abort",effects:[()=>{f.notify(new Error("[".concat(w.ApplePay,"] mutation provided invalid language, aborting")))}]})},{errors:[h.InvalidCountry],generateAction:()=>({action:"abort",effects:[()=>{f.notify(new Error("[".concat(w.ApplePay,"] mutation provided invalid country, aborting")))}]})},{errors:[h.MissingCartId],generateAction:()=>({action:"abort",effects:[()=>{f.notify(new Error("[".concat(w.ApplePay,"] mutation provided invalid cart ID, aborting")))}]})},{errors:[h.UnacceptablePaymentsAmount],generateAction:()=>({action:"abort"})},{errors:[h.InvalidPaymentAmount],generateAction:()=>({action:"abort"})},{errors:[h.MerchandiseOutOfStock],generateAction:()=>({action:"abort"})},{errors:[h.DeliveryNotAvailable],generateAction:()=>({action:"show_error",errors:[new ApplePayError("addressUnserviceable")]})},{errors:[h.BuyerIdentityEmailRequired],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","emailAddress",this.i18n.translate("errors.missing.email"))]})},{errors:[h.DeliveryFirstNameRequired],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","name",this.i18n.translate("errors.missing.first_name"))]})},{errors:[h.DeliveryFirstNameInvalid],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","name",this.i18n.translate("errors.invalid.first_name"))]})},{errors:[h.DeliveryLastNameRequired],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","name",this.i18n.translate("errors.missing.last_name"))]})},{errors:[h.DeliveryLastNameInvalid],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","name",this.i18n.translate("errors.invalid.last_name"))]})},{errors:[h.DeliveryAddress1Required],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","addressLines",this.i18n.translate("errors.missing.address1"))]})},{errors:[h.DeliveryAddress1Invalid],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","addressLines",this.i18n.translate("errors.invalid.address1"))]})},{errors:[h.DeliveryAddress2Required,h.DeliveryAddress2AddressFieldRequired],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","addressLines",this.i18n.translate("errors.missing.address2"))]})},{errors:[h.DeliveryAddress2Invalid],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","addressLines",this.i18n.translate("errors.invalid.address2"))]})},{errors:[h.DeliveryCityRequired,h.DeliveryCityAddressFieldRequired],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","locality",this.i18n.translate("errors.missing.city"))]})},{errors:[h.DeliveryCityInvalid],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","locality",this.i18n.translate("errors.invalid.city"))]})},{errors:[h.DeliveryZoneRequiredForCountry],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","administrativeArea",this.i18n.translate("errors.missing.zone"))]})},{errors:[h.DeliveryZoneNotFound],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","administrativeArea",this.i18n.translate("errors.invalid.zone"))]})},{errors:[h.DeliveryPostalCodeRequired,h.DeliveryPostalCodeAddressFieldRequired],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","postalCode",this.i18n.translate("errors.missing.postal_code"))]})},{errors:[h.DeliveryPostalCodeInvalid,h.DeliveryInvalidPostalCodeForZone,h.DeliveryInvalidPostalCodeForCountry,h.DeliveryZipInvalidForCountry],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","postalCode",this.i18n.translate("errors.invalid.postal_code"))]})},{errors:[h.DeliveryPhoneNumberRequired],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","phoneNumber",this.i18n.translate("errors.missing.phone"))]})},{errors:[h.DeliveryPhoneNumberInvalid,h.BuyerIdentityInvalidPhone,h.DeliveryPhoneDoesNotMatchExpectedPattern],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","phoneNumber",this.i18n.translate("errors.invalid.phone"))]})},{errors:[h.BuyerIdentityInvalidCountry,h.DeliveryCountryInvalid],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","country",this.i18n.translate("errors.invalid.country"))]})},{errors:[h.InvalidPaymentApplePayBillingAddress],generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid")]})},{errors:[h.DeliveryLastNameContainsEmojis],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","name",this.i18n.translate("errors.emojis.last_name"))]})},{errors:[h.DeliveryFirstNameContainsEmojis],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","name",this.i18n.translate("errors.emojis.first_name"))]})},{errors:[h.DeliveryAddress1TooLong],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","addressLines",this.i18n.translate("errors.too_long.address1"))]})},{errors:[h.DeliveryAddress2TooLong],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","addressLines",this.i18n.translate("errors.too_long.address2"))]})},{errors:[h.DeliveryFirstNameTooLong],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","name",this.i18n.translate("errors.too_long.first_name"))]})},{errors:[h.DeliveryLastNameTooLong],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","name",this.i18n.translate("errors.too_long.last_name"))]})},{errors:[h.DeliveryCityTooLong],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","locality",this.i18n.translate("errors.too_long.city"))]})},{errors:[h.DeliveryFirstNameContainsUrl],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","name",this.i18n.translate("errors.url.first_name"))]})},{errors:[h.DeliveryLastNameContainsUrl],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","name",this.i18n.translate("errors.url.last_name"))]})},{errors:[h.DeliveryAddress1ContainsHtmlTags],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","addressLines",this.i18n.translate("errors.html_tags.address1"))]})},{errors:[h.DeliveryAddress2ContainsHtmlTags],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","addressLines",this.i18n.translate("errors.html_tags.address2"))]})},{errors:[h.DeliveryCityContainsHtmlTags],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","locality",this.i18n.translate("errors.html_tags.city"))]})},{errors:[h.DeliveryFirstNameContainsHtmlTags],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","name",this.i18n.translate("errors.html_tags.first_name"))]})},{errors:[h.DeliveryLastNameContainsHtmlTags],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","name",this.i18n.translate("errors.html_tags.last_name"))]})},{errors:[h.DeliveryCityContainsEmojis],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","locality",this.i18n.translate("errors.emojis.city"))]})},{errors:[h.DeliveryAddress1ContainsEmojis],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","addressLines",this.i18n.translate("errors.emojis.address1"))]})},{errors:[h.DeliveryAddress2ContainsEmojis],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","addressLines",this.i18n.translate("errors.emojis.address2"))]})},{errors:[h.DeliveryPostalCodeContainsEmojis],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","postalCode",this.i18n.translate("errors.emojis.postal_code"))]})},{errors:[h.BuyerIdentityEmailInvalid],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","emailAddress",this.i18n.translate("errors.invalid.email"))]})}]}mapCustomValidationFunctionErrorToAction(t){const n=t.find(r=>typeof r=="object"&&(r==null?void 0:r.code)===Ht);return n?{action:"abort",effects:[()=>{const r=this.i18n.translate("brand.apple_pay");xe(this.i18n.translate("error_dialogs.wallet.title",{wallet:r}),n.message)}]}:null}}const ir=["name","postalAddress"];function Fi({shippingRequired:e,walletParams:t,buyerCurrency:n}){const{phoneRequired:r,emailRequired:a}=t,i=[...a?["email"]:[],...r?["phone"]:[]],o=e?[...ir,...i]:i;return{countryCode:t.countryCode,currencyCode:n,merchantCapabilities:t.merchantCapabilities,supportedNetworks:t.supportedNetworks,total:{type:"pending",label:t.merchantName,amount:"1.00"},requiredBillingContactFields:ir,requiredShippingContactFields:o,shippingType:t.shippingType}}const Mi=e=>{const t=e.lineItems.flatMap(n=>n.discountAllocations);return[...e.discountCodes.filter(n=>n.applicable&&e.discountAllocations.findIndex(r=>r.code===n.code)===-1&&t.findIndex(r=>r.code===n.code)===-1).map(n=>({code:n.code,discountedAmount:{amount:"0",currencyCode:e.totalAmount.currencyCode}})),...e.discountAllocations,...t]},jr=e=>{const t=e.lineItems.reduce((n,r)=>n+Number(r.subtotalAmount.amount),0);return{amount:String(t),currencyCode:e.totalAmount.currencyCode}};function Ui(e,t){return e.reduce((n,r)=>{var a;if(!r.sellingPlanAllocation)return n;const{sellingPlanAllocation:{sellingPlan:i,priceAdjustments:o},quantity:s}=r;if(!i.recurringDeliveries||!i.billingPolicy)return n;const d=$i({billingPolicy:i.billingPolicy,i18n:t}),l=i.priceAdjustments[0].orderCount,u=o[0].price.currencyCode,p=or({price:Number(o[0].price.amount)*s,currencyCode:u,locale:t.locale});if(o.length===2){const m=o[1].price.currencyCode,y=or({price:Number((a=o[1])==null?void 0:a.price.amount)*s,currencyCode:m,locale:t.locale});return[...n,t.translate("order_summary.subscriptions.recurring_totals_with_policies",{count:l,fixedPrice:p,recurringPrice:y,interval:d})]}return[...n,t.translate("order_summary.subscriptions.recurring_totals",{fixedPrice:p,interval:d})]},[])}function or({price:e,currencyCode:t,locale:n}){return Intl.NumberFormat(n,{style:"currency",currency:t,currencyDisplay:"narrowSymbol"}).format(e)}function $i({billingPolicy:e,i18n:t}){const{interval:n,intervalCount:r}=e,a={YEAR:"order_summary.subscriptions.recurring_total_intervals.year",MONTH:"order_summary.subscriptions.recurring_total_intervals.month",WEEK:"order_summary.subscriptions.recurring_total_intervals.week",DAY:"order_summary.subscriptions.recurring_total_intervals.day"}[n];if(!a)throw new Error("Unknown selling plan interval provided: ".concat(n));return t.translate(a,{count:r})}const ne="GraphQL Client",sr=0,lr=3,Wr="An error occurred while fetching from the API. Review 'graphQLErrors' for details.",Kr="Response returned unexpected Content-Type:",Yr="An unknown error has occurred. The API did not return a data object or any errors in its response.",Ee={json:"application/json",multipart:"multipart/mixed"},cr="X-SDK-Variant",dr="X-SDK-Version",Bi="shopify-graphql-client",Hi="0.10.3",Jr=1e3,Gi=[429,503],Qr=/@(defer)\b/i,ur="\r\n",zi=/boundary="?([^=";]+)"?/i,hr=ur+ur;function X(e,t=ne){return e.startsWith("".concat(t))?e:"".concat(t,": ").concat(e)}function St(e){return e instanceof Error?e.message:JSON.stringify(e)}function Xr(e){return e instanceof Error&&e.cause?e.cause:void 0}function Zr(e){return e.flatMap(({errors:t})=>t!=null?t:[])}function tn({client:e,retries:t}){if(t!==void 0&&(typeof t!="number"||t<sr||t>lr))throw new Error("".concat(e,': The provided "retries" value (').concat(t,") is invalid - it cannot be less than ").concat(sr," or greater than ").concat(lr))}function k(e,t){return t&&(typeof t!="object"||Array.isArray(t)||typeof t=="object"&&Object.keys(t).length>0)?{[e]:t}:{}}function en(e,t){if(e.length===0)return t;const n={[e.pop()]:t};return e.length===0?n:en(e,n)}function rn(e,t){return Object.keys(t||{}).reduce((n,r)=>(typeof t[r]=="object"||Array.isArray(t[r]))&&e[r]?(n[r]=rn(e[r],t[r]),n):(n[r]=t[r],n),Array.isArray(e)?[...e]:C({},e))}function nn([e,...t]){return t.reduce(rn,C({},e))}function Vi({clientLogger:e,customFetchApi:t=fetch,client:n=ne,defaultRetryWaitTime:r=Jr,retriableCodes:a=Gi}){const i=async(o,s,d)=>{const l=s+1,u=d+1;let p;try{if(p=await t(...o),e({type:"HTTP-Response",content:{requestParams:o,response:p}}),!p.ok&&a.includes(p.status)&&l<=u)throw new Error;return p}catch(m){if(l<=u){const y=p==null?void 0:p.headers.get("Retry-After");return await qi(y?parseInt(y,10):r),e({type:"HTTP-Retry",content:{requestParams:o,lastResponse:p,retryAttempt:s,maxRetries:d}}),i(o,l,d)}throw new Error(X("".concat(d>0?"Attempted maximum number of ".concat(d," network retries. Last message - "):"").concat(St(m)),n))}};return i}async function qi(e){return new Promise(t=>setTimeout(t,e))}function ji({headers:e,url:t,customFetchApi:n=fetch,retries:r=0,logger:a}){tn({client:ne,retries:r});const i={headers:e,url:t,retries:r},o=Wi(a),s=Vi({customFetchApi:n,clientLogger:o,defaultRetryWaitTime:Jr}),d=Ki(s,i),l=Yi(d),u=ro(d);return{config:i,fetch:d,request:l,requestStream:u}}function Wi(e){return t=>{e&&e(t)}}async function an(e){const{errors:t,data:n,extensions:r}=await e.json();return C(C(C({},k("data",n)),k("extensions",r)),t||!n?{errors:P(C({networkStatusCode:e.status,message:X(t?Wr:Yr)},k("graphQLErrors",t)),{response:e})}:{})}function Ki(e,{url:t,headers:n,retries:r}){return async(a,i={})=>{const{variables:o,headers:s,url:d,retries:l}=i,u=JSON.stringify({query:a,variables:o});tn({client:ne,retries:l});const p=Object.entries(C(C({},n),s)).reduce((y,[g,v])=>(y[g]=Array.isArray(v)?v.join(", "):v.toString(),y),{});!p[cr]&&!p[dr]&&(p[cr]=Bi,p[dr]=Hi);const m=[d!=null?d:t,{method:"POST",headers:p,body:u}];return e(m,1,l!=null?l:r)}}function Yi(e){return async(...t)=>{if(Qr.test(t[0]))throw new Error(X("This operation will result in a streamable response - use requestStream() instead."));try{const n=await e(...t),{status:r,statusText:a}=n,i=n.headers.get("content-type")||"";return n.ok?i.includes(Ee.json)?an(n):{errors:{networkStatusCode:r,message:X("".concat(Kr," ").concat(i)),response:n}}:{errors:{networkStatusCode:r,message:X(a),response:n}}}catch(n){return{errors:{message:St(n)}}}}}function Ji(e){return pt(this,null,function*(){const t=new TextDecoder;if(e.body[Symbol.asyncIterator])try{for(var n=q(e.body),r,a,i;r=!(a=yield new V(n.next())).done;r=!1){const o=a.value;yield t.decode(o)}}catch(o){i=[o]}finally{try{r&&(a=n.return)&&(yield new V(a.call(n)))}finally{if(i)throw i[0]}}else{const o=e.body.getReader();let s;try{for(;!(s=yield new V(o.read())).done;)yield t.decode(s.value)}finally{o.cancel()}}})}function Qi(e,t){return{[Symbol.asyncIterator](){return pt(this,null,function*(){try{let o="";try{for(var n=q(e),r,a,i;r=!(a=yield new V(n.next())).done;r=!1){const s=a.value;if(o+=s,o.indexOf(t)>-1){const d=o.lastIndexOf(t),l=o.slice(0,d).split(t).filter(u=>u.trim().length>0).map(u=>u.slice(u.indexOf(hr)+hr.length).trim());l.length>0&&(yield l),o=o.slice(d+t.length),o.trim()==="--"&&(o="")}}}catch(s){i=[s]}finally{try{r&&(a=n.return)&&(yield new V(a.call(n)))}finally{if(i)throw i[0]}}}catch(o){throw new Error("Error occured while processing stream payload - ".concat(St(o)))}})}}}function Xi(e){return{[Symbol.asyncIterator](){return pt(this,null,function*(){const t=yield new V(an(e));yield P(C({},t),{hasNext:!1})})}}}function Zi(e){return e.map(t=>{try{return JSON.parse(t)}catch(n){throw new Error("Error in parsing multipart response - ".concat(St(n)))}}).map(t=>{const{data:n,incremental:r,hasNext:a,extensions:i,errors:o}=t;if(!r)return P(C(C({data:n||{}},k("errors",o)),k("extensions",i)),{hasNext:a});const s=r.map(({data:d,path:l,errors:u})=>C({data:d&&l?en(l,d):{}},k("errors",u)));return P(C({data:s.length===1?s[0].data:nn([...s.map(({data:d})=>d)])},k("errors",Zr(s))),{hasNext:a})})}function to(e,t){if(e.length>0)throw new Error(Wr,{cause:{graphQLErrors:e}});if(Object.keys(t).length===0)throw new Error(Yr)}function eo(e,t){var n;const r=(t!=null?t:"").match(zi),a="--".concat(r?r[1]:"-");if(!((n=e.body)!=null&&n.getReader)&&!e.body[Symbol.asyncIterator])throw new Error("API multipart response did not return an iterable body",{cause:e});const i=Ji(e);let o={},s;return{[Symbol.asyncIterator](){return pt(this,null,function*(){var d,l;try{let g=!0;try{for(var u=q(Qi(i,a)),p,m,y;p=!(m=yield new V(u.next())).done;p=!1){const v=m.value,S=Zi(v);s=(l=(d=S.find(nt=>nt.extensions))==null?void 0:d.extensions)!=null?l:s;const J=Zr(S);o=nn([o,...S.map(({data:nt})=>nt)]),g=S.slice(-1)[0].hasNext,to(J,o),yield P(C(C({},k("data",o)),k("extensions",s)),{hasNext:g})}}catch(v){y=[v]}finally{try{p&&(m=u.return)&&(yield new V(m.call(u)))}finally{if(y)throw y[0]}}if(g)throw new Error("Response stream terminated unexpectedly")}catch(g){const v=Xr(g);yield P(C(C({},k("data",o)),k("extensions",s)),{errors:P(C({message:X(St(g)),networkStatusCode:e.status},k("graphQLErrors",v==null?void 0:v.graphQLErrors)),{response:e}),hasNext:!1})}})}}}function ro(e){return async(...t)=>{if(!Qr.test(t[0]))throw new Error(X("This operation does not result in a streamable response - use request() instead."));try{const n=await e(...t),{statusText:r}=n;if(!n.ok)throw new Error(r,{cause:n});const a=n.headers.get("content-type")||"";switch(!0){case a.includes(Ee.json):return Xi(n);case a.includes(Ee.multipart):return eo(n,a);default:throw new Error("".concat(Kr," ").concat(a),{cause:n})}}catch(n){return{[Symbol.asyncIterator](){return pt(this,null,function*(){const r=Xr(n);yield{errors:C(C({message:X(St(n))},k("networkStatusCode",r==null?void 0:r.status)),k("response",r)),hasNext:!1}})}}}}}const no="mutation cartCreate($input:CartInput!$country:CountryCode$language:LanguageCode$withCarrierRates:Boolean=false)@inContext(country:$country language:$language){result:cartCreate(input:$input){...@defer(if:$withCarrierRates){cart{...CartParts}errors:userErrors{...on CartUserError{message field code}}}}}",ao="mutation cartBillingAddressUpdate($cartId:ID!$billingAddress:MailingAddressInput$country:CountryCode$language:LanguageCode$withCarrierRates:Boolean=false)@inContext(country:$country language:$language){result:cartBillingAddressUpdate(cartId:$cartId billingAddress:$billingAddress){...@defer(if:$withCarrierRates){cart{...CartParts}errors:userErrors{...on CartUserError{message field code}}}}}",io="mutation cartBuyerIdentityUpdate($cartId:ID!$buyerIdentity:CartBuyerIdentityInput!$country:CountryCode$language:LanguageCode$withCarrierRates:Boolean=false)@inContext(country:$country language:$language){result:cartBuyerIdentityUpdate(cartId:$cartId buyerIdentity:$buyerIdentity){...@defer(if:$withCarrierRates){cart{...CartParts}errors:userErrors{...on CartUserError{message field code}}}}}",oo="mutation cartSelectedDeliveryOptionsUpdate($cartId:ID!$selectedDeliveryOptions:[CartSelectedDeliveryOptionInput!]!$country:CountryCode=CA$language:LanguageCode=EN$withCarrierRates:Boolean=false)@inContext(country:$country language:$language){result:cartSelectedDeliveryOptionsUpdate(cartId:$cartId selectedDeliveryOptions:$selectedDeliveryOptions){...@defer(if:$withCarrierRates){cart{...CartParts}errors:userErrors{...on CartUserError{message field code}}}}}",so="mutation applePaySessionCreate($validationUrl:URL!){applePaySessionCreate(validationUrl:$validationUrl){...@defer{applePaySession{body}}}}",lo="mutation PayPalBuyerDetailsFetch($token:String!$cartId:ID){paypalBuyerDetailsFetch(token:$token cartId:$cartId){...@defer{paypalDetails{email expiresAt destinationAddress{...on MailingAddress{address1 address2 city company country firstName lastName phone province zip}}billingAddress{...on MailingAddress{address1 address2 city company country firstName lastName phone province zip}}}}}}",co="mutation PayPalTokenCreate($cartId:ID!){paypalTokenCreate(cartId:$cartId){...@defer{paypalToken{token}}}}",uo="query cartQuery($id:ID!$country:CountryCode$language:LanguageCode$withCarrierRates:Boolean=false)@inContext(country:$country language:$language){cart(id:$id){...@defer(if:$withCarrierRates){...CartParts}}}",ho="query subscriptionPolicyQuery($country:CountryCode$language:LanguageCode)@inContext(country:$country language:$language){shop{subscriptionPolicy(sanitized:true){body}}}",po="mutation cartPaymentUpdate($cartId:ID!$input:CartPaymentInput!$country:CountryCode$language:LanguageCode$withCarrierRates:Boolean=false)@inContext(country:$country language:$language){result:cartPaymentUpdate(cartId:$cartId payment:$input){...@defer(if:$withCarrierRates){cart{...CartParts}errors:userErrors{...on CartUserError{message field code}}}}}",he="fragment CartParts on Cart{id checkoutUrl buyerIdentity{deliveryAddressPreferences{...on MailingAddress{address1 address2 city province phone country firstName lastName zip}}}deliveryGroups(first:10 withCarrierRates:$withCarrierRates){edges{node{id groupType selectedDeliveryOption{code title description handle estimatedCost{amount currencyCode}}deliveryOptions{code title description estimatedCost{amount currencyCode}handle}}}}cost{subtotalAmount{amount currencyCode}totalAmount{amount currencyCode}totalTaxAmount{amount currencyCode}totalDutyAmount{amount currencyCode}}discountAllocations{discountedAmount{amount currencyCode}...on CartCodeDiscountAllocation{code}...on CartAutomaticDiscountAllocation{title}...on CartCustomDiscountAllocation{title}}discountCodes{code applicable}lines(first:10){edges{node{quantity cost{subtotalAmount{amount currencyCode}totalAmount{amount currencyCode}}discountAllocations{discountedAmount{amount currencyCode}...on CartCodeDiscountAllocation{code}...on CartAutomaticDiscountAllocation{title}...on CartCustomDiscountAllocation{title}}merchandise{...on ProductVariant{requiresShipping}}sellingPlanAllocation{priceAdjustments{price{amount currencyCode}}sellingPlan{billingPolicy{...on SellingPlanRecurringBillingPolicy{interval intervalCount}}priceAdjustments{orderCount}recurringDeliveries}}}}}}",mo="mutation cartSubmitForCompletion($cartId:ID!$attemptToken:String!$country:CountryCode$language:LanguageCode)@inContext(country:$country language:$language){cartSubmitForCompletion(cartId:$cartId attemptToken:$attemptToken){result{__typename ...on SubmitSuccess{redirectUrl}...on SubmitThrottled{pollAfterV2:pollAfter}...on SubmitFailed{errors{code message}}}errors:userErrors{...on CartUserError{code field message}}}}",yo="unstable";class mt extends Error{constructor(t="No response"){super(t),this.name="NoResponseError"}}class ae{constructor({accessToken:t,country:n,locale:r,apiVersion:a=yo,withCarrierRates:i=!1}){if(c(this,"OPERATION_NAME_REGEX",/[^ ]+ (\w+)/),c(this,"client"),c(this,"country"),c(this,"url"),c(this,"locale"),c(this,"withCarrierRates"),c(this,"lastValidCart"),!t)throw new Error("StorefrontApiClient constructed with no access token");if(!n)throw new Error("StorefrontApiClient constructed with no buyer country");if(!r)throw new Error("StorefrontApiClient constructed with no locale");this.country=n,this.locale=r,this.withCarrierRates=i,this.url="/api/".concat(a,"/graphql.json"),this.client=ji({headers:{"Content-Type":"application/json",Accept:"application/json","X-Shopify-Storefront-Access-Token":t,"X-SDK-Variant":"portable-wallets"},url:this.url,retries:0,logger:o=>{if(o.type==="HTTP-Response"){const[s,d]=o.content.requestParams;f.leaveBreadcrumb("POST: ".concat(s),{statusCode:o.content.response.status,statusText:o.content.response.statusText,url:s,method:d==null?void 0:d.method,headers:d==null?void 0:d.headers,body:d==null?void 0:d.body},"request")}}})}async createCart(t){var n,r,a,i,o,s,d;const l=await this.requestStream([no,he],{input:{lines:[{merchandiseId:t.merchandiseId,quantity:t.quantity,sellingPlanId:t.sellingPlanId,attributes:Object.entries((n=t.lineItemProperties)!=null?n:{}).map(([g,v])=>({key:g,value:v}))}],discountCodes:t.discountCodes,buyerIdentity:t.buyerIdentity},country:this.country,language:this.formatLanguage(this.locale)},{instrumentName:t.instrumentName,startingCheckout:!0});try{for(var u=q(l),p,m,y;p=!(m=await u.next()).done;p=!1){const g=m.value;g.errors&&this.onError(g.errors);const v=(a=(r=g.data)==null?void 0:r.result)==null?void 0:a.cart;if(v&&!g.hasNext)return(o=(i=g.data)==null?void 0:i.result)!=null&&o.errors&&this.onResultError((d=(s=g.data)==null?void 0:s.result)==null?void 0:d.errors),{data:this.parseCartResponse(v),errors:this.parseMutationErrors(g,"result")}}}catch(g){y=[g]}finally{try{p&&(m=u.return)&&await m.call(u)}finally{if(y)throw y[0]}}throw new mt("Cart create operation returned no response")}async updateCartBillingAddress(t){const{cartId:n,billingAddress:r,instrumentName:a}=t;return this.requestDeferredCart(ao,{cartId:n,billingAddress:r},{instrumentName:a})}async updateCartBuyerIdentity(t){const{cartId:n,emailAddress:r,streetAddress:a,countryCode:i,phone:o,preferences:s,instrumentName:d}=t;return this.requestDeferredCart(io,{cartId:n,buyerIdentity:{email:r,countryCode:i!=null?i:a==null?void 0:a.country,phone:o!=null?o:a==null?void 0:a.phone,deliveryAddressPreferences:a?[{deliveryAddressValidationStrategy:t.validateAddress?"STRICT":"COUNTRY_CODE_ONLY",deliveryAddress:a}]:[],preferences:s}},{instrumentName:d})}async updateSelectedDeliveryOptions(t,n,r,a){let i=n;const o=Date.now()+2e4;for(;Date.now()<o&&!(a!=null&&a.aborted);){const s=await this.requestDeferredCart(oo,{cartId:t,selectedDeliveryOptions:i},{instrumentName:r});if(!s.errors.some(l=>typeof l=="string"&&l.startsWith(h.PendingDeliveryGroups)))return s;const d=s.data.deliveryGroups.flatMap(l=>l.deliveryOptions.map(u=>({deliveryOptionHandle:u.handle,deliveryGroupId:l.id})));i=i.map(l=>{var u;return(u=d.find(p=>p.deliveryOptionHandle===l.deliveryOptionHandle))!=null?u:l})}throw new Error("Selected delivery options update operation timed out")}async applePaySessionCreate(t){var n,r,a;const i=await this.requestStream([so],{validationUrl:t.toString()},{instrumentName:w.ApplePay});try{for(var o=q(i),s,d,l;s=!(d=await o.next()).done;s=!1){const u=d.value;u.errors&&this.onError(u.errors);const p=(a=(r=(n=u.data)==null?void 0:n.applePaySessionCreate)==null?void 0:r.applePaySession)==null?void 0:a.body;if(p)return p}}catch(u){l=[u]}finally{try{s&&(d=o.return)&&await d.call(o)}finally{if(l)throw l[0]}}throw new mt("Apple Pay session create operation returned no response")}async paypalBuyerDetailsFetch(t,n){var r,a;const i=await this.requestStream([lo],{token:t,cartId:n},{instrumentName:w.PayPal});try{for(var o=q(i),s,d,l;s=!(d=await o.next()).done;s=!1){const u=d.value;if(u.hasNext)continue;u.errors&&this.onError(u.errors);const p=(a=(r=u.data)==null?void 0:r.paypalBuyerDetailsFetch)==null?void 0:a.paypalDetails;if(p)return p}}catch(u){l=[u]}finally{try{s&&(d=o.return)&&await d.call(o)}finally{if(l)throw l[0]}}throw new mt("PayPal buyer details fetch operation returned no response")}async paypalTokenCreate(t){var n,r,a;const i=await this.requestStream([co],{cartId:t},{instrumentName:w.PayPal});try{for(var o=q(i),s,d,l;s=!(d=await o.next()).done;s=!1){const u=d.value;u.errors&&this.onError(u.errors);const p=(a=(r=(n=u.data)==null?void 0:n.paypalTokenCreate)==null?void 0:r.paypalToken)==null?void 0:a.token;if(p)return p}}catch(u){l=[u]}finally{try{s&&(d=o.return)&&await d.call(o)}finally{if(l)throw l[0]}}throw new mt("PayPal token create operation returned no response")}async fetchCart({id:t,startingCheckout:n,instrumentName:r}){var a;const i=this.formatLanguage(this.locale),o=await this.requestStream([uo,he],{id:t,country:this.country,language:i,withCarrierRates:this.withCarrierRates},{instrumentName:r,startingCheckout:n});try{for(var s=q(o),d,l,u;d=!(l=await s.next()).done;d=!1){const p=l.value;p.errors&&this.onError(p.errors);const m=(a=p.data)==null?void 0:a.cart;if(f.leaveBreadcrumb("Fetch cart response",{body:m,hasNext:p.hasNext},"log"),m&&!p.hasNext){const y=this.parseCartResponse(m);return this.lastValidCart=y,y}}}catch(p){u=[p]}finally{try{d&&(l=s.return)&&await l.call(s)}finally{if(u)throw u[0]}}throw new mt("Cart fetch operation returned no response")}async updateCartPayment(t,n,r,a){var i,o;const s={cartId:t,input:n},{amount:d,currencyCode:l}=n.amount;let u;const p=Date.now()+1e4;for(;Date.now()<p&&!(a!=null&&a.aborted);){const m=await this.requestDeferredCart(po,s,{instrumentName:r});if(u||(u=m),m.errors.includes(h.InvalidPaymentAmount)){parseFloat((o=(i=m.data.totalTaxAmount)==null?void 0:i.amount)!=null?o:"0")===0&&await new Promise(y=>setTimeout(y,500)),s.input.amount={amount:m.data.totalAmount.amount,currencyCode:m.data.totalAmount.currencyCode};continue}return(m.data.totalAmount.amount===d||parseFloat(m.data.totalAmount.amount)<=parseFloat(d))&&m.data.totalAmount.currencyCode===l?m:u}throw new Error("Payment update operation timed out")}async submitForCompletion(t,n,r){var a,i;const o=this.formatLanguage(this.locale),s=await this.request([mo],{cartId:t,attemptToken:n,country:this.country,language:o,withCarrierRates:this.withCarrierRates},{instrumentName:r});return{data:(i=(a=s.data)==null?void 0:a.cartSubmitForCompletion)==null?void 0:i.result,errors:this.parseCompletionErrors(s)}}async fetchSubscriptionPolicy(){var t,n;const{data:r}=await this.request([ho],{country:this.country,language:this.formatLanguage(this.locale)},{});return(n=(t=r==null?void 0:r.shop)==null?void 0:t.subscriptionPolicy)==null?void 0:n.body}generateURLWithOperationName(t){const n=t.match(this.OPERATION_NAME_REGEX);if(n){const r=this.url.includes("?")?"&":"?",a="operation_name=".concat(n[1]);return"".concat(this.url).concat(r).concat(a)}return this.url}async request(t,n,r){return this.client.request(t.join(""),{variables:n,headers:pr(r),url:this.generateURLWithOperationName(t[0])})}async requestStream(t,n,r){return this.client.requestStream(t.join(""),{variables:n,headers:pr(r),url:this.generateURLWithOperationName(t[0])})}async requestDeferredCart(t,n,r){var a,i,o,s,d,l;const u=this.formatLanguage(this.locale),p=await this.requestStream([t,he],P(C({},n),{country:this.country,language:u,withCarrierRates:this.withCarrierRates}),r);try{for(var m=q(p),y,g,v;y=!(g=await m.next()).done;y=!1){const S=g.value;S.errors&&this.onError(S.errors);const J=(i=(a=S.data)==null?void 0:a.result)==null?void 0:i.cart;if(J&&!S.hasNext)return{data:await this.fetchCart({id:J.id,instrumentName:r.instrumentName,startingCheckout:!1}),errors:this.parseMutationErrors(S,"result")};if(this.lastValidCart&&(s=(o=S.data)==null?void 0:o.result)!=null&&s.errors)return this.onResultError((l=(d=S.data)==null?void 0:d.result)==null?void 0:l.errors),{data:this.lastValidCart,errors:this.parseMutationErrors(S,"result")}}}catch(S){v=[S]}finally{try{y&&(g=m.return)&&await g.call(m)}finally{if(v)throw v[0]}}throw new mt("Deferred cart operation returned no response")}onError(t){var n,r;if(!t)return;f.leaveBreadcrumb("GraphQL response error",t,"error");const a=(r=(n=t.graphQLErrors)==null?void 0:n.map(s=>s.message).join(", "))!=null?r:"",i="".concat(t.message).concat(a.length>0?" - ".concat(a):""),o=t!=null&&t.networkStatusCode?"with status ".concat(t.networkStatusCode," => ").concat(i):"=> ".concat(i);throw new Error("GraphQL mutation failed ".concat(o))}onResultError(t){f.leaveBreadcrumb("GraphQL result error",t,"error")}formatLanguage(t){return t.includes("-")?t.split("-")[0].toUpperCase():t.toUpperCase()}parseCartResponse(t){var n,r,a;const i=t.lines.edges.map(s=>{var d,l;const u=s.node;return{quantity:u.quantity,totalAmount:{amount:u.cost.totalAmount.amount,currencyCode:u.cost.totalAmount.currencyCode},subtotalAmount:{amount:(d=u.cost.subtotalAmount)==null?void 0:d.amount,currencyCode:(l=u.cost.subtotalAmount)==null?void 0:l.currencyCode},merchandise:{requiresShipping:u.merchandise.requiresShipping},discountAllocations:u.discountAllocations,sellingPlanAllocation:u.sellingPlanAllocation}}),o=t.deliveryGroups.edges.map(s=>s.node);return{id:t.id,totalAmount:t.cost.totalAmount,subtotalAmount:(n=t.cost.subtotalAmount)!=null?n:void 0,totalTaxAmount:(r=t.cost.totalTaxAmount)!=null?r:void 0,totalDutyAmount:(a=t.cost.totalDutyAmount)!=null?a:void 0,discountAllocations:t.discountAllocations,discountCodes:t.discountCodes,lineItems:i,deliveryGroups:o,checkoutUrl:t.checkoutUrl}}parseGraphQlErrors(t){var n,r;return(r=(n=t==null?void 0:t.graphQLErrors)==null?void 0:n.map(a=>a.message.replace(/\(Expected.*\)/,"").trim()))!=null?r:[]}parseMutationErrors(t,n){var r,a,i;const o=this.parseGraphQlErrors(t.errors),s=((i=(a=(r=t.data)==null?void 0:r[n])==null?void 0:a.errors)==null?void 0:i.map(l=>l.code===Ht?{code:Ht,message:l.message}:l.field&&l.field.length>0?"".concat(l.code,": ").concat(l.field.join(".")):l.code).filter(l=>l))||[],d=[...o,...s];return f.leaveBreadcrumb("GraphQL errors on mutation",d,"error"),d}parseCompletionErrors(t){var n,r,a,i;const o=this.parseGraphQlErrors(t.errors);let s=[];((a=(r=(n=t.data)==null?void 0:n.cartSubmitForCompletion)==null?void 0:r.result)==null?void 0:a.__typename)==="SubmitFailed"&&(s=(i=t.data.cartSubmitForCompletion.result.errors.map(l=>l.code))!=null?i:[]);const d=[...o,...s];return f.leaveBreadcrumb("GraphQL errors on completion",d,"error"),d}}function pr({instrumentName:e,startingCheckout:t}){const n={};return e&&(n["X-Wallet-Name"]="".concat(e)),t&&(n["X-Start-Wallet-Checkout"]="".concat(t)),n}async function on({cartId:e,cartClient:t,instrumentName:n,selectedDeliveryOptions:r,abortSignal:a}){try{if(!e)throw new Error("[".concat(n,"] provided no cart ID when updating shipping method"));if(!t)throw new Error("[".concat(n,"] provided invalid cart client when updating shipping method"));return await t.updateSelectedDeliveryOptions(e,r,n,a)}catch(i){throw b.updateFailed(n,"updateSelectedDeliveryOptions"),i}}async function sn({cartId:e,token:t,cartClient:n,instrumentName:r}){try{if(!e)throw new Error("[".concat(r,"] provided no cart ID when submitting for completion"));if(!n)throw new Error("[".concat(r,"] provided invalid cart client when submitting for completion"));if(!t)throw new Error("[".concat(r,"] provided no token when submitting for completion"));return await n.submitForCompletion(e,t,r)}catch(a){throw b.updateFailed(r,"submitForCompletion"),a}}function ln({selectedDeliveryOptionHandles:e,deliveryGroups:t,instrumentName:n}){return t.map(r=>{const a=r.deliveryOptions.filter(i=>e.includes(i.handle));if(!a.length)throw new Error("[".concat(n,"] could not find delivery option for group: ").concat(r.id));if(a.length>1)throw new Error("[".concat(n,"] found multiple delivery options with selectedDeliverOptionHandle in group: ").concat(r.id));return{deliveryGroupId:r.id,deliveryOptionHandle:a[0].handle}})}async function go(e){const{cartClient:t,instrumentName:n}=e;try{if(!e.cartId)throw new Error("[".concat(n,"] provided no cart ID when updating billing address"));if(!t)throw new Error("[".concat(n,"] provided invalid cart client when updating billing address"));return await t.updateCartBillingAddress(e)}catch(r){throw b.updateFailed(n,"updateBillingAddress"),r}}class fo{constructor({accessToken:t,buyerCountry:n,buyerCurrency:r,button:a,i18n:i,merchantName:o,dataSource:s,apiClient:d,walletParams:l}){c(this,"name",w.ApplePay),c(this,"accessToken"),c(this,"button"),c(this,"buyerCountry"),c(this,"cart"),c(this,"apiClient"),c(this,"dataSource"),c(this,"i18n"),c(this,"merchantName"),c(this,"session"),c(this,"paymentSheetActionGenerator"),c(this,"cancelled"),c(this,"buyerCurrency"),c(this,"customerAccountEmail"),c(this,"abortController",null),c(this,"onvalidatemerchant",async u=>{try{const p=new URL(u.validationURL),m=this.getMerchantSession(p),{cart:y,outOfStock:g}=await et({element:this.button,instrumentName:this.name,dataSource:this.dataSource});this.cart=y;const v=await m;if(f.leaveBreadcrumb("ApplePay Session completeMerchantValidation",{session:v},"log"),g){this.abortAndShowOutOfStockError();return}if(this.sessionIsCancelled())return;this.session.completeMerchantValidation(v)}catch(p){b.sheetClicked({instrument:w.ApplePay,result:"failed"}),this.terminateSession(p)}}),c(this,"onshippingcontactselected",async u=>{try{const p=Mt(u.shippingContact),m=await wt({cartId:this.cart.id,streetAddress:p,cartClient:this.apiClient,instrumentName:this.name});if(this.decelerateIfCurrencyChanged(m.data))return;await this.applyPaymentSheetActions(m,y=>this.completeShippingContactSelection(m.data,y),{shippingRequired:this.isShippingRequired})}catch(p){this.terminateSession(p)}}),c(this,"onshippingmethodselected",async u=>{var p;try{const m=u.shippingMethod.identifier.split(","),y=ln({selectedDeliveryOptionHandles:m,deliveryGroups:this.cart.deliveryGroups,instrumentName:this.name}),g=await on({cartId:this.cart.id,cartClient:this.apiClient,instrumentName:this.name,selectedDeliveryOptions:y,abortSignal:(p=this.abortController)==null?void 0:p.signal});await this.applyPaymentSheetActions(g,()=>this.completeShippingMethodSelection(g.data))}catch(m){this.terminateSession(m)}}),c(this,"onpaymentmethodselected",async u=>{try{const{billingContact:p}=u.paymentMethod;if(!this.isShippingRequired&&p){const g=Mt(p),v=await wt({cartId:this.cart.id,countryCode:g.country,cartClient:this.apiClient,instrumentName:this.name});if(this.decelerateIfCurrencyChanged(v.data))return;await this.applyPaymentSheetActions(v,()=>this.cart=v.data);const S=await go({billingAddress:g,cartId:this.cart.id,cartClient:this.apiClient,instrumentName:this.name});await this.applyPaymentSheetActions(S,()=>this.cart=S.data)}const{newTotal:m,newLineItems:y}=this.getNewTotalAndLineItems(this.cart);if(f.leaveBreadcrumb("ApplePay Session completePaymentMethodSelection",{newTotal:m,newLineItems:y},"log"),this.sessionIsCancelled())return;this.session.completePaymentMethodSelection({newTotal:m,newLineItems:y})}catch(p){this.terminateSession(p)}}),c(this,"oncancel",()=>{var u;this.cancelled=!0,b.sheetCancelled(this.name),this.button.disabled=!1,(u=this.abortController)==null||u.abort()}),c(this,"onpaymentauthorized",async u=>{b.authorizationAttempt(this.name),xt(N.AuthorizationLatency,this.name);const p=_=>{b.authorizationComplete({instrument:this.name,measurement:K(N.AuthorizationLatency,this.name),result:"failure"}),this.terminateSession(_)},m=async _=>{var M,B;switch((M=_.effects)==null||M.forEach(U=>U()),_.action){case"complete":{const U=ApplePaySession.STATUS_SUCCESS;try{await this.completePayment(U),Z(_.redirectUrl)}catch(z){p(z)}break}case"show_error":{const U=(B=_.errors)!=null?B:[];try{await this.completePayment(ApplePaySession.STATUS_FAILURE,U)}catch(z){p(z)}break}case"abort":{try{await this.completePayment(ApplePaySession.STATUS_FAILURE),this.button.disabled=!1}catch(U){p(U)}break}default:p(new Error("[".concat(this.name,"] completion action not handled: ").concat(_.action)))}},{token:y,billingContact:g,shippingContact:v}=u.payment;let S=null,J=null;try{if(!g){await this.completePayment(ApplePaySession.STATUS_FAILURE);return}if(S=Mt(P(C({},g),{phoneNumber:v==null?void 0:v.phoneNumber})),this.isShippingRequired){if(!v){await this.completePayment(ApplePaySession.STATUS_FAILURE);return}J=Mt(v)}}catch(_){p(_);return}const nt=async()=>{var _;try{const M=this.isShippingRequired?{validateAddress:!0,streetAddress:J}:{},B=(_=this.customerAccountEmail)!=null?_:v==null?void 0:v.emailAddress,U=await wt(C({cartId:this.cart.id,emailAddress:B,cartClient:this.apiClient,instrumentName:this.name},M)),z=this.paymentSheetActionGenerator.mapMutationResultToPaymentSheetAction(U);await ue({paymentSheetAction:z,onProceed:async Ft=>{Ft&&Ft.length>0?await this.completePayment(ApplePaySession.STATUS_FAILURE,Ft):await At()},terminateSession:p})}catch(M){p(M)}},At=async()=>{var _;try{const M=this.cart.lineItems.some(z=>!!z.sellingPlanAllocation),B=await He({cartId:this.cart.id,totalAmount:this.cart.totalAmount,paymentMethod:{walletPaymentMethod:{applePayWalletContent:{billingAddress:S,data:y.paymentData.data,header:y.paymentData.header,lastDigits:y.paymentMethod.displayName.split(" ")[1],signature:y.paymentData.signature,version:y.paymentData.version}}},canUsePaymentMethodForFreeOrder:!1,billingAddress:S,cartClient:this.apiClient,instrumentName:this.name,hasSellingPlan:M,abortSignal:(_=this.abortController)==null?void 0:_.signal}),U=this.paymentSheetActionGenerator.mapMutationResultToPaymentSheetAction(B);await ue({paymentSheetAction:U,onProceed:async z=>{z&&z.length>0?await this.completePayment(ApplePaySession.STATUS_FAILURE,z):await ie()},terminateSession:p})}catch(M){p(M)}},ie=async()=>{try{const _=await sn({cartId:this.cart.id,token:y.transactionIdentifier,cartClient:this.apiClient,instrumentName:this.name}),M=this.paymentSheetActionGenerator.mapCompletionResultToPaymentSheetAction(_);await m(M)}catch(_){p(_)}};await nt()}),c(this,"terminateSession",u=>{var p;this.button.disabled=!1,u&&f.notify(u),b.sheetFailed(this.name,u);try{f.leaveBreadcrumb("ApplePay Session abort",{},"log"),this.session.abort(),(p=this.abortController)==null||p.abort()}catch(m){f.notify(m)}if(u){const m=this.i18n.translate("brand.apple_pay");W(m,this.i18n)}}),c(this,"abortAndShowOutOfStockError",()=>{var u;this.session.abort(),(u=this.abortController)==null||u.abort(),Y(this.i18n)}),c(this,"getMostRecentNonNullCart",(u,p)=>u?(this.cart=u,u):p),c(this,"handleNullCart",u=>{if(!u)throw new Error("[".concat(this.name,"] no cart returned on mutation, aborting"))}),c(this,"completeShippingContactSelection",(u,p)=>{try{const m=this.getMostRecentNonNullCart(u,this.cart),{newTotal:y,newLineItems:g}=this.getNewTotalAndLineItems(m),v=Li(m.deliveryGroups,this.i18n);f.leaveBreadcrumb("ApplePay Session completeShippingContactSelection",{errors:p,newTotal:y,newLineItems:g,newShippingMethods:v},"log"),this.session.completeShippingContactSelection({errors:p!=null?p:[],newTotal:y,newLineItems:g,newShippingMethods:v})}catch(m){this.terminateSession(m)}}),c(this,"completeShippingMethodSelection",u=>{try{this.handleNullCart(u),this.cart=u;const{newTotal:p,newLineItems:m}=this.getNewTotalAndLineItems(u);f.leaveBreadcrumb("ApplePay Session completeShippingContactSelection",{newTotal:p,newLineItems:m},"log"),this.session.completeShippingMethodSelection({newTotal:p,newLineItems:m})}catch(p){this.terminateSession(p)}}),c(this,"sessionIsCancelled",()=>this.cancelled),this.accessToken=t,this.buyerCountry=n,this.button=a,this.cart=null,this.apiClient=d,this.dataSource=s,this.i18n=i,this.merchantName=o,this.cancelled=!1,this.buyerCurrency=r,this.customerAccountEmail=l.customerAccountEmail,this.session=new ApplePaySession(Pr,Fi({shippingRequired:this.isShippingRequired,walletParams:l,buyerCurrency:r})),this.session.onvalidatemerchant=this.onvalidatemerchant,this.session.onshippingcontactselected=this.onshippingcontactselected,this.session.onshippingmethodselected=this.onshippingmethodselected,this.session.onpaymentmethodselected=this.onpaymentmethodselected,this.session.oncancel=this.oncancel,this.session.onpaymentauthorized=this.onpaymentauthorized,this.paymentSheetActionGenerator=new xi(i)}begin(){f.leaveBreadcrumb("ApplePay Session begin",{},"log"),this.abortController=typeof AbortController=="function"&&new AbortController||null,this.session.begin()}async applyPaymentSheetActions(t,n,r){var a;const i=this.paymentSheetActionGenerator.mapMutationResultToPaymentSheetAction(t,r);(a=i.effects)==null||a.forEach(o=>o()),!this.sessionIsCancelled()&&await ue({paymentSheetAction:i,onProceed:n,terminateSession:this.terminateSession})}async getMerchantSession(t){const n=await new ae({accessToken:this.accessToken,country:this.buyerCountry,locale:this.i18n.locale,apiVersion:"unstable"}).applePaySessionCreate(t);return JSON.parse(n)}async completePayment(t,n=void 0){f.leaveBreadcrumb("ApplePay Session completePayment",{status:t,errors:n},"log"),this.session.completePayment({status:t,errors:n}),b.authorizationComplete({instrument:this.name,measurement:K(N.AuthorizationLatency,this.name),result:t===ApplePaySession.STATUS_SUCCESS?"success":"failure"})}getNewTotalAndLineItems(t){return{newTotal:Ri(this.merchantName,t.totalAmount),newLineItems:ki({subtotal:jr(t),discountAllocations:Mi(t),deliveryGroups:t.deliveryGroups,duties:t.totalDutyAmount,taxes:t.totalTaxAmount,i18n:this.i18n,formattedRecurringTotals:Ui(this.cart.lineItems,this.i18n)})}}decelerateIfCurrencyChanged(t){const n=t!=null?t:this.cart;return Mr({cart:n,buyerCurrency:this.buyerCurrency,instrumentName:this.name})?(this.terminateSession(),!0):!1}get isShippingRequired(){return this.button.isShippingRequired}}const bo='<svg viewBox="0 0 43 19" xmlns="http://www.w3.org/2000/svg" width="45px" style="width: 45px;">\n  <path d="M6.948 1.409C7.934.147 9.305.147 9.305.147s.193 1.18-.771 2.316c-1.05 1.2-2.228.993-2.228.993s-.236-.93.642-2.047zM3.82 3.663c-1.735 0-3.6 1.51-3.6 4.363 0 2.916 2.186 6.555 3.943 6.555.6 0 1.543-.6 2.485-.6.922 0 1.607.559 2.464.559 1.907 0 3.322-3.826 3.322-3.826s-2.015-.744-2.015-2.936c0-1.944 1.629-2.73 1.629-2.73s-.836-1.447-2.936-1.447c-1.22 0-2.164.661-2.656.661-.622.021-1.5-.6-2.636-.6zM19.64 1.426c2.453 0 4.188 1.788 4.188 4.396 0 2.608-1.755 4.417-4.248 4.417h-2.932v4.564h-1.974V1.426h4.966zm-2.992 7.067h2.473c1.695 0 2.693-.967 2.693-2.65 0-1.683-.978-2.671-2.693-2.671h-2.473v5.321zm7.559 3.429c0-1.767 1.296-2.777 3.65-2.945l2.572-.147v-.78c0-1.156-.738-1.787-1.994-1.787-1.037 0-1.795.568-1.955 1.43h-1.775c.06-1.788 1.656-3.092 3.79-3.092 2.333 0 3.829 1.304 3.829 3.281v6.9h-1.815v-1.684h-.04c-.519 1.094-1.715 1.788-3.012 1.788-1.934.021-3.25-1.178-3.25-2.965zm6.222-.905v-.778l-2.313.168c-1.297.084-1.975.59-1.975 1.494 0 .862.718 1.409 1.815 1.409 1.396-.021 2.473-.968 2.473-2.293zm3.969 7.383v-1.64c.14.041.438.041.598.041.897 0 1.416-.4 1.735-1.472l.14-.526L33.4 4.707h2.054l2.453 8.224h.04L40.4 4.707h1.994l-3.57 10.538c-.818 2.419-1.715 3.197-3.67 3.197-.14.02-.598-.021-.757-.042z"/>\n</svg>\n';function Ge({buttonContent:e,logoElement:t,setAriaHidden:n}){const r=document.createElement("div");return e.split(new RegExp("(".concat(Bt,")"))).filter(Boolean).forEach(a=>{let i;a===Bt?i=t:(i=document.createElement("span"),i.innerText=a,n&&i.setAttribute("aria-hidden","true")),r.appendChild(i)}),r}class wo extends ht{constructor(){super(),c(this,"name",w.ApplePay),c(this,"fragment",null),c(this,"button",null),c(this,"logoElement"),c(this,"_shadowRoot"),this._shadowRoot=this.attachShadow({mode:"closed"}),this.logoElement=new DOMParser().parseFromString(bo,"image/svg+xml").documentElement}static get observedAttributes(){return["disabled"]}get merchantName(){return this.walletParams.merchantName}connectedCallback(){this.cleanupOnFailure(this.render.bind(this),this.name)}attributeChangedCallback(t,n,r){super.attributeChangedCallback(t,n,r,this.button)}async handleClick(t){if(t.preventDefault(),this.disabled||!this.button||this.button.hasAttribute("aria-disabled"))return;this.disabled=!0;const[n,r,a]=await Promise.all([this.i18n,this.dataSource,this.apiClient]);let i;try{if(i=new fo({accessToken:this.accessToken,buyerCountry:this.buyerCountry,buyerCurrency:this.buyerCurrency,button:this,i18n:n,merchantName:this.merchantName,dataSource:r,apiClient:a,walletParams:this.walletParams}),!i)throw new Error("missing ApplePaySession");i.begin(),b.sheetClicked({instrument:this.name,result:"success"}),tt(this.name)}catch(o){f.notify(o),b.sheetClicked({instrument:this.name,result:"failed"}),i==null||i.terminateSession()}}async render(){var t;if(this.button||(this.button=Ot(),this.button.onclick=n=>this.handleClick(n),this.button.classList.add("apple-pay-button",$n[this.buttonTheme],x.BUTTON),await this.addBranding(this.button)),this.disabled&&(this.button.setAttribute("disabled",""),this.button.setAttribute("aria-disabled","true")),!this.fragment){this.fragment=document.createDocumentFragment();const n=await this.extractedStyle,r=document.createElement("style");r.innerHTML=[Ii,n].join("\n"),this.fragment.append(r,this.button),this._shadowRoot.appendChild(this.fragment),(t=this.onRendered)==null||t.call(this)}}async addBranding(t){const n=await this.i18n,r=n.translate("buy_with_button_content"),a=n.translate("brand.apple_pay");t.setAttribute("aria-label",this.isCTA?r.replace(Bt,a):a),t.appendChild(this.htmlContent(this.isCTA?r:null))}htmlContent(t){if(!t)return this.logoElement;const n=Ge({buttonContent:t,logoElement:this.logoElement,setAriaHidden:!0});return n.classList.add("apple-pay--content"),n}}function ze(e){return function(t,n,r){const a=r.value;return r.value=function(...i){const o=a.apply(this,i);return o.eligible||console.debug("[DEBUG] ".concat(e," could not be rendered. Reason: ").concat(o.reason)),o},r}}var _o=Object.defineProperty,Co=Object.getOwnPropertyDescriptor,cn=(e,t,n,r)=>{for(var a=Co(t,n),i=e.length-1,o;i>=0;i--)(o=e[i])&&(a=o(t,n,a)||a);return a&&_o(t,n,a),a};class Ve extends rt{constructor(t){super(t),c(this,"companyFieldRequired"),this.companyFieldRequired=!!this.walletParams.companyRequired}static walletName(){return"apple_pay"}getWebComponentName(){return"shopify-apple-pay-button"}getWebComponentClass(){return wo}getInstrumentName(){return w.ApplePay}applePayInIframe(){return typeof window>"u"||window.self!==window.top}getLoadEligibility(){return this.applePayInIframe()?{eligible:!1,reason:"cannot be loaded in an iframe"}:{eligible:!0}}getPartnerSDKEligibility(){var t,n,r,a;return typeof window>"u"||window.ApplePaySession===void 0?{eligible:!1,reason:"window or ApplePaySession is undefined"}:(n=(t=window.ApplePaySession).supportsVersion)!=null&&n.call(t,Pr)?(a=(r=window.ApplePaySession).canMakePayments)!=null&&a.call(r)?{eligible:!0}:{eligible:!1,reason:"failed SDK eligibility check"}:{eligible:!1,reason:"SDK does not meet minimum version requirement"}}}cn([ze("Apple Pay")],Ve.prototype,"getLoadEligibility"),cn([ze("Apple Pay")],Ve.prototype,"getPartnerSDKEligibility");const So=".buy-with-prime-button{width:100%;padding:12px 10px 8px;display:flex;align-items:center;justify-content:center;gap:5px;opacity:1;border-width:0px}.buy-with-prime-button:hover:enabled{background-color:#0684eb!important}.buy-with-prime-button:focus{box-shadow:0 0 0 2px #1a98ff,inset 0 0 0 2px rgb(var(--color-background))!important;outline:none!important}.buy-with-prime-button:active,.buy-with-prime-button:hover:enabled:active{background-color:#0066cd!important;box-shadow:none!important}";class zt extends Error{constructor(){super(...arguments),c(this,"name","MissingAccessTokenError")}}class qe extends Error{constructor(){super(...arguments),c(this,"name","FetchingWalletsPlatformConfigError")}}class dn extends Error{constructor(){super(...arguments),c(this,"name","EmptyLineItemsWalletsPlatformConfigError")}}async function un({configOptionsEndpoint:e,checkoutUrl:t,sourceId:n,accessToken:r,instrument:a}){try{const i=JSON.stringify({checkout_url:t,checkout_cancel_url:window.location.href,cart_id:n}),o=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json","X-Shopify-Storefront-Access-Token":r},body:i});if(o.ok)return o.json();const s=await o.json();throw s.error?new Error(s.error):new Error("Could not fetch wallets platform configs: [".concat(o.status,"] ").concat(o.statusText))}catch(i){const{message:o}=i!=null?i:{};switch(o){case"empty_line_items":throw new dn("[Fetch Pay Config][".concat(a,"] No eligible line items provided in the config request."));default:throw new qe("[Fetch Pay Config][".concat(a,"] ").concat(o))}}}const Ao={[A.Checkout]:"Checkout",[A.CartAjax]:"Cart",[A.CartPage]:"Cart",[A.ProductPage]:"Product",[A.Unknown]:"Product"},ft=class Us extends ht{constructor(){super(...arguments),c(this,"name",w.BuyWithPrime),c(this,"fragment",null),c(this,"button",null),c(this,"_shadowRoot",this.attachShadow({mode:"closed"}))}connectedCallback(){this.cleanupOnFailure(this.render.bind(this),this.name)}async createButton(){const{translate:t}=await this.i18n,n=Ot({label:t("brand.buy_with_prime")});return n.type="button",n.className="buy-with-prime-button",this.applyEnabledStyles(n),n}applyEnabledStyles(t){t.innerHTML=kt.primeLogo,t.disabled=!1,Ze(t,{"background-color":"#1A98FF",color:"#FFFFFF",cursor:"pointer"})}applyDisabledStyles(t){t.innerHTML=kt.primeLogoDark,t.disabled=!0,Ze(t,{"background-color":"#C0E3FF",color:"#7292AC",cursor:"not-allowed"})}async handleClick(){var t;if(!this.button)return;const[n,r]=await Promise.all([this.i18n,this.dataSource]);let a,i=[];try{this.applyDisabledStyles(this.button);let o=this.walletParams;if(a=o.appId,!o.createCheckoutSessionConfig){const{cart:s,outOfStock:d}=await et({element:this,instrumentName:this.name,dataSource:r});if(d){Y(n);return}if(!this.accessToken)throw new zt("[Fetch Pay Config] could not fetch pay configs since required accessToken is missing.");o=C({},await un({configOptionsEndpoint:Us.OPTIMUS_CONFIG_REST_API_URL,checkoutUrl:s.checkoutUrl,sourceId:(t=Zt(s))!=null?t:"",accessToken:this.accessToken,instrument:this.name}))}o.placement=this.pageType&&Ao[this.pageType]||"Other",i=this.extractSKUs(o),delete o.checkoutSupportsSplitCart,delete o.appId,window.amazon.buywithprime.initCheckout({amazonPayOptions:o}),b.sheetClicked({instrument:this.name,result:"success",webPixelMetaData:a?{apiClientId:a,skus:i,pageType:this.pageType}:void 0}),tt(this.name)}catch(o){const{name:s}=o!=null?o:{};Us.EXPECTED_ERRORS.includes(s)||f.notify(o),b.sheetClicked({instrument:this.name,result:"failed",webPixelMetaData:a?{apiClientId:a,skus:i,pageType:this.pageType}:void 0});const{title:d,content:l}=this.getErrorCopies(s,n);ut(d,l)}finally{this.applyEnabledStyles(this.button)}}getErrorCopies(t,n){const r=n.translate("brand.buy_with_prime");switch(t){case"EmptyLineItemsWalletsPlatformConfigError":return{title:n.translate("error_dialogs.wallet.buy_with_prime.empty_line_items.title"),content:n.translate("error_dialogs.wallet.buy_with_prime.empty_line_items.content")};default:return{title:n.translate("error_dialogs.wallet.title",{wallet:r}),content:n.translate("error_dialogs.wallet.generic_error",{wallet:r})}}}extractSKUs(t){var n;return(n=t.createCheckoutSessionConfig)!=null&&n.payloadJSON?JSON.parse(t.createCheckoutSessionConfig.payloadJSON).cartDetails.lineItems.map(r=>r&&r.sku).filter(r=>r):[]}async render(){var t;if(this.button||(this.button=await this.createButton(),this.button.onclick=()=>this.handleClick(),this.button.classList.add("buy-with-prime-button",x.BUTTON)),!this.fragment){const n=await this.extractedStyle;this.fragment=document.createDocumentFragment();const r=document.createElement("style");r.innerHTML=[So,n].join("\n"),this.fragment.append(r,this.button),this._shadowRoot.appendChild(this.fragment)}(t=this.onRendered)==null||t.call(this)}};c(ft,"OPTIMUS_CONFIG_REST_API_URL","".concat(window.location.origin,"/wallets/config/optimus")),c(ft,"EXPECTED_ERRORS",[qe.name,zt.name,dn.name]);let ve=ft;function hn(e,t=3,n=1e3,r=()=>!0){const a=()=>new Promise(o=>{setTimeout(o,n)}),i=async o=>{try{return await e()}catch(s){if(o>0&&r(s))return await a(),i(o-1);throw s}};return i(t-1)}async function pe(e){const t=e.createCheckoutSessionConfig,n=JSON.parse(t.payloadJSON),r=new URL(n.webCheckoutDetails.checkoutReviewReturnUrl),a=await(await fetch("https:///sandbox/v2/checkoutSessions",{method:"POST",body:JSON.stringify(e),headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"}})).json();r.searchParams.set("amazonCheckoutSessionId",a.checkoutSessionId||"testCheckoutSessionId"),r.searchParams.set("promiseId","testPromiseId"),Z(r.toString())}const pn={buywithprime:{initCheckout:async e=>{pe(e.amazonPayOptions)}},Pay:{initCheckout:async e=>{pe(e)},renderButton:()=>({initCheckout:pe,onClick:()=>{}})}};async function Eo(){return window.amazon=pn,"loaded"}async function vo(e){return new Promise((t,n)=>{if(document.querySelector('script[src="'.concat(e,'"]'))&&window.amazon){t();return}const r=document.createElement("script");r.src=e,r.onload=()=>{window.amazon?t():n(new Error("Amazon SDK not present after loading"))},r.onerror=()=>{n(new Error("Error loading Amazon SDK"))},document.head.append(r)})}async function mn({sdkUrl:e=ke,maxRetries:t=3,shouldMock:n=!1}){if(n){await Eo();return}await hn(()=>vo(e),t,200)}const j=class je extends rt{static walletName(){return"buy_with_prime"}constructor(t){super(t)}getWebComponentName(){return"shopify-buy-with-prime-button"}getInstrumentName(){return w.BuyWithPrime}isMockedAmazonServiceUsed(){return!1}getWebComponentClass(){return ve}async loadWalletSDK(){await mn({sdkUrl:je.SDK_URL,shouldMock:this.isMockedAmazonServiceUsed(),maxRetries:je.MAX_RETRIES}),await this.loadLogos()}async loadLogos(){await Promise.all([this.loadPrimeLogo(),this.loadPrimeLogoDark()])}async loadPrimeLogo(){je.primeLogo=(await import("./prime-logo-DoVHKBSO.js")).default}async loadPrimeLogoDark(){je.primeLogoDark=(await import("./prime-logo-dark-DJIA6J0w.js")).default}};c(j,"MAX_RETRIES",3),c(j,"SDK_URL",ke),c(j,"primeLogo"),c(j,"primeLogoDark");let kt=j;const Io=[qe.name,zt.name],mr="amazon-pay-slot",Wt=class Hs extends ht{constructor(){super(),c(this,"name",w.AmazonPay),c(this,"container",null),c(this,"_shadowRoot"),c(this,"containerId","PortableWalletsAmazonPayButtonContainer".concat(Date.now())),this._shadowRoot=this.attachShadow({mode:"closed"})}connectedCallback(){this.cleanupOnFailure(this.render.bind(this),this.name)}async handleClick(t){var n;const[r,a]=await Promise.all([this.i18n,this.dataSource]);try{const{cart:i,outOfStock:o}=await et({element:this,instrumentName:this.name,dataSource:a});if(o){Y(r);return}const{totalAmount:{amount:s},checkoutUrl:d}=i;let l=this.walletParams;if(!l.createCheckoutSessionConfig){if(!this.accessToken)throw new zt("[Fetch Pay Config] could not fetch pay configs since required accessToken is missing.");l=P(C({},await un({configOptionsEndpoint:Hs.CV2_CONFIG_REST_API_URL,checkoutUrl:d,sourceId:(n=Zt(i))!=null?n:"",accessToken:this.accessToken,instrument:this.name})),{placement:this.pageType===A.ProductPage?"Product":"Cart"})}delete l.appId,t.initCheckout(C(C({},l),Number(s)!==0&&{estimatedOrderAmount:{amount:s,currencyCode:this.buyerCurrency}})),b.sheetClicked({instrument:this.name,result:"success"}),tt(this.name)}catch(i){const{name:o}=i!=null?i:{};Io.includes(o)||f.notify(i),b.sheetClicked({instrument:this.name,result:"failed"});const s=r.translate("brand.amazon_pay");W(s,r)}}createContainer({height:t}){const n=document.createElement("div");return n.id=this.containerId,n.style.display="flex",t!=null&&(n.style.height="".concat(t,"px")),n.slot=mr,n.setAttribute("data-testid","amazon-pay-button"),n}async render(){var t;try{if(!this.container){const n=document.createElement("slot");n.name=mr;const r=await this.extractedStyle,a=document.createElement("style"),i=document.createElement("div");a.innerHTML=r,this._shadowRoot.appendChild(a),i.classList.add(x.BUTTON),i.style.overflow="hidden",i.appendChild(n),this._shadowRoot.appendChild(i);const o=Ce(i);this.container=this.createContainer({height:o}),this.appendChild(this.container);const s=window.amazon.Pay.renderButton("#".concat(this.containerId),P(C({},this.walletParams),{placement:this.pageType===A.ProductPage?"Product":"Cart"}));s==null||s.onClick(()=>this.handleClick(s)),(t=this.onRendered)==null||t.call(this)}}catch(n){f.notify(n)}}};c(Wt,"CV2_CONFIG_REST_API_URL","".concat(window.location.origin,"/wallets/config/amazon_pay"));let Ie=Wt;const bt=class Bs extends rt{static walletName(){return"amazon_pay"}constructor(t){super(t)}getWebComponentName(){return"shopify-amazon-pay-button"}getInstrumentName(){return w.AmazonPay}isMockedAmazonServiceUsed(){return!1}getWebComponentClass(){return Ie}async loadWalletSDK(){if(await mn({sdkUrl:Bs.SDK_URL,shouldMock:!1,maxRetries:Bs.MAX_RETRIES}),this.isMockedAmazonServiceUsed()){const t=window.amazon.Pay.renderButton;window.amazon.Pay.renderButton=(n,r)=>{const a=t(n,r);return a.initCheckout=pn.Pay.initCheckout,a}}}};c(bt,"MAX_RETRIES",3),c(bt,"SDK_URL",ke);let Pe=bt;var me={Purple:{D0:"#4524DB",D1:"#30368D",D2:"#1C234C",L0:"#6445ED",L1:"#9C83F8",L2:"#EEEAFF",L3:"#F7F5FF",Primary:"#5433EB",PrimaryLight:"#DBD1FF"},Grayscale:{Black:"#000000",D0:"#666666",D1:"#404040",D2:"#121212",D3:"#0B0B0C",D2D:"#2A2A2A",PrimaryLight:"#707070",L1:"#A8A8A7",L2:"#CBCBCA",L2L:"#E3E3E3",L3:"#F0F0F0",L4:"#F2F4F5",White:"#FFFFFF"},Green:{D1:"#008552",D2:"#004839",L1:"#BAEBCB",L2:"#D2F2DE",L3:"#E4F6EB",Primary:"#92D08D"},Poppy:{D0:"#F05D38",D1:"#D92A0F",D2:"#832711",L1:"#FFD2C2",L2:"#FFECE9",Primary:"#FF967D"},Ochre:{D0:"#F8DB67",D1:"#E3BE2B",D2:"#C29D05",D4:"#443600",L1:"#FFF4CB",L2:"#FFF9E2",Primary:"#FFEC9F"},Brand:{Aqua:"#8DC0C6",Lime:"#C7DE00",Magenta:"#D354FF",Olive:"#8B8F01",Sage:"#D8E59D",Sand:"#F4F4ED",Violet:"#A327C2"}},Po={0:0,none:0,xxxs:2,xxs:4,xs:8,"xs-s":12,s:16,gutter:20,m:24,l:32,section:36,xl:40,xxl:48,xxxl:64,auto:"auto"},Do=class extends HTMLElement{static get observedAttributes(){return["disabled"]}constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this._updateButton()}attributeChangedCallback(){this._updateButton()}_updateButton(){var e;let t=this.shadowRoot;t&&(t.innerHTML=To,this.hasAttribute("disabled")&&((e=this.shadowRoot.querySelector("button"))==null||e.setAttribute("disabled","")))}};function No(){window.customElements&&(customElements.get("gravity-button")||customElements.define("gravity-button",Do))}var To="\n<style>\n  * {\n    box-sizing: border-box;\n    border-width: 0;\n    border-style: solid;\n    border-color: currentColor;\n    --focused-box-shadow: 0 0 0 3px #DBD1FF, 0 0 #0000;\n  }\n\n  button {\n    text-transform: none;\n    -webkit-appearance: button;\n    background-color: transparent;\n    background-image: none;\n    font-family: inherit;\n    font-feature-settings: inherit;\n    font-variation-settings: inherit;\n    font-size: 100%;\n    font-weight: inherit;\n    line-height: inherit;\n    letter-spacing: inherit;\n    color: inherit;\n    margin: 0;\n    padding: 0;\n    cursor: pointer;\n  }\n\n  button:disabled {\n    cursor: default;\n    opacity: 0.5;\n  }\n\n  .gravity-button {\n    position: relative;\n    display: flex;\n    min-height: var(--gravity-button-min-height);\n    height: var(--gravity-button-height);\n    width: var(--gravity-button-width, 260px);\n    justify-content: center;\n    color: ".concat(me.Grayscale.White,";\n    align-items: center;\n    overflow: visible;\n    padding: var(--gravity-button-padding, ").concat(Po.s,"px 10px);\n    border-radius: var(--gravity-button-border-radius);\n    border: none;\n    background-color: ").concat(me.Purple.Primary,";\n    transition: all;\n  }\n\n  .gravity-button:not([disabled]):focus-visible {\n    box-shadow: var(--focused-base-box-shadow, var(--focused-box-shadow));\n    outline: var(--focused-base-outline, 2px solid transparent);\n    outline-offset: var(--focused-base-outline-offset, 2px);\n  }\n\n  .gravity-button:not([disabled]):hover {\n    background-color: ").concat(me.Purple.D0,';\n  }\n</style>\n\n<button class="gravity-button">\n  <slot id="button-content"></slot>\n</button>\n');const Ro=".button-content{display:flex;align-items:center;justify-content:center;width:100%;height:100%;gap:3px;white-space:nowrap;container-type:inline-size;container-name:bc}.ShopPromise>.separator{margin:0 8px}@container bc (width <= 338px){.ShopPromise{display:none!important}}gravity-button{display:block}";class yn extends Error{constructor(){const t="DeliveryEstimatesResponseIsNullError";super("deliveryEstimates is null or undefined"),this.name=t}}class ye extends Error{constructor(){const t="DeliveryPromiseAPIClientError";super("window.Shopify.ShopPromise.deliveryPromiseAPIClient is undefined"),this.name=t}}const ko=15,Lo=200;class Oo{constructor(t){c(this,"storefrontAPIToken"),this.storefrontAPIToken=t}async fetchDeliveryPromise({variant:t,postalCode:n,defaultPostalCode:r,sellingPlanId:a}){const i=await hn(async()=>this.fetchDeliveryOptions(t,n,r,a),ko,Lo,o=>o instanceof ye).catch(o=>{if(o instanceof ye)throw o;return null});if(!i)throw new yn;return i}async fetchDeliveryOptions(t,n,r,a){var i,o;const s={variantId:t,sellingPlanId:a,postalCode:n||r,isPostalCodeOverride:!!n},d=(o=(i=window==null?void 0:window.Shopify)==null?void 0:i.ShopPromise)==null?void 0:o.deliveryPromiseAPIClient;if(!d)throw new ye;return d(s,this.storefrontAPIToken)}}function xo(e,t){switch(e){case 0:return(t==null?void 0:t.translate("shop_promise_delivery.same_day"))||null;case 1:return(t==null?void 0:t.translate("shop_promise_delivery.next_day"))||null;case 2:return(t==null?void 0:t.translate("shop_promise_delivery.two_day"))||null;default:return null}}const Fo="delivery_promise_default_address",Mo="delivery_promise_postal_code";class Uo extends ee{constructor(){super(...arguments),c(this,"lastFetchedProductVariantId"),c(this,"lastFetchSellingPlan"),c(this,"fetching",!1),c(this,"i18n",null),c(this,"daysToDelivery"),c(this,"formObserver",null)}async connectedCallback(){this.formObserver=new Fr(this,({variantId:t,sellingPlanId:n})=>{this.fetchDeliveryPromise(t,n)}),this.formObserver.setupMutationObservers()}setTranslations(t){this.i18n=t,this.render()}get postalCode(){try{return JSON.parse(Q(Mo)||"null")||null}catch(t){return null}}get defaultDeliveryAddress(){try{return JSON.parse(Q(Fo)||"null")}catch(t){return null}}async fetchDeliveryPromise(t,n){var r,a,i,o;if(!(!t||!this.accessToken)&&!(t===this.lastFetchedProductVariantId&&n===this.lastFetchSellingPlan))try{this.lastFetchedProductVariantId=t,this.lastFetchSellingPlan=n;const s=((r=this.defaultDeliveryAddress)==null?void 0:r.zip)||"",d=await new Oo(this.accessToken).fetchDeliveryPromise({variant:t,postalCode:this.postalCode||"",defaultPostalCode:s,sellingPlanId:n||""}),l=$e(this),u=(i=(a=d==null?void 0:d.selectedShippingOption)==null?void 0:a.brandedPromise)==null?void 0:i.handle;if((l==null?void 0:l.sellingPlanId)!==n||(l==null?void 0:l.variantId)!==t||u!=="shop_promise")return;this.daysToDelivery=(o=d==null?void 0:d.selectedShippingOption)==null?void 0:o.maxCalendarDaysToDelivery,this.render()}catch(s){s instanceof yn&&(this.daysToDelivery=null)}}render(){const t=xo(this.daysToDelivery,this.i18n);this.classList.add("ShopPromise"),this.innerHTML=t?'<span class="separator">|</span><span>'.concat(t,"</span>"):""}}class $o extends ht{constructor(){super(),c(this,"name",w.ShopPay),c(this,"button",null),c(this,"shopPromiseProductPageContent",null),c(this,"shopPromiseEligible",!1),c(this,"_shadowRoot"),this._shadowRoot=this.attachShadow({mode:"closed"})}static get observedAttributes(){return["disabled"]}connectedCallback(){this.shopPromiseEligible=Rr(),this.cleanupOnFailure(async()=>{No(),await this.render()},this.name)}attributeChangedCallback(t,n,r){super.attributeChangedCallback(t,n,r,this.button)}async addButtonContent(){if(!this.button)return;const t=await this.i18n,n=t.translate("buy_with_button_content");let r;const a=new DOMParser().parseFromString(fn.shopPayLogoElement,"image/svg+xml").documentElement;this.isCTA?r=Ge({buttonContent:n,logoElement:a,setAriaHidden:!1}):(r=document.createElement("div"),r.appendChild(a)),r.classList.add("button-content"),this.shopPromiseEligible&&!this.shopPromiseProductPageContent&&(this.shopPromiseProductPageContent=document.createElement("shop-promise-product-page-content"),this.shopPromiseProductPageContent.setTranslations(t),this.shopPromiseProductPageContent.setAttribute("access-token",this.accessToken||""),r.appendChild(this.shopPromiseProductPageContent)),this.button.appendChild(r)}getShopPayBehavior(){return this.pageType===A.ProductPage?"force_shop_pay_product":this.pageType===A.CartPage?"force_shop_pay_cart":"force_shop_pay"}async handleClick(t){if(t.preventDefault(),this.disabled||!this.button||this.button.getAttribute("disabled"))return;this.disabled=!0;const[n,r]=await Promise.all([this.i18n,this.dataSource]);try{const{outOfStock:a,cart:i}=await et({element:this,instrumentName:w.ShopPay,dataSource:r});if(b.sheetClicked({instrument:this.name,checkoutToken:Zt(i),result:"success"}),a){Y(n);return}tt(this.name),Z(i.checkoutUrl,this.getShopPayBehavior())}catch(a){f.notify(new Bo("An error occurred when attempting to a cart using the Shop Pay Button. Details: ".concat(a))),b.sheetClicked({instrument:this.name,result:"failed"}),ut(n.translate("error_dialogs.checkout.title"),n.translate("error_dialogs.checkout.generic_error"))}}async render(){if(this._shadowRoot.innerHTML)return;this.button||(this.button=document.createElement("gravity-button"));const t=await this.extractedStyle,n=document.createElement("style");n.innerHTML=[Ro,t].join("\n"),this._shadowRoot.appendChild(n),await this.addButtonContent(),this.disabled&&this.button.setAttribute("disabled",""),this.button.setAttribute("aria-hidden","true"),this.button.classList.add(x.BUTTON),this.button.onclick=r=>this.handleClick(r),this._shadowRoot.appendChild(this.button),this.onRendered()}}F("shop-promise-product-page-content",Uo);class Bo extends Error{constructor(){super(...arguments),c(this,"name","ShopPayButtonError")}}var Ho=Object.defineProperty,Go=Object.getOwnPropertyDescriptor,zo=(e,t,n,r)=>{for(var a=Go(t,n),i=e.length-1,o;i>=0;i--)(o=e[i])&&(a=o(t,n,a)||a);return a&&Ho(t,n,a),a},_t;const gn=(_t=class extends rt{static walletName(){return"shop_pay"}constructor(e){super(e)}getWebComponentName(){return"shop-pay-wallet-button"}getWebComponentClass(){return $o}getInstrumentName(){return w.ShopPay}async loadWalletSDK(){await this.loadLogo()}getLoadEligibility(){return{eligible:!0}}async loadLogo(){_t.shopPayLogoElement=(await import("./shop-pay-logo-CYhOC7ye.js")).default}},c(_t,"shopPayLogoElement"),_t);zo([ze("Shop Pay")],gn.prototype,"getLoadEligibility");let fn=gn;const Vo=".button{display:flex;justify-content:center;align-items:center;width:100%;border:none}.button:hover:not(:disabled){filter:brightness(92%);cursor:pointer}.button:disabled{opacity:.5;cursor:not-allowed}.logo-only>svg{width:50px}.dark{background:#000;color:#fff}.dark svg{fill:#fff}.light{background:#fff;outline:1px solid #3c4043;color:#000}.light svg{fill:#0000008c}.content{display:flex;justify-content:center;align-items:center;white-space:pre}";function De({cart:e,i18n:t}){const n=jr(e),r={label:t.translate("order_summary.subtotal"),type:"SUBTOTAL",price:lt(n.amount)},a=zr({deliveryGroups:e.deliveryGroups,i18n:t}).map(s=>qo({lineItem:s,type:"LINE_ITEM"})),i=jo(e,t),o=[r,...a,...i];if(e.totalDutyAmount){const s={label:t.translate("order_summary.duties"),type:"LINE_ITEM",price:lt(e.totalDutyAmount.amount)};o.push(s)}if(e.totalTaxAmount){const s={label:t.translate("order_summary.taxes"),type:"TAX",price:lt(e.totalTaxAmount.amount)};o.push(s)}return{totalPrice:e.totalAmount.amount,currencyCode:e.totalAmount.currencyCode,totalPriceStatus:"ESTIMATED",totalPriceLabel:t.translate("order_summary.total"),displayItems:o}}function qo({lineItem:e,type:t,status:n="FINAL"}){return{label:e.label,type:t,price:e.amount,status:n}}function jo(e,t){return[...e.lineItems.flatMap(n=>n.discountAllocations),...e.discountAllocations].flatMap(n=>{var r;const a=(r=n.title)!=null?r:n.code;return{label:a!=null?a:t.translate("order_summary.discount"),type:"LINE_ITEM",price:"-".concat(lt(Number(n.discountedAmount.amount)))}})}const bn=["PAYMENT_AUTHORIZATION"],Wo=bn.concat(["SHIPPING_ADDRESS","SHIPPING_OPTION"]),Ko=["PAN_ONLY"];function Yo({cart:e,walletParams:t,isShippingRequired:n,hasSellingPlan:r,i18n:a}){const i=P(C({},t.paymentData),{shippingAddressRequired:n,shippingOptionRequired:n,transactionInfo:De({cart:e,i18n:a})});return n||delete i.shippingAddressParameters,i.callbackIntents=n?Wo:bn,r&&Jo(i),i}function Jo(e){e.allowedPaymentMethods.forEach(t=>{t.parameters.allowedAuthMethods=t.parameters.allowedAuthMethods.filter(n=>Ko.includes(n))})}class Qo extends qr{constructor(t){super(),c(this,"brandName"),this.i18n=t,this.brandName=this.i18n.translate("brand.google_pay")}mapMutationResultToPaymentSheetAction(t){const n=this.mapCustomValidationFunctionErrorToAction(t.errors);if(n)return n;const r=this.getErrorActions(),a=t.errors,i=this.getUnhandledErrors(a,r);i.forEach(s=>{f.notify(new Vr("[".concat(w.GooglePay,"] mutation result error not handled: ").concat(s)))});const{firstPaymentSheetAction:o}=this.getMergedPaymentSheetAction({result:t,errorActions:r});return o||(i.length>0?{action:"abort"}:{action:"update",errors:[]})}mapCompletionResultToPaymentSheetAction(t){if(!t.data)throw new Error("[".concat(w.GooglePay,"] completion returned null result"));switch(t.data.__typename){case"SubmitSuccess":return{action:"complete",redirectUrl:t.data.redirectUrl};case"SubmitAlreadyAccepted":case"SubmitThrottled":case"SubmitFailed":{const n=this.mapCustomValidationFunctionErrorToAction(t.errors);if(n)return n;const r=this.getErrorActions(),a=t.errors;this.getUnhandledErrors(a,r).forEach(o=>{f.notify(new Error("[".concat(w.GooglePay,"] completion result error not handled: ").concat(o)))});const{prioritizedPaymentSheetAction:i}=this.getMergedPaymentSheetAction({result:t,errorActions:r});return i||(W(this.brandName,this.i18n),{action:"abort"})}default:throw new Error("[".concat(w.GooglePay,"] unknown completion result type: ").concat(t.data.__typename))}}getErrorActions(){return[{errors:[h.InvalidLanguage],generateAction:()=>({action:"abort",effects:[()=>{f.notify(new Error("[".concat(w.GooglePay,"] mutation provided invalid language, aborting")))},()=>W(this.brandName,this.i18n)]})},{errors:[h.InvalidCountry],generateAction:()=>({action:"abort",effects:[()=>{f.notify(new Error("[".concat(w.GooglePay,"] mutation provided invalid country, aborting")))},()=>W(this.brandName,this.i18n)]})},{errors:[h.MissingCartId],generateAction:()=>({action:"abort",effects:[()=>{f.notify(new Error("[".concat(w.GooglePay,"] mutation provided invalid cart ID, aborting")))},()=>W(this.brandName,this.i18n)]})},{errors:[h.UnacceptablePaymentsAmount,h.InvalidPaymentAmount,h.MerchandiseOutOfStock,h.NewTaxMustBeAccepted,h.MerchandiseExpectedPriceMismatch,h.DeliveryLineChanged,h.DeliveryLocalPickupLineChanged],generateAction:()=>({action:"abort",effects:[()=>W(this.brandName,this.i18n)]})},{errors:Za,generateAction:()=>({action:"abort",effects:[()=>Y(this.i18n)]})},{errors:[h.DeliveryNoStrategyAvailable,h.DeliveryNoLocalPickupStrategyAvailable,h.DeliveryNotAvailable],generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_UNSERVICEABLE",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.invalid.shipping_address")}]})},{errors:[h.BuyerIdentityEmailDomainInvalid,h.BuyerIdentityEmailNotExpectedPattern,h.BuyerIdentityEmailInvalid],generateAction:()=>({action:"show_error",errors:[{reason:"OTHER_ERROR",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.invalid.email")}]})},{errors:[h.BuyerIdentityEmailRequired],generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.missing.email")}]})},{errors:[h.DeliveryAddress2Required,h.DeliveryAddress2AddressFieldRequired],generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.missing.address2")}]})},{errors:[h.DeliveryAddress2Invalid],generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.invalid.address2")}]})},{errors:[h.DeliveryCityAddressFieldRequired,h.DeliveryCityRequired],generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.missing.city")}]})},{errors:[h.DeliveryCityInvalid],generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.invalid.city")}]})},{errors:[h.DeliveryZoneRequiredForCountry],generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.missing.zone")}]})},{errors:[h.DeliveryZoneNotFound],generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.invalid.zone")}]})},{errors:[h.DeliveryPostalCodeRequired,h.DeliveryPostalCodeAddressFieldRequired],generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.missing.postal_code")}]})},{errors:[h.DeliveryPostalCodeInvalid,h.DeliveryInvalidPostalCodeForZone,h.DeliveryInvalidPostalCodeForCountry,h.DeliveryZipInvalidForCountry],generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.invalid.postal_code")}]})},{errors:[h.DeliveryPhoneNumberRequired],generateAction:()=>({action:"show_error",errors:[{reason:"OTHER_ERROR",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.missing.phone_number")}]})},{errors:[h.DeliveryPhoneNumberInvalid,h.BuyerIdentityInvalidPhone,h.DeliveryPhoneDoesNotMatchExpectedPattern],generateAction:()=>({action:"show_error",errors:[{reason:"OTHER_ERROR",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.invalid.phone_number")}]})},{errors:[h.BuyerIdentityInvalidCountry,h.DeliveryCountryInvalid],generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.invalid.country")}]})},{errors:[h.DeliveryFirstNameRequired],generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.missing.first_name")}]})},{errors:[h.DeliveryFirstNameInvalid],generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.invalid.first_name")}]})},{errors:[h.DeliveryLastNameRequired],generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.missing.last_name")}]})},{errors:[h.DeliveryLastNameInvalid],generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.invalid.last_name")}]})},{errors:[h.DeliveryAddress1Required],generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.missing.address1")}]})},{errors:[h.DeliveryAddress1Invalid],generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.invalid.address1")}]})},{errors:[h.DeliveryLastNameContainsEmojis],generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.emojis.last_name")}]})},{errors:[h.DeliveryCityContainsEmojis],generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.emojis.city")}]})},{errors:[h.DeliveryAddress1ContainsEmojis],generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.emojis.address1")}]})},{errors:[h.DeliveryAddress2ContainsEmojis],generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.emojis.address2")}]})},{errors:[h.DeliveryPostalCodeContainsEmojis],generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.emojis.postal_code")}]})},{errors:[h.DeliveryAddress1TooLong],generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.too_long.address1")}]})},{errors:[h.DeliveryAddress2TooLong],generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.too_long.address2")}]})},{errors:[h.DeliveryFirstNameTooLong],generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.too_long.first_name")}]})},{errors:[h.DeliveryLastNameTooLong],generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.too_long.last_name")}]})},{errors:[h.DeliveryCityTooLong],generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.too_long.city")}]})},{errors:[h.DeliveryFirstNameContainsUrl],generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.url.first_name")}]})},{errors:[h.DeliveryLastNameContainsUrl],generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.url.last_name")}]})},{errors:[h.DeliveryAddress1ContainsHtmlTags],generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.html_tags.address1")}]})},{errors:[h.DeliveryAddress2ContainsHtmlTags],generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.html_tags.address2")}]})},{errors:[h.DeliveryCityContainsHtmlTags],generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.html_tags.city")}]})},{errors:[h.DeliveryFirstNameContainsHtmlTags],generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.html_tags.first_name")}]})},{errors:[h.DeliveryLastNameContainsHtmlTags],generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.html_tags.last_name")}]})}]}mapCustomValidationFunctionErrorToAction(t){const n=t.find(r=>typeof r=="object"&&(r==null?void 0:r.code)===Ht);return n?(f.notify(new Error("[".concat(w.GooglePay,"] custom validation function error: ").concat(t))),xe(this.i18n.translate("error_dialogs.wallet.title",{wallet:this.brandName}),n.message),{action:"show_error",errors:[{reason:"OTHER_ERROR",intent:"PAYMENT_AUTHORIZATION",message:this.i18n.translate("paymentSheet.errors.unknown")}]}):null}}function Xo({deliveryGroups:e,i18n:t}){var n;const r=Hr(Gr(e),t),a=r.map(o=>({id:o.handle,label:o.title||"",description:o.estimatedCost?"".concat(o.estimatedCost.amount.toString()," ").concat(o.estimatedCost.currencyCode):""})),i=(n=r.find(o=>{var s;return o.handle.includes(((s=e[0].selectedDeliveryOption)==null?void 0:s.handle)||"")}))==null?void 0:n.handle;return{shippingOptions:a,defaultSelectedOptionId:i}}function ge(e){let t=e.administrativeArea,n=e.locality;e.countryCode==="AE"&&(n=e.administrativeArea,e.administrativeArea in yr&&(t=yr[e.administrativeArea]));let r,a;if(e.name){const[i,...o]=(e.name||"").split(" ");o.length===0?a=i:a=o.join(" "),r=i}return{firstName:r,lastName:a,address1:e.address1,address2:e.address2,city:n,province:t,country:e.countryCode,phone:e.phoneNumber,zip:e.postalCode}}const yr={"\u0623\u0628\u0648 \u0638\u0628\u064A":"AZ","\u0625\u0645\u0627\u0631\u0629 \u0627\u0644\u0634\u0627\u0631\u0642\u0629\u0651":"SH",\u0627\u0644\u0641\u062C\u064A\u0631\u0629:"FU",\u0639\u062C\u0645\u0627\u0646:"AJ","\u0631\u0623\u0633 \u0627\u0644\u062E\u064A\u0645\u0629":"RK","\u0623\u0645 \u0627\u0644\u0642\u064A\u0648\u064A\u0646":"UQ",\u062F\u0628\u064A:"DU"};class Zo{constructor({walletParams:t,isShippingRequired:n,hasSellingPlan:r,dataSource:a,button:i,i18n:o,cartClient:s}){c(this,"name",w.GooglePay),c(this,"walletParams"),c(this,"cart",null),c(this,"isShippingRequired"),c(this,"hasSellingPlan"),c(this,"dataSource"),c(this,"button"),c(this,"paymentsClient"),c(this,"i18n"),c(this,"actionGenerator"),c(this,"cartClient"),c(this,"handleClick",async()=>{const{cart:l,outOfStock:u}=await et({element:this.button,instrumentName:w.GooglePay,dataSource:this.dataSource});if(u){Y(this.i18n);return}this.cart=l;const p=Yo({cart:this.cart,walletParams:this.walletParams,isShippingRequired:this.isShippingRequired,hasSellingPlan:this.hasSellingPlan,i18n:this.i18n});await this.paymentsClient.loadPaymentData(p)}),c(this,"onPaymentDataChanged",async l=>{const{callbackTrigger:u,shippingAddress:p,shippingOptionData:m}=l;if(!this.cart)return{error:{reason:"OTHER_ERROR",message:"Missing cart",intent:"SHIPPING_ADDRESS"}};switch(u){case"INITIALIZE":case"SHIPPING_ADDRESS":{if(p){const y=await wt({cartClient:this.cartClient,cartId:this.cart.id,streetAddress:p?ge(p):{},instrumentName:w.GooglePay});return this.cart=y.data,this.getPaymentSheetUpdate({action:this.actionGenerator.mapMutationResultToPaymentSheetAction(y),mutationResult:y,intent:"SHIPPING_ADDRESS"})}return{newTransactionInfo:De({cart:this.cart,i18n:this.i18n})}}case"SHIPPING_OPTION":{if(!m||!m.id)return{error:{reason:"SHIPPING_OPTION_INVALID",message:this.i18n.translate("shipping_methods.choose_delivery_strategy"),intent:"SHIPPING_OPTION"}};const y=ln({deliveryGroups:this.cart.deliveryGroups,instrumentName:w.GooglePay,selectedDeliveryOptionHandles:[m.id]}),g=await on({cartClient:this.cartClient,cartId:this.cart.id,instrumentName:w.GooglePay,selectedDeliveryOptions:y,abortSignal:void 0});return this.cart=g.data,this.getPaymentSheetUpdate({action:this.actionGenerator.mapMutationResultToPaymentSheetAction(g),mutationResult:g,intent:"SHIPPING_OPTION"})}default:return f.notify(new gr("Unexpected callback intent. Got: ".concat(u))),{error:{reason:"OTHER_ERROR",message:this.i18n.translate("error_dialogs.wallet.generic_error",{wallet:"brand.google_pay"}),intent:u}}}}),c(this,"onPaymentAuthorized",async l=>{var u;b.authorizationAttempt(this.name),xt(N.AuthorizationLatency,this.name);const p=async _=>{var M,B;switch((M=_.effects)==null||M.forEach(U=>U()),_.action){case"complete":return b.authorizationComplete({instrument:this.name,measurement:K(N.AuthorizationLatency,this.name),result:"success"}),Z(_.redirectUrl),{transactionState:"SUCCESS"};case"show_error":case"abort":return m((B=_.errors)==null?void 0:B[0]);default:throw new Error("[".concat(this.name,"] completion action not handled: ").concat(_.action))}},m=_=>{const M={transactionState:"ERROR"};return b.authorizationComplete({instrument:this.name,measurement:K(N.AuthorizationLatency,this.name),result:"failure"}),M.error=_||{reason:"OTHER_ERROR",message:this.i18n.translate("error_dialogs.wallet.generic_error",{wallet:this.i18n.translate("brand.google_pay")}),intent:"PAYMENT_AUTHORIZATION"},M},y=_=>"error"in _&&_.error!==void 0,g=(u=l.paymentMethodData.info)==null?void 0:u.billingAddress,v=l.shippingAddress,{signature:S,signedMessage:J,protocolVersion:nt}=JSON.parse(l.paymentMethodData.tokenizationData.token);if(!g||this.isShippingRequired&&!v)return m();const At=async()=>{const _=l.email,M=this.isShippingRequired?{validateAddress:!0,streetAddress:ge(v)}:{},B=await wt(C({cartClient:this.cartClient,cartId:this.cart.id,instrumentName:this.name,emailAddress:_},M));return this.getPaymentSheetUpdate({action:this.actionGenerator.mapMutationResultToPaymentSheetAction(B),mutationResult:B,intent:"SHIPPING_ADDRESS"})},ie=async()=>{const _=ge(g),M=await He({cartId:this.cart.id,totalAmount:this.cart.totalAmount,paymentMethod:{walletPaymentMethod:{googlePayWalletContent:{billingAddress:_,signature:S,signedMessage:J,protocolVersion:nt}}},canUsePaymentMethodForFreeOrder:!1,billingAddress:_,cartClient:this.cartClient,instrumentName:this.name,hasSellingPlan:this.hasSellingPlan,abortSignal:void 0});return this.getPaymentSheetUpdate({action:this.actionGenerator.mapMutationResultToPaymentSheetAction(M),mutationResult:M,intent:"PAYMENT_METHOD"})};try{const _=await At();if(y(_))return m(_.error);const M=await ie();if(y(M))return m(M.error);const B=await sn({cartId:this.cart.id,token:S,cartClient:this.cartClient,instrumentName:this.name}),U=this.actionGenerator.mapCompletionResultToPaymentSheetAction(B);return p(U)}catch(_){const M=_;return f.notify(M),m()}}),this.walletParams=t,this.isShippingRequired=n,this.hasSellingPlan=r,this.dataSource=a,this.button=i,this.i18n=o,this.cartClient=s;const d={environment:this.walletParams.environment,merchantInfo:this.walletParams.paymentData.merchantInfo,paymentDataCallbacks:{onPaymentDataChanged:this.isShippingRequired?this.onPaymentDataChanged:void 0,onPaymentAuthorized:this.onPaymentAuthorized}};this.paymentsClient=new window.google.payments.api.PaymentsClient(d),this.actionGenerator=new Qo(this.i18n)}getPaymentSheetUpdate({action:t,mutationResult:n,intent:r}){var a,i;switch(t.action){case"update":{if(n.data)return{newTransactionInfo:De({cart:n.data,i18n:this.i18n}),newShippingOptionParameters:this.isShippingRequired?Xo({deliveryGroups:n.data.deliveryGroups,i18n:this.i18n}):void 0,error:(a=t.errors)==null?void 0:a[0]};break}case"show_error":return{error:(i=t.errors)==null?void 0:i[0]}}return f.notify(new gr("Unexpected callback intent. Got: ".concat(r))),{error:{reason:"OTHER_ERROR",message:this.i18n.translate("error_dialogs.wallet.generic_error",{wallet:this.i18n.translate("brand.google_pay")}),intent:r}}}}class gr extends Error{constructor(t){super(t),this.name="GooglePayError"}}const ts='<svg viewBox="0 0 41 17" xmlns="http://www.w3.org/2000/svg" width="45px">\n  <path\n    d="M19.526 2.635v4.083h2.518q.9 0 1.488-.605.605-.604.605-1.437 0-.816-.605-1.422-.588-.62-1.488-.62h-2.518zm0 5.52v4.736h-1.504V1.198h3.99q1.519 0 2.582 1.012 1.08 1.013 1.08 2.466 0 1.487-1.08 2.482-1.046.997-2.583.996zm7.668 2.287q0 .587.499.98.498.39 1.168.391.949 0 1.692-.701.745-.703.744-1.65-.704-.555-1.962-.555-.916 0-1.528.442-.613.44-.613 1.093m1.946-5.815q1.668 0 2.633.89.964.891.964 2.442v4.932h-1.439v-1.11h-.065q-.933 1.372-2.486 1.372-1.323 0-2.215-.784t-.891-1.96q0-1.242.94-1.976c.94-.734 1.463-.735 2.51-.735q1.34 0 2.206.49v-.344q0-.784-.621-1.33a2.13 2.13 0 0 0-1.455-.547q-1.26 0-1.995 1.062l-1.324-.834q1.095-1.568 3.238-1.568m11.853.262-5.02 11.53H34.42l1.864-4.034-3.302-7.496h1.635l2.387 5.749h.032l2.322-5.75z"\n  />\n  <path\n    d="M13.448 7.134q-.001-.71-.116-1.366H6.988v2.588h3.634a3.1 3.1 0 0 1-1.344 2.042v1.68h2.169c1.27-1.17 2.001-2.9 2.001-4.944"\n    style="fill: #4285f4"\n  />\n  <path\n    d="M6.988 13.7c1.816 0 3.344-.595 4.459-1.621l-2.169-1.681c-.603.406-1.38.643-2.29.643-1.754 0-3.244-1.182-3.776-2.774H.978v1.731a6.73 6.73 0 0 0 6.01 3.703"\n    style="fill: #34a853"\n  />\n  <path\n    d="M3.212 8.267a4.03 4.03 0 0 1 0-2.572V3.964H.978A6.7 6.7 0 0 0 .261 6.98c0 1.085.26 2.11.717 3.017z"\n    style="fill: #fbbc05"\n  />\n  <path\n    d="M6.988 2.921c.992 0 1.88.34 2.58 1.008v.001l1.92-1.918C10.324.928 8.804.262 6.989.262a6.73 6.73 0 0 0-6.01 3.702l2.234 1.731c.532-1.592 2.022-2.774 3.776-2.774"\n    style="fill: #ea4335"\n  />\n</svg>\n',es={LIGHT:"light",DARK:"dark"};class rs extends ht{constructor(){super(),c(this,"name",w.GooglePay),c(this,"paymentsClient",null),c(this,"button",null),c(this,"_shadowRoot"),c(this,"handleClick",async()=>{if(!this.disabled){this.disabled=!0;try{await this.createPaymentsClient(),await this.paymentsClient.handleClick(),b.sheetClicked({instrument:this.name,result:"success"}),tt(this.name)}catch(t){if(t.statusCode==="CANCELED"){b.sheetCancelled(w.GooglePay);return}this.disabled=!1,f.notify(t),b.sheetClicked({instrument:this.name,result:"failed"});const n=await this.i18n,r=n.translate("brand.google_pay");W(r,n)}}}),this._shadowRoot=this.attachShadow({mode:"closed"})}static get observedAttributes(){return["disabled"]}attributeChangedCallback(t,n,r){super.attributeChangedCallback(t,n,r,this.button)}async connectedCallback(){this.cleanupOnFailure(this.render.bind(this),this.name)}async createPaymentsClient(){this.paymentsClient=new Zo({walletParams:this.walletParams,isShippingRequired:this.isShippingRequired,hasSellingPlan:this.hasSellingPlan,dataSource:await this.dataSource,button:this,cartClient:await this.apiClient,i18n:await this.i18n})}async render(){const t=await this.extractedStyle,n=document.createElement("style");n.innerHTML=[t,Vo].join("\n");const r=Ot();this.disabled&&r.setAttribute("disabled",""),r.classList.add("button"),r.classList.add(x.BUTTON),r.classList.add(es[this.buttonTheme]),r.onclick=this.handleClick,await this.renderButtonContent(r),this.button=r,this._shadowRoot.appendChild(n),this._shadowRoot.appendChild(r),this.onRendered()}async renderButtonContent(t){const n=await this.i18n,r=n.translate("buy_with_button_content"),a=n.translate("brand.google_pay"),i=new DOMParser().parseFromString(ts,"image/svg+xml").documentElement;if(t.style.font=window.getComputedStyle(this).font,this.isCTA){t.setAttribute("aria-label",r.replace(Bt,a));const o=Ge({buttonContent:r,logoElement:i,setAriaHidden:!0});o.classList.add("content"),t.appendChild(o)}else t.setAttribute("aria-label",a),t.classList.add("logo-only"),t.appendChild(i)}}const st=class Fs extends rt{static walletName(){return"google_pay"}constructor(t){super(t)}getWebComponentName(){return"shopify-google-pay-button"}getInstrumentName(){return w.GooglePay}getWebComponentClass(){return rs}async loadWalletSDK(){if(Fs.googlePaySDKPromise)return Fs.googlePaySDKPromise;const t=document.createElement("script");return t.setAttribute("src",this.walletParams.sdkUrl),Fs.googlePaySDKPromise=new Promise((n,r)=>{t.onload=()=>n(),t.onerror=a=>{document.body.removeChild(t),r(a)},document.body.appendChild(t)}),Fs.googlePaySDKPromise}getLoadEligibility(){const t=new Date(this.walletParams.expiresAt*1e3).getTime();return Date.now()<=t?{eligible:!0}:{eligible:!1,reason:"authJwtExpired"}}getPartnerSDKEligibility(){return{eligible:!0}}};c(st,"googlePaySDKPromise");let Ne=st;const ns=[Si,Se,Ve,Ne,kt,Pe,fn],as=new Map(ns.map(e=>[e.walletName(),t=>new e(t)]));function Vt(e){const t=as.get(e.name);return t?t(e):(console.debug("Can't build wallet with name ".concat(e.name)),null)}function is(e){return e.map(t=>Vt(t)).filter(t=>t!=null)}const wn="*{box-sizing:border-box}.wallet-button-fade-in{animation:animation-fade-in .3s cubic-bezier(.1,.79,1,1)}@keyframes animation-fade-in{0%{opacity:0}to{opacity:1}}button[aria-disabled=true]{opacity:.5;cursor:not-allowed}";class os{constructor(t,n,r){this.getElement=t,this.apiClient=n,this.instrumentName=r}async getInitialCart(t){const n=this.getElement(),r=$e(n);if(!r)throw new Error("[".concat(this.instrumentName,"] unable to find product form"));const a=Q(Gn),{data:i,errors:o}=await this.apiClient.createCart(P(C({},r),{discountCodes:a?[a]:[],instrumentName:t}));if(!i)throw new Error("Failed to create cart: No cart returned");return{cart:i,errors:o}}}function ss({instanceNumber:e,styleId:t,styles:n,cssFileName:r}){var a,i;e===1&&(i=(a=window.Shopify)==null?void 0:a.PaymentButton)!=null&&i.isStorefrontPortableWallets&&(ls({styleId:t,styles:n,cssFileName:r})||cs({styleId:t,styles:n}))}function ls({styleId:e,styles:t,cssFileName:n}){return!!document.querySelector("style#".concat(e))}function cs({styleId:e,styles:t}){const n=document.createElement("style");n.id=e,n.innerHTML=t,document.head.appendChild(n)}function fr(e){let t=0,n=0,r=0;const a=e.split(/\s+/);for(let i=0;i<a.length;i++){const o=a[i];o!==">"&&(o.includes("#")&&(t+=(o.match(/#/g)||[]).length),o.includes(".")&&(n+=(o.match(/\./g)||[]).length),o.includes("[")&&(n+=(o.match(/\[/g)||[]).length),o.includes(":")&&(n+=(o.match(/:[^:]/g)||[]).length),/^[A-Za-z]/.test(o)&&(r+=1))}return[t,n,r]}function ds(e,t){for(let n=0;n<3;n++)if(e[n]!==t[n])return t[n]-e[n];return 0}function br(e){return[...e].sort((t,n)=>{const r=fr(t.selector),a=fr(n.selector);return ds(r,a)})}const us=/\.cart__dynamic-checkout-buttons|\.dynamic-checkout-buttons\s*(>\s*)?li(?![a-zA-Z0-9_.:#-])/,hs=/\.cart__dynamic-checkout-buttons|\.dynamic-checkout-buttons\s*\[role="?button"?\](?![:\w-])/,ps=/\.additional-checkout-buttons\s*(?:div\s*)?\[role="?button"?\](?![:\w-])/,_n=/\[data-shopify-buttoncontainer\](?![:\w-])/,Cn=/.dynamic-checkout-buttons .shopify-payment-button__button/,ms=/(?!.*\.shopify-cleanslate)\.shopify-payment-button__button(?:--branded)?(?![\w-:.#>])/,ys=/\.(shopify-payment-button|shopify-payment-button__button|shopify-payment-button__button--branded)\s*\[role="?button"?\](?![:\w-])/,gs=/(?:only\s+)?(?:screen\s+and\s+)?\((?:min|max)-(?:width|height):\s*\d+px\)/,fs=[hs,_n,us,ps,Cn],bs=[ms,ys,Cn];function Sn(e){const t=[...document.styleSheets].filter(ws),n=[],r=[];t.forEach(_=>{try{const M=[..._.cssRules].filter(U=>U instanceof CSSMediaRule),B=[..._.cssRules].filter(U=>U instanceof CSSStyleRule);r.push(...M.filter(U=>gs.test(U.conditionText)).flatMap(U=>[...U.cssRules].filter(z=>z instanceof CSSStyleRule).flatMap(z=>z.selectorText.split(",").map(Ft=>Ft.trim()).map(Ft=>C({selector:Ft,conditionText:U.conditionText},_r(z)))))),n.push(...B.flatMap(U=>U.selectorText.split(",").map(z=>z.trim()).map(z=>C({selector:z},_r(U)))))}catch(M){Gt()("shopify-support-debug")&&(console.debug("[shopify-support-debug] stylesheet origin: ".concat(_.href)),console.debug(M))}});const a=e===A.ProductPage?bs:fs,i=new Set;function o(_,M){const B=M.selector.match(_);return B?(i.add(B[0]),!0):!1}const s=n.filter(_=>a.some(M=>o(M,_))).reverse(),d=r.filter(_=>a.some(M=>o(M,_))).reverse(),l=Gt()("shopify-support-debug");l&&console.table(Array.from(i));const u=br(s),p=br(d),m={},y=Te(e)?document.querySelector(".cart__blocks .button"):document.querySelector(".product-form__buttons .button");m.boxShadow=y?getComputedStyle(y,":before").boxShadow:"none";for(const _ of u){const M=["height","minHeight","borderRadius","marginTop"];Te(e)&&_.selector.match(_n)&&M.push("justifyContent");for(const B of M)m[B]=Ss({rule:_,property:B,currentPropertyValue:m[B]})}const{height:g,borderRadius:v,minHeight:S,marginTop:J,justifyContent:nt,boxShadow:At}=m;if(l&&console.table([{property:"height",value:g},{property:"borderRadius",value:v},{property:"minHeight",value:S},{property:"marginTop",value:J},{property:"justifyContent",value:nt},{property:"boxShadow",value:At}]),e===A.ProductPage)return wr({styles:{height:g!=null?g:"44px",minHeight:S!=null?S:"44px",borderRadius:v!=null?v:"0px",marginTop:J!=null?J:"0px",boxShadow:At},mediaRules:p,pageType:A.ProductPage});const ie={height:"100%",minHeight:"100%",borderRadius:v!=null?v:"4px",boxShadow:At};return nt&&(ie.justifyContent=nt),wr({styles:ie,mediaRules:p,pageType:e})}function An(e,t,n){return e===w.ShopPay?t.concat(n):t}function ws(e){return e.href==null||e.href.startsWith(window.location.origin)}function Te(e){return e===A.CartPage||e===A.CartAjax}function yt({mediaCondition:e,selector:t,styles:n}){let r="".concat(e?"@media ".concat(e," { "):"").concat(t," {");for(const[a,i]of Object.entries(n))i&&(r+="\n  ".concat(a,": ").concat(i,";"));return r+="\n}",e&&(r+="}"),r+="\n",r}function _s(e){return e==="height"||e==="min-height"?"button-block-size":e==="border-radius"?"button-border-radius":e==="box-shadow"?"button-box-shadow":e==="justify-content"?"inline-alignment":e}function T(e,t,n){if(!n)return null;if(n.includes("var(--shopify-accelerated-checkout"))return n;const r=n.includes("!important"),a=n.replace(/!important/g,"").trim();return Te(t)&&(e==="height"||e==="min-height")?n:"var(--shopify-accelerated-checkout-".concat(_s(e),", ").concat(a,")").concat(r?" !important":"")}function wr({styles:e,pageType:t,mediaRules:n}){const{height:r,minHeight:a,borderRadius:i,marginTop:o,justifyContent:s,boxShadow:d}=e;let l=null,u=yt({selector:".".concat(x.BUTTON),styles:{height:T("height",t,r),"min-height":T("min-height",t,a),"border-radius":T("border-radius",t,i),"margin-top":o,"box-shadow":T("box-shadow",t,d)}}),p=yt({selector:".".concat(x.BUTTON),styles:{"--gravity-button-height":T("height",t,r),"--gravity-button-min-height":T("min-height",t,a),"--gravity-button-border-radius":T("border-radius",t,i),"--gravity-button-width":"100%"}});return s&&(l=yt({selector:".".concat(x.CONTAINER),styles:{"justify-content":T("justify-content",t,s)}})),n.forEach(m=>{(m.height||m.minHeight||m.borderRadius||m.marginTop)&&(u+=yt({mediaCondition:m.conditionText,selector:".".concat(x.BUTTON),styles:{height:T("height",t,m.height),"min-height":T("min-height",t,m.minHeight),"border-radius":T("border-radius",t,m.borderRadius),"margin-top":m.marginTop}}),p+=yt({mediaCondition:m.conditionText,selector:".".concat(x.BUTTON),styles:{"--gravity-button-height":T("height",t,m.height),"--gravity-button-min-height":T("min-height",t,m.minHeight),"--gravity-button-border-radius":T("border-radius",t,m.borderRadius)}})),m.justifyContent&&(l||(l=""),l+=yt({mediaCondition:m.conditionText,selector:".".concat(x.CONTAINER),styles:{"justify-content":T("justify-content",t,m.justifyContent)}}))}),{buttonStyles:u.trim(),containerStyles:l==null?void 0:l.trim(),shopPayAdditionalStyles:p.trim()}}function _r(e){return[["height"],["minHeight","min-height"],["borderRadius","border-radius"],["marginTop","margin-top"],["justifyContent","justify-content"]].reduce((t,[n,r])=>(t[n]=Cs({rule:e,property:r!=null?r:n}),t),{})}function Cs({rule:e,property:t}){const n=e.style.getPropertyValue(t);return e.style.getPropertyPriority(t)?"".concat(n," !important"):n||null}function Ss({rule:e,property:t,currentPropertyValue:n}){const r=e[t];return!(n!=null&&n.includes("!important"))&&r!=null&&r.includes("!important")?r:n!=null?n:r}const Cr=2e3,Kt=class Gs extends Ue{constructor(){super(),c(this,"instanceNumber",++Gs.instanceCount),c(this,"formObserver"),c(this,"dataSource"),c(this,"wrapper"),c(this,"shopPromiseEligible"),c(this,"didInitiateRender",!1),this.wrapper=document.createElement("div"),Le({shop:{shopId:this.shopId}}),ss({instanceNumber:this.instanceNumber,styleId:"shopify-accelerated-checkout",styles:hi,cssFileName:"AcceleratedCheckout.css"}),this.shopPromiseEligible=Rr()}static get observedAttributes(){return["access-token","disabled","has-selling-plan","requires-shipping"]}async connectedCallback(){var t,n,r;try{if((n=(t=this.wrapper)==null?void 0:t.children)!=null&&n.length||this.didInitiateRender)return;if(!this.validateRenderingSurface()){this.clearUI();return}this.instanceNumber===1&&b.initStarted();const a=re(N.ButtonDisplay,"dc:".concat(this.instanceNumber));this.i18n=Qt(),this.setupFormObserver(),this.didInitiateRender=!0;const i=()=>this.wrapper,o=await this.loadWallet(),s=(o==null?void 0:o.getInstrumentName())===w.ApplePay||(o==null?void 0:o.getInstrumentName())===w.GooglePay;this.apiClient=new ae({accessToken:this.accessToken,country:this.buyerCountry,locale:this.i18n.locale,withCarrierRates:s});const d=(r=o==null?void 0:o.getInstrumentName())!=null?r:w.BuyItNow;this.dataSource=new os(i,this.apiClient,d);const l=o==null?void 0:o.createWebComponent({walletContainer:this,dataSource:this.dataSource,i18n:this.i18n,apiClient:this.apiClient,classNames:As(d),callToAction:"true",pageType:A.ProductPage,containerInstanceNumber:this.instanceNumber,extractedStyle:this.getExtractedStyle({instrumentName:d}),onRendered:()=>b.instrumentLoaded({instrumentOrComponentName:d,result:"success",measurement:a()})});if(!l)throw new Sr("No web component found");this.render(l,d),b.initCompleted({result:"success"}),this.instanceNumber===1&&this.triggerLoadedEvent()}catch(a){this.clearUI(),b.initCompleted({error:a}),f.notify(new Sr("An error occurred while attempting to render the AcceleratedCheckout: ".concat(a)))}}async attributeChangedCallback(t,n,r){n!==r&&(Fe(this,t,r),t==="has-selling-plan"&&this.toggleBuyerConsent(this,this.apiClient,this.i18n,"buyer-consent"))}async render(t,n){this.clearUI();const r=this.attachShadow({mode:"closed"}),a=document.createElement("style");a.innerHTML=wn,r.appendChild(a),this.wrapper.className="wallet-button-fade-in";const i=document.createElement("slot");i.name="button",this.wrapper.appendChild(i);const o=document.createElement("slot");o.name="promise",this.wrapper.appendChild(o);const s=document.createElement("slot");s.name="more-options",this.wrapper.appendChild(s);const d=document.createElement("slot");d.name="buyer-consent",this.wrapper.appendChild(d),r==null||r.appendChild(this.wrapper),this.toggleBuyerConsent(this,this.apiClient,this.i18n,"buyer-consent");const l=new DocumentFragment;l.appendChild(t);const u=this.getShopPromiseSlot();u&&l.appendChild(u);const p=this.getMorePaymentOptionsLink(n);p&&l.appendChild(p),this.appendChild(l)}getMorePaymentOptionsLink(t){var n,r;if(t===w.BuyItNow)return null;const a=document.createElement("more-payment-options-link");return te(a,{"buyer-country":(n=this.buyerCountry)!=null?n:"","access-token":(r=this.accessToken)!=null?r:"","recommended-instrument":t,slot:"more-options"}),a.disabled=this.disabled,a.setDataSource(this.dataSource),a.setI18n(this.i18n),a.setClassNames(fe.MORE_PAYMENT_OPTION_BUTTON),a}getShopPromiseSlot(){if(!this.shopPromiseEligible)return null;const t=document.createElement("div");return t.setAttribute("data-shopify","shop-promise-payment-button-slot"),t.style.height="100%",t.slot="promise",t}validateRenderingSurface(){return Be(this)!=null}async loadWallet(){const t=ui(this.recommendedWallet,this.fallbackWallet,"AcceleratedCheckout");return await vs(P(C({},t),{instanceNumber:this.instanceNumber}))}setupFormObserver(){this.formObserver||(this.formObserver=new Fr(this,({disabled:t,hasSellingPlan:n})=>{this.disabled=t,this.hasSellingPlan=n,this.isShippingRequired=Es(this,this.variantParams)}),this.formObserver.setupMutationObservers())}getExtractedStyle({instrumentName:t}){if(this.styleExtractorDisabled)return Gt()("shopify-support-debug")&&console.debug("[shopify-support-debug] styling backward compatibility disabled"),t===w.ShopPay?mi:pi;const{buttonStyles:n,shopPayAdditionalStyles:r}=Sn(A.ProductPage);return An(t,n,r)}};c(Kt,"instanceCount",0);let qt=Kt;function As(e){return e===w.BuyItNow?fe.UNBRANDED_BUTTON:fe.BRANDED_BUTTON}function Es(e,t){var n;const r=$e(e);return!!((n=t.find(a=>a.id===Number(r==null?void 0:r.variantId)))!=null&&n.requiresShipping)}async function vs({recommendedWallet:e,fallbackWallet:t,instanceNumber:n}){const r=e?Vt(e):null,a=Vt(t);if(Me(r)){const i=we({walletInstrument:r,instanceNumber:n}),o="timeout",s=await Promise.race([i,new Promise(d=>setTimeout(()=>d(o),Cr))]);if(s===o)b.instrumentSDKLoaded({instrument:r.getInstrumentName(),measurement:Cr,result:"timeout"});else if(s instanceof rt)return s}return a&&we({walletInstrument:a,instanceNumber:n})}F("shopify-accelerated-checkout",qt),F("more-payment-options-link",ei,{isChildCustomElement:!0});class Sr extends Error{constructor(){super(...arguments),c(this,"name","AcceleratedCheckoutError")}}class Is extends qt{}F("dynamic-checkout",Is);const Ps=e=>{const t=new PerformanceObserver(n=>{n.getEntriesByType("resource").some(r=>r.name.includes(Pt.CartUpdate)||r.name.includes(Pt.CartChange)||r.name.includes(Pt.CartAdd)||r.name.includes(Pt.CartClear))&&e()});return t.observe({entryTypes:["resource"]}),t},Ds=".wallet-cart-wrapper{--wallet-button-height-horizontal: var( --shopify-accelerated-checkout-button-inline-size, 42px );--wallet-button-height-vertical: var( --shopify-accelerated-checkout-button-block-size, 54px );--wallet-button-width-horizontal: 150px;--wallet-button-width-vertical: 100%;--wallet-button-border-radius: var( --shopify-accelerated-checkout-button-border-radius, 4px );--wallet-grid-margin-horizontal: 0 -5px -5px -5px;--wallet-button-container-margin-horizontal: 0 5px 5px;--wallet-button-container-margin-vertical: var( --shopify-accelerated-checkout-row-gap, 8px ) 0 0}.wallet-cart-wrapper{container-type:inline-size;container-name:wrapper}.wallet-cart-grid{margin:var(--wallet-grid-margin-horizontal);padding:0;display:flex;justify-content:var(--shopify-accelerated-checkout-inline-alignment, start);flex-direction:row}.wallet-cart-grid.wallet-cart-grid--vertical{justify-content:flex-start;flex-direction:column;margin:0}.wallet-cart-grid.wallet-cart-grid--vertical .wallet-cart-button-container{width:var(--wallet-button-width-vertical);height:var(--wallet-button-height-vertical);margin:var(--wallet-button-container-margin-vertical)}.wallet-cart-grid.wallet-cart-grid--vertical .wallet-cart-button{width:var(--wallet-button-width-vertical);height:var(--wallet-button-height-vertical)}.wallet-cart-button-container{position:relative;margin:var(--wallet-button-container-margin-horizontal)}.wallet-cart-button-container,.wallet-cart-button{width:var(--wallet-button-width-horizontal);height:var(--wallet-button-height-horizontal);border-radius:var(--wallet-button-border-radius);list-style-type:none!important;text-align:center;flex-shrink:0;flex-grow:0}@container wrapper (width >= 150px) and (width <= 500px){.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(1)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(2))){justify-content:flex-start;flex-direction:column;margin:0}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(1)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(2))) .wallet-cart-button-container{width:var(--wallet-button-width-vertical);height:var(--wallet-button-height-vertical);margin:var(--wallet-button-container-margin-vertical)}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(1)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(2))) .wallet-cart-button{width:var(--wallet-button-width-vertical);height:var(--wallet-button-height-vertical)}}@container wrapper (width <= 310px){.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(2)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(3))){justify-content:flex-start;flex-direction:column;margin:0}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(2)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(3))) .wallet-cart-button-container{width:var(--wallet-button-width-vertical);height:var(--wallet-button-height-vertical);margin:var(--wallet-button-container-margin-vertical)}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(2)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(3))) .wallet-cart-button{width:var(--wallet-button-width-vertical);height:var(--wallet-button-height-vertical)}}@container wrapper (width <= 470px){.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(3)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(4))){justify-content:flex-start;flex-direction:column;margin:0}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(3)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(4))) .wallet-cart-button-container{width:var(--wallet-button-width-vertical);height:var(--wallet-button-height-vertical);margin:var(--wallet-button-container-margin-vertical)}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(3)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(4))) .wallet-cart-button{width:var(--wallet-button-width-vertical);height:var(--wallet-button-height-vertical)}}@container wrapper (width <= 630px){.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(4)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(5))){justify-content:flex-start;flex-direction:column;margin:0}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(4)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(5))) .wallet-cart-button-container{width:var(--wallet-button-width-vertical);height:var(--wallet-button-height-vertical);margin:var(--wallet-button-container-margin-vertical)}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(4)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(5))) .wallet-cart-button{width:var(--wallet-button-width-vertical);height:var(--wallet-button-height-vertical)}}@container wrapper (width <= 790px){.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(5)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(6))){justify-content:flex-start;flex-direction:column;margin:0}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(5)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(6))) .wallet-cart-button-container{width:var(--wallet-button-width-vertical);height:var(--wallet-button-height-vertical);margin:var(--wallet-button-container-margin-vertical)}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(5)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(6))) .wallet-cart-button{width:var(--wallet-button-width-vertical);height:var(--wallet-button-height-vertical)}}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(6)){justify-content:flex-start;flex-direction:column;margin:0}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(6)) .wallet-cart-button-container{width:var(--wallet-button-width-vertical);height:var(--wallet-button-height-vertical);margin:var(--wallet-button-container-margin-vertical)}.wallet-cart-grid:has(>.wallet-cart-button-container:nth-of-type(6)) .wallet-cart-button{width:var(--wallet-button-width-vertical);height:var(--wallet-button-height-vertical)}@media screen and (max-width: 750px){.wallet-cart-grid{justify-content:flex-start;flex-direction:column;max-width:none;margin:0}.wallet-cart-grid .wallet-cart-button-container{max-width:none;width:var(--wallet-button-width-vertical);height:var(--wallet-button-height-vertical);margin:var(--wallet-button-container-margin-vertical)}.wallet-cart-grid .wallet-cart-button{width:var(--wallet-button-width-vertical);height:var(--wallet-button-height-vertical)}}@supports (not (container-type: inline-size)) or (not (selector(:has(*)))){.wallet-cart-grid{justify-content:flex-start;flex-direction:column;margin:0}.wallet-cart-button-container{width:var(--wallet-button-width-vertical);height:var(--wallet-button-height-vertical);margin:var(--wallet-button-container-margin-vertical)}.wallet-cart-grid .wallet-cart-button{width:var(--wallet-button-width-vertical);height:var(--wallet-button-height-vertical)}}",Ns=".portable-wallet{height:100%;width:100%;border-radius:var(--shopify-accelerated-checkout-button-border-radius, 4px)}",Ts=".portable-wallet{--gravity-button-height: 100%;--gravity-button-border-radius: var( --shopify-accelerated-checkout-button-border-radius, 4px );--gravity-button-width: 100%}";class Rs{constructor(t,n){this.cartToken=t,this.apiClient=n}async getInitialCart(t){const n="gid://shopify/Cart/".concat(this.cartToken);return{cart:await this.apiClient.fetchCart({id:n,instrumentName:t,startingCheckout:!0}),errors:[]}}}var Ct;const Yt=class zs extends Ue{constructor(){super(),c(this,"instanceNumber",++zs.instanceCount),c(this,"cartObserver",null),c(this,"dataSource",null),c(this,"wrapper"),c(this,"buttonStyles",""),c(this,"containerStyles",""),c(this,"shopPayAdditionalStyles",""),Ye(this,Ct,void 0),Le({shop:{shopId:this.shopId,cartId:this.cartId}}),this.wrapper=document.createElement("div")}static get observedAttributes(){return["access-token","has-selling-plan","requires-shipping"]}createDataSource(t){const n=Q("cart");if(!n)throw new Error("[AcceleratedCheckoutCart] cart cookie does not exist");const r=Qt(),a=new ae({accessToken:this.accessToken,country:this.buyerCountry,locale:r.locale,withCarrierRates:t}),i=new Rs(n,a);this.dataSource=i,this.apiClient=a,this.i18n=r}async createWebComponents({shouldRefetchCartAttributes:t}){if(!this.walletConfigs)throw new Error("[AcceleratedCheckoutCart] walletConfigs does not exist");const n=ai(this.walletConfigs,"AcceleratedCheckoutCart");if(!(n instanceof Array))throw new Error("[AcceleratedCheckoutCart] invalid walletConfigs found");const r=n.some(o=>o.name==="apple_pay");this.createDataSource(r),t&&await this.updateAttributes();const a=N.ButtonDisplay,i=o=>"".concat(o,":").concat(this.instanceNumber);return(await ks({walletConfigs:n,instanceNumber:this.instanceNumber,startButtonDisplayBenchmark:o=>xt(a,i(o))})).map(o=>{const s=o.getInstrumentName(),d=An(s,this.buttonStyles,this.shopPayAdditionalStyles);return o.createWebComponent({walletContainer:this,dataSource:this.dataSource,i18n:this.i18n,apiClient:this.apiClient,pageType:A.CartPage,containerInstanceNumber:this.instanceNumber,extractedStyle:d,slot:"button-".concat(o.getInstrumentName()),onRendered:()=>b.instrumentLoaded({instrumentOrComponentName:s,result:"success",measurement:K(a,i(s))})})})}async cartChangedCallback(){try{const t=Q("cart");if(!this.dataSource&&t){await this.render({shouldRefetchCartAttributes:!0});return}else if(!t){b.cartTokenMissing({reason:"cartChangedCallback"});return}await this.updateAttributes()}catch(t){this.clearUI(),f.notify(t)}}async updateAttributes(){var t;const n=await((t=this.apiClient)==null?void 0:t.fetchCart({id:"gid://shopify/Cart/".concat(this.cartId),instrumentName:w.Unknown}));if(!(n!=null&&n.id))throw new Error("[".concat(this.updateAttributes,"] received invalid cart"));this.hasSellingPlan=n.lineItems.some(r=>r.sellingPlanAllocation!=null),this.isShippingRequired=n.lineItems.some(r=>r.merchandise.requiresShipping)}async connectedCallback(){try{if($({event:L.CartInitCalled}),this.cartObserver=Ps(()=>this.cartChangedCallback()),!Q("cart")){b.cartTokenMissing({reason:"connectedCallback"});return}await this.render({shouldRefetchCartAttributes:!1})}catch(t){this.clearUI(),f.notify(t)}}disconnectedCallback(){var t;(t=this.cartObserver)==null||t.disconnect()}async attributeChangedCallback(t,n,r){n!==r&&(Fe(this,t,r),t==="has-selling-plan"&&this.toggleBuyerConsent(this.wrapper,this.apiClient,this.i18n,"buyer-consent"))}async render({shouldRefetchCartAttributes:t}){var n;if(this.hasLegacyCartCookie()){b.legacyCartCookie(),this.clearUI();return}const r=re(N.ButtonDisplay,"cart:".concat(this.instanceNumber));this.extractStyles();const a=await this.createWebComponents({shouldRefetchCartAttributes:t});if(this.clearUI(),a.length===0)return;const i=new DocumentFragment,o=this.getOrCreateShadowRoot(),s=document.createElement("style");s.innerHTML=[wn,Ds,(n=this.containerStyles)!=null?n:""].join("\n"),o.appendChild(s),this.wrapper=document.createElement("div"),this.wrapper.className="wallet-cart-wrapper wallet-button-fade-in";const d=document.createElement("ul");d.className="wallet-cart-grid ".concat(x.CONTAINER),d.setAttribute("role","list"),Ls()&&d.classList.add("wallet-cart-grid--vertical"),a.forEach(u=>{const p=document.createElement("li"),m=document.createElement("div"),y=document.createElement("slot");y.name="button-".concat(u.name),p.className="wallet-cart-button-container",m.className="wallet-cart-button",p.setAttribute("data-testid","grid-cell"),p.appendChild(m),m.appendChild(y),d.appendChild(p),i.appendChild(u)}),this.wrapper.appendChild(d);const l=document.createElement("slot");l.name="buyer-consent",this.wrapper.appendChild(l),this.toggleBuyerConsent(this.wrapper,this.apiClient,this.i18n,"buyer-consent"),o.appendChild(this.wrapper),this.appendChild(i),b.instrumentLoaded({instrumentOrComponentName:"AcceleratedCheckoutCart",result:"success",measurement:r()})}getOrCreateShadowRoot(){return le(this,Ct)||Je(this,Ct,this.attachShadow({mode:"closed"})),le(this,Ct)}hasLegacyCartCookie(){const t=Q("cart");return t?t==null?void 0:t.match(/^[a-z0-9]+$/):!1}extractStyles(){if(this.styleExtractorDisabled){Gt()("shopify-support-debug")&&console.debug("[shopify-support-debug] styling backward compatibility disabled"),this.buttonStyles=Ns,this.shopPayAdditionalStyles=Ts;return}const{buttonStyles:t,containerStyles:n,shopPayAdditionalStyles:r}=Sn(A.CartPage);this.buttonStyles=t,this.containerStyles=n!=null?n:"",this.shopPayAdditionalStyles=r}};Ct=new WeakMap,c(Yt,"instanceCount",0);let jt=Yt;async function ks({walletConfigs:e,instanceNumber:t,startButtonDisplayBenchmark:n=()=>{}}){const r=oi(is(e));return(await Promise.all(r.map(a=>(n(a.getInstrumentName()),we({walletInstrument:a,instanceNumber:t}))))).filter(a=>a!=null)}function Ls(){return!!document.querySelector(".additional-checkout-buttons--vertical shopify-accelerated-checkout-cart")}F("shopify-accelerated-checkout-cart",jt);class Os extends jt{}F("cart-wallet-buttons",Os);class xs{getInitialCart(){throw new Error('[NoOpDataSource] Unexpected call to "getCart"')}}const Jt=class qs extends Ue{constructor(){super(),c(this,"instanceNumber",++qs.instanceCount),Le({shop:{shopId:this.shopId}})}get walletConfig(){return this.getAttribute("wallet-config")}get pageType(){return this.getAttribute("page-type")||A.Unknown}async connectedCallback(){try{if(this.children.length)return;this.instanceNumber===1&&b.initStarted();const t=re(N.ButtonDisplay,"dc:".concat(this.instanceNumber)),n=ii(this.walletConfig,"WalletButton");if(!n)throw new Vn("[WalletButton] No config provided.");const r=Vt(n);if(!r||!await this.eligibleToShow(r))return;const a=r.getInstrumentName();this.i18n=Qt(),this.apiClient=new ae({accessToken:this.accessToken,country:this.buyerCountry,locale:this.i18n.locale});const i=this.createWebComponent(r,this.i18n,this.apiClient,a,t);this.innerHTML="",this.appendChild(i),b.initCompleted({result:"success"}),this.instanceNumber===1&&this.triggerLoadedEvent()}catch(t){this.innerHTML="",b.initCompleted({error:t}),f.notify(t)}}createWebComponent(t,n,r,a,i){const o=t.createWebComponent({walletContainer:this,dataSource:new xs,i18n:n,apiClient:r,containerInstanceNumber:this.instanceNumber,pageType:this.pageType});return o.onRendered=()=>{b.instrumentLoaded({instrumentOrComponentName:a,result:"success",measurement:i()})},o}async eligibleToShow(t){return!(!Me(t)||(await t.loadWalletSDK(),!t.getPartnerSDKEligibility().eligible))}};c(Jt,"instanceCount",0);let Re=Jt;F("shopify-wallet-button",Re),Mn(f),Un(f),b.startExporter();
